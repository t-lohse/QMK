   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 4
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 2
  15              		.file	"hal_usb.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "lib/chibios/os/hal/src/hal_usb.c"
  20              		.section	.text.set_address,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	set_address:
  27              	.LVL0:
  28              	.LFB283:
   1:lib/chibios/os/hal/src/hal_usb.c **** /*
   2:lib/chibios/os/hal/src/hal_usb.c ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio
   3:lib/chibios/os/hal/src/hal_usb.c **** 
   4:lib/chibios/os/hal/src/hal_usb.c ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:lib/chibios/os/hal/src/hal_usb.c ****     you may not use this file except in compliance with the License.
   6:lib/chibios/os/hal/src/hal_usb.c ****     You may obtain a copy of the License at
   7:lib/chibios/os/hal/src/hal_usb.c **** 
   8:lib/chibios/os/hal/src/hal_usb.c ****         http://www.apache.org/licenses/LICENSE-2.0
   9:lib/chibios/os/hal/src/hal_usb.c **** 
  10:lib/chibios/os/hal/src/hal_usb.c ****     Unless required by applicable law or agreed to in writing, software
  11:lib/chibios/os/hal/src/hal_usb.c ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:lib/chibios/os/hal/src/hal_usb.c ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:lib/chibios/os/hal/src/hal_usb.c ****     See the License for the specific language governing permissions and
  14:lib/chibios/os/hal/src/hal_usb.c ****     limitations under the License.
  15:lib/chibios/os/hal/src/hal_usb.c **** */
  16:lib/chibios/os/hal/src/hal_usb.c **** 
  17:lib/chibios/os/hal/src/hal_usb.c **** /**
  18:lib/chibios/os/hal/src/hal_usb.c ****  * @file    hal_usb.c
  19:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB Driver code.
  20:lib/chibios/os/hal/src/hal_usb.c ****  *
  21:lib/chibios/os/hal/src/hal_usb.c ****  * @addtogroup USB
  22:lib/chibios/os/hal/src/hal_usb.c ****  * @{
  23:lib/chibios/os/hal/src/hal_usb.c ****  */
  24:lib/chibios/os/hal/src/hal_usb.c **** 
  25:lib/chibios/os/hal/src/hal_usb.c **** #include <string.h>
  26:lib/chibios/os/hal/src/hal_usb.c **** 
  27:lib/chibios/os/hal/src/hal_usb.c **** #include "hal.h"
  28:lib/chibios/os/hal/src/hal_usb.c **** 
  29:lib/chibios/os/hal/src/hal_usb.c **** #if (HAL_USE_USB == TRUE) || defined(__DOXYGEN__)
  30:lib/chibios/os/hal/src/hal_usb.c **** 
  31:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  32:lib/chibios/os/hal/src/hal_usb.c **** /* Driver local definitions.                                                 */
  33:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  34:lib/chibios/os/hal/src/hal_usb.c **** 
  35:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  36:lib/chibios/os/hal/src/hal_usb.c **** /* Driver exported variables.                                                */
  37:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  38:lib/chibios/os/hal/src/hal_usb.c **** 
  39:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  40:lib/chibios/os/hal/src/hal_usb.c **** /* Driver local variables and types.                                         */
  41:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  42:lib/chibios/os/hal/src/hal_usb.c **** 
  43:lib/chibios/os/hal/src/hal_usb.c **** static const uint8_t zero_status[] = {0x00, 0x00};
  44:lib/chibios/os/hal/src/hal_usb.c **** static const uint8_t active_status[] = {0x00, 0x00};
  45:lib/chibios/os/hal/src/hal_usb.c **** static const uint8_t halted_status[] = {0x01, 0x00};
  46:lib/chibios/os/hal/src/hal_usb.c **** 
  47:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  48:lib/chibios/os/hal/src/hal_usb.c **** /* Driver local functions.                                                   */
  49:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
  50:lib/chibios/os/hal/src/hal_usb.c **** 
  51:lib/chibios/os/hal/src/hal_usb.c **** static uint16_t get_hword(uint8_t *p) {
  52:lib/chibios/os/hal/src/hal_usb.c ****   uint16_t hw;
  53:lib/chibios/os/hal/src/hal_usb.c **** 
  54:lib/chibios/os/hal/src/hal_usb.c ****   hw  = (uint16_t)*p++;
  55:lib/chibios/os/hal/src/hal_usb.c ****   hw |= (uint16_t)*p << 8U;
  56:lib/chibios/os/hal/src/hal_usb.c ****   return hw;
  57:lib/chibios/os/hal/src/hal_usb.c **** }
  58:lib/chibios/os/hal/src/hal_usb.c **** 
  59:lib/chibios/os/hal/src/hal_usb.c **** /**
  60:lib/chibios/os/hal/src/hal_usb.c ****  * @brief  SET ADDRESS transaction callback.
  61:lib/chibios/os/hal/src/hal_usb.c ****  *
  62:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
  63:lib/chibios/os/hal/src/hal_usb.c ****  */
  64:lib/chibios/os/hal/src/hal_usb.c **** static void set_address(USBDriver *usbp) {
  29              		.loc 1 64 42 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  65:lib/chibios/os/hal/src/hal_usb.c **** 
  66:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address = usbp->setup[2];
  33              		.loc 1 66 3 view .LVU1
  64:lib/chibios/os/hal/src/hal_usb.c **** 
  34              		.loc 1 64 42 is_stmt 0 view .LVU2
  35 0000 10B5     		push	{r4, lr}
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 4, -8
  38              		.cfi_offset 14, -4
  64:lib/chibios/os/hal/src/hal_usb.c **** 
  39              		.loc 1 64 42 view .LVU3
  40 0002 0446     		mov	r4, r0
  41              		.loc 1 66 17 view .LVU4
  42 0004 90F87630 		ldrb	r3, [r0, #118]	@ zero_extendqisi2
  43 0008 80F87E30 		strb	r3, [r0, #126]
  67:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_set_address(usbp);
  44              		.loc 1 67 3 is_stmt 1 view .LVU5
  45 000c FFF7FEFF 		bl	usb_lld_set_address
  46              	.LVL1:
  68:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_ADDRESS);
  47              		.loc 1 68 3 view .LVU6
  48 0010 6368     		ldr	r3, [r4, #4]
  49 0012 1B68     		ldr	r3, [r3]
  50 0014 13B1     		cbz	r3, .L2
  51              		.loc 1 68 3 discriminator 1 view .LVU7
  52 0016 0121     		movs	r1, #1
  53 0018 2046     		mov	r0, r4
  54 001a 9847     		blx	r3
  55              	.LVL2:
  56              	.L2:
  57              		.loc 1 68 52 discriminator 3 view .LVU8
  69:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state = USB_SELECTED;
  58              		.loc 1 69 3 discriminator 3 view .LVU9
  59              		.loc 1 69 15 is_stmt 0 discriminator 3 view .LVU10
  60 001c 0323     		movs	r3, #3
  61 001e 2370     		strb	r3, [r4]
  70:lib/chibios/os/hal/src/hal_usb.c **** }
  62              		.loc 1 70 1 discriminator 3 view .LVU11
  63 0020 10BD     		pop	{r4, pc}
  64              		.loc 1 70 1 discriminator 3 view .LVU12
  65              		.cfi_endproc
  66              	.LFE283:
  68              		.section	.text.usbInit,"ax",%progbits
  69              		.align	1
  70              		.global	usbInit
  71              		.syntax unified
  72              		.thumb
  73              		.thumb_func
  75              	usbInit:
  76              	.LFB285:
  71:lib/chibios/os/hal/src/hal_usb.c **** 
  72:lib/chibios/os/hal/src/hal_usb.c **** /**
  73:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Standard requests handler.
  74:lib/chibios/os/hal/src/hal_usb.c ****  * @details This is the standard requests default handler, most standard
  75:lib/chibios/os/hal/src/hal_usb.c ****  *          requests are handled here, the user can override the standard
  76:lib/chibios/os/hal/src/hal_usb.c ****  *          handling using the @p requests_hook_cb hook in the
  77:lib/chibios/os/hal/src/hal_usb.c ****  *          @p USBConfig structure.
  78:lib/chibios/os/hal/src/hal_usb.c ****  *
  79:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
  80:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The request handling exit code.
  81:lib/chibios/os/hal/src/hal_usb.c ****  * @retval false        Request not recognized by the handler or error.
  82:lib/chibios/os/hal/src/hal_usb.c ****  * @retval true         Request handled.
  83:lib/chibios/os/hal/src/hal_usb.c ****  */
  84:lib/chibios/os/hal/src/hal_usb.c **** static bool default_handler(USBDriver *usbp) {
  85:lib/chibios/os/hal/src/hal_usb.c ****   const USBDescriptor *dp;
  86:lib/chibios/os/hal/src/hal_usb.c **** 
  87:lib/chibios/os/hal/src/hal_usb.c ****   /* Decoding the request.*/
  88:lib/chibios/os/hal/src/hal_usb.c ****   switch ((((uint32_t)usbp->setup[0] & (USB_RTYPE_RECIPIENT_MASK |
  89:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
  90:lib/chibios/os/hal/src/hal_usb.c ****            ((uint32_t)usbp->setup[1] << 8U))) {
  91:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_STATUS << 8):
  92:lib/chibios/os/hal/src/hal_usb.c ****     /* Just returns the current status word.*/
  93:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, (uint8_t *)&usbp->status, 2, NULL);
  94:lib/chibios/os/hal/src/hal_usb.c ****     return true;
  95:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_CLEAR_FEATURE << 8):
  96:lib/chibios/os/hal/src/hal_usb.c ****     /* Only the DEVICE_REMOTE_WAKEUP is handled here, any other feature
  97:lib/chibios/os/hal/src/hal_usb.c ****        number is handled as an error.*/
  98:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] == USB_FEATURE_DEVICE_REMOTE_WAKEUP) {
  99:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status &= ~2U;
 100:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 101:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 102:lib/chibios/os/hal/src/hal_usb.c ****     }
 103:lib/chibios/os/hal/src/hal_usb.c ****     return false;
 104:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_FEATURE << 8):
 105:lib/chibios/os/hal/src/hal_usb.c ****     /* Only the DEVICE_REMOTE_WAKEUP is handled here, any other feature
 106:lib/chibios/os/hal/src/hal_usb.c ****        number is handled as an error.*/
 107:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] == USB_FEATURE_DEVICE_REMOTE_WAKEUP) {
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status |= 2U;
 109:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 110:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 111:lib/chibios/os/hal/src/hal_usb.c ****     }
 112:lib/chibios/os/hal/src/hal_usb.c ****     return false;
 113:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_ADDRESS << 8):
 114:lib/chibios/os/hal/src/hal_usb.c ****     /* The SET_ADDRESS handling can be performed here or postponed after
 115:lib/chibios/os/hal/src/hal_usb.c ****        the status packed depending on the USB_SET_ADDRESS_MODE low
 116:lib/chibios/os/hal/src/hal_usb.c ****        driver setting.*/
 117:lib/chibios/os/hal/src/hal_usb.c **** #if USB_SET_ADDRESS_MODE == USB_EARLY_SET_ADDRESS
 118:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[0] == USB_RTYPE_RECIPIENT_DEVICE) &&
 119:lib/chibios/os/hal/src/hal_usb.c ****         (usbp->setup[1] == USB_REQ_SET_ADDRESS)) {
 120:lib/chibios/os/hal/src/hal_usb.c ****       set_address(usbp);
 121:lib/chibios/os/hal/src/hal_usb.c ****     }
 122:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 123:lib/chibios/os/hal/src/hal_usb.c **** #else
 124:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, set_address);
 125:lib/chibios/os/hal/src/hal_usb.c **** #endif
 126:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 127:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_DESCRIPTOR << 8):
 128:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_GET_DESCRIPTOR << 8):
 129:lib/chibios/os/hal/src/hal_usb.c ****     /* Handling descriptor requests from the host.*/
 130:lib/chibios/os/hal/src/hal_usb.c ****     dp = usbp->config->get_descriptor_cb(usbp, usbp->setup[3],
 131:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 132:lib/chibios/os/hal/src/hal_usb.c ****                                          get_hword(&usbp->setup[4]));
 133:lib/chibios/os/hal/src/hal_usb.c ****     if (dp == NULL) {
 134:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 135:lib/chibios/os/hal/src/hal_usb.c ****     }
 136:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -save -e9005 [11.8] Removing const is fine.*/
 137:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, (uint8_t *)dp->ud_string, dp->ud_size, NULL);
 138:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 139:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 140:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_CONFIGURATION << 8):
 141:lib/chibios/os/hal/src/hal_usb.c ****     /* Returning the last selected configuration.*/
 142:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, &usbp->configuration, 1, NULL);
 143:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 144:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_CONFIGURATION << 8):
 145:lib/chibios/os/hal/src/hal_usb.c **** #if defined(USB_SET_CONFIGURATION_OLD_BEHAVIOR)
 146:lib/chibios/os/hal/src/hal_usb.c ****     /* Handling configuration selection from the host only if it is different
 147:lib/chibios/os/hal/src/hal_usb.c ****        from the current configuration.*/
 148:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->configuration != usbp->setup[2])
 149:lib/chibios/os/hal/src/hal_usb.c **** #endif
 150:lib/chibios/os/hal/src/hal_usb.c ****     {
 151:lib/chibios/os/hal/src/hal_usb.c ****       /* If the USB device is already active then we have to perform the clear
 152:lib/chibios/os/hal/src/hal_usb.c ****          procedure on the current configuration.*/
 153:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->state == USB_ACTIVE) {
 154:lib/chibios/os/hal/src/hal_usb.c ****         /* Current configuration cleared.*/
 155:lib/chibios/os/hal/src/hal_usb.c ****         osalSysLockFromISR ();
 156:lib/chibios/os/hal/src/hal_usb.c ****         usbDisableEndpointsI(usbp);
 157:lib/chibios/os/hal/src/hal_usb.c ****         osalSysUnlockFromISR ();
 158:lib/chibios/os/hal/src/hal_usb.c ****         usbp->configuration = 0U;
 159:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_SELECTED;
 160:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 161:lib/chibios/os/hal/src/hal_usb.c ****       }
 162:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->setup[2] != 0U) {
 163:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 164:lib/chibios/os/hal/src/hal_usb.c ****         usbp->configuration = usbp->setup[2];
 165:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_ACTIVE;
 166:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_CONFIGURED);
 167:lib/chibios/os/hal/src/hal_usb.c ****       }
 168:lib/chibios/os/hal/src/hal_usb.c ****     }
 169:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 170:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 171:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_GET_STATUS << 8):
 172:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_SYNCH_FRAME << 8):
 173:lib/chibios/os/hal/src/hal_usb.c ****     /* Just sending two zero bytes, the application can change the behavior
 174:lib/chibios/os/hal/src/hal_usb.c ****        using a hook..*/
 175:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -save -e9005 [11.8] Removing const is fine.*/
 176:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, (uint8_t *)zero_status, 2, NULL);
 177:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 178:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 179:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_GET_STATUS << 8):
 180:lib/chibios/os/hal/src/hal_usb.c ****     /* Sending the EP status.*/
 181:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[4] & 0x80U) != 0U) {
 182:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 183:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 184:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 185:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)halted_status, 2, NULL);
 186:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 187:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 188:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_ACTIVE:
 189:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 190:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)active_status, 2, NULL);
 191:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 192:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 193:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 194:lib/chibios/os/hal/src/hal_usb.c ****       default:
 195:lib/chibios/os/hal/src/hal_usb.c ****         return false;
 196:lib/chibios/os/hal/src/hal_usb.c ****       }
 197:lib/chibios/os/hal/src/hal_usb.c ****     }
 198:lib/chibios/os/hal/src/hal_usb.c ****     else {
 199:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_out(usbp, usbp->setup[4] & 0x0FU)) {
 200:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 201:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 202:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)halted_status, 2, NULL);
 203:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 204:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 205:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_ACTIVE:
 206:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -save -e9005 [11.8] Removing const is fine.*/
 207:lib/chibios/os/hal/src/hal_usb.c ****         usbSetupTransfer(usbp, (uint8_t *)active_status, 2, NULL);
 208:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 209:lib/chibios/os/hal/src/hal_usb.c ****         return true;
 210:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 211:lib/chibios/os/hal/src/hal_usb.c ****       default:
 212:lib/chibios/os/hal/src/hal_usb.c ****         return false;
 213:lib/chibios/os/hal/src/hal_usb.c ****       }
 214:lib/chibios/os/hal/src/hal_usb.c ****     }
 215:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_CLEAR_FEATURE << 8):
 216:lib/chibios/os/hal/src/hal_usb.c ****     /* Only ENDPOINT_HALT is handled as feature.*/
 217:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] != USB_FEATURE_ENDPOINT_HALT) {
 218:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 219:lib/chibios/os/hal/src/hal_usb.c ****     }
 220:lib/chibios/os/hal/src/hal_usb.c ****     /* Clearing the EP status, not valid for EP0, it is ignored in that case.*/
 221:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[4] & 0x0FU) != 0U) {
 222:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 223:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 224:lib/chibios/os/hal/src/hal_usb.c ****       }
 225:lib/chibios/os/hal/src/hal_usb.c ****       else {
 226:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_out(usbp, usbp->setup[4] & 0x0FU);
 227:lib/chibios/os/hal/src/hal_usb.c ****       }
 228:lib/chibios/os/hal/src/hal_usb.c ****     }
 229:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 230:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 231:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_ENDPOINT | ((uint32_t)USB_REQ_SET_FEATURE << 8):
 232:lib/chibios/os/hal/src/hal_usb.c ****     /* Only ENDPOINT_HALT is handled as feature.*/
 233:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->setup[2] != USB_FEATURE_ENDPOINT_HALT) {
 234:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 235:lib/chibios/os/hal/src/hal_usb.c ****     }
 236:lib/chibios/os/hal/src/hal_usb.c ****     /* Stalling the EP, not valid for EP0, it is ignored in that case.*/
 237:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->setup[4] & 0x0FU) != 0U) {
 238:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 239:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 240:lib/chibios/os/hal/src/hal_usb.c ****       }
 241:lib/chibios/os/hal/src/hal_usb.c ****       else {
 242:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_out(usbp, usbp->setup[4] & 0x0FU);
 243:lib/chibios/os/hal/src/hal_usb.c ****       }
 244:lib/chibios/os/hal/src/hal_usb.c ****     }
 245:lib/chibios/os/hal/src/hal_usb.c ****     usbSetupTransfer(usbp, NULL, 0, NULL);
 246:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 247:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_DESCRIPTOR << 8):
 248:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_CLEAR_FEATURE << 8):
 249:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_SET_FEATURE << 8):
 250:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_GET_INTERFACE << 8):
 251:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_INTERFACE | ((uint32_t)USB_REQ_SET_INTERFACE << 8):
 252:lib/chibios/os/hal/src/hal_usb.c ****     /* All the above requests are not handled here, if you need them then
 253:lib/chibios/os/hal/src/hal_usb.c ****        use the hook mechanism and provide handling.*/
 254:lib/chibios/os/hal/src/hal_usb.c ****   default:
 255:lib/chibios/os/hal/src/hal_usb.c ****     return false;
 256:lib/chibios/os/hal/src/hal_usb.c ****   }
 257:lib/chibios/os/hal/src/hal_usb.c **** }
 258:lib/chibios/os/hal/src/hal_usb.c **** 
 259:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
 260:lib/chibios/os/hal/src/hal_usb.c **** /* Driver exported functions.                                                */
 261:lib/chibios/os/hal/src/hal_usb.c **** /*===========================================================================*/
 262:lib/chibios/os/hal/src/hal_usb.c **** 
 263:lib/chibios/os/hal/src/hal_usb.c **** /**
 264:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB Driver initialization.
 265:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function is implicitly invoked by @p halInit(), there is
 266:lib/chibios/os/hal/src/hal_usb.c ****  *          no need to explicitly initialize the driver.
 267:lib/chibios/os/hal/src/hal_usb.c ****  *
 268:lib/chibios/os/hal/src/hal_usb.c ****  * @init
 269:lib/chibios/os/hal/src/hal_usb.c ****  */
 270:lib/chibios/os/hal/src/hal_usb.c **** void usbInit(void) {
  77              		.loc 1 270 20 is_stmt 1 view -0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              		@ link register save eliminated.
 271:lib/chibios/os/hal/src/hal_usb.c **** 
 272:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_init();
  82              		.loc 1 272 3 view .LVU14
  83 0000 FFF7FEBF 		b	usb_lld_init
  84              	.LVL3:
  85              		.cfi_endproc
  86              	.LFE285:
  88              		.section	.text.usbObjectInit,"ax",%progbits
  89              		.align	1
  90              		.global	usbObjectInit
  91              		.syntax unified
  92              		.thumb
  93              		.thumb_func
  95              	usbObjectInit:
  96              	.LVL4:
  97              	.LFB286:
 273:lib/chibios/os/hal/src/hal_usb.c **** }
 274:lib/chibios/os/hal/src/hal_usb.c **** 
 275:lib/chibios/os/hal/src/hal_usb.c **** /**
 276:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Initializes the standard part of a @p USBDriver structure.
 277:lib/chibios/os/hal/src/hal_usb.c ****  *
 278:lib/chibios/os/hal/src/hal_usb.c ****  * @param[out] usbp     pointer to the @p USBDriver object
 279:lib/chibios/os/hal/src/hal_usb.c ****  *
 280:lib/chibios/os/hal/src/hal_usb.c ****  * @init
 281:lib/chibios/os/hal/src/hal_usb.c ****  */
 282:lib/chibios/os/hal/src/hal_usb.c **** void usbObjectInit(USBDriver *usbp) {
  98              		.loc 1 282 37 view -0
  99              		.cfi_startproc
 100              		@ args = 0, pretend = 0, frame = 0
 101              		@ frame_needed = 0, uses_anonymous_args = 0
 283:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 102              		.loc 1 283 3 view .LVU16
 284:lib/chibios/os/hal/src/hal_usb.c **** 
 285:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state        = USB_STOP;
 103              		.loc 1 285 3 view .LVU17
 282:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 104              		.loc 1 282 37 is_stmt 0 view .LVU18
 105 0000 10B5     		push	{r4, lr}
 106              		.cfi_def_cfa_offset 8
 107              		.cfi_offset 4, -8
 108              		.cfi_offset 14, -4
 109              		.loc 1 285 22 view .LVU19
 110 0002 0123     		movs	r3, #1
 282:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 111              		.loc 1 282 37 view .LVU20
 112 0004 0446     		mov	r4, r0
 286:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config       = NULL;
 287:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i < (unsigned)USB_MAX_ENDPOINTS; i++) {
 288:lib/chibios/os/hal/src/hal_usb.c ****     usbp->in_params[i]  = NULL;
 113              		.loc 1 288 25 view .LVU21
 114 0006 3822     		movs	r2, #56
 285:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config       = NULL;
 115              		.loc 1 285 22 view .LVU22
 116 0008 00F82C3B 		strb	r3, [r0], #44
 117              	.LVL5:
 286:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config       = NULL;
 118              		.loc 1 286 3 is_stmt 1 view .LVU23
 287:lib/chibios/os/hal/src/hal_usb.c ****     usbp->in_params[i]  = NULL;
 119              		.loc 1 287 3 view .LVU24
 287:lib/chibios/os/hal/src/hal_usb.c ****     usbp->in_params[i]  = NULL;
 120              		.loc 1 287 17 view .LVU25
 121              		.loc 1 288 25 is_stmt 0 view .LVU26
 122 000c 0021     		movs	r1, #0
 123 000e FFF7FEFF 		bl	memset
 124              	.LVL6:
 289:lib/chibios/os/hal/src/hal_usb.c ****     usbp->out_params[i] = NULL;
 290:lib/chibios/os/hal/src/hal_usb.c ****   }
 291:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting = 0;
 125              		.loc 1 291 3 is_stmt 1 view .LVU27
 292:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    = 0;
 126              		.loc 1 292 3 view .LVU28
 286:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i < (unsigned)USB_MAX_ENDPOINTS; i++) {
 127              		.loc 1 286 22 is_stmt 0 view .LVU29
 128 0012 0023     		movs	r3, #0
 291:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    = 0;
 129              		.loc 1 291 22 view .LVU30
 130 0014 C4E90133 		strd	r3, r3, [r4, #4]
 293:lib/chibios/os/hal/src/hal_usb.c **** }
 131              		.loc 1 293 1 view .LVU31
 132 0018 10BD     		pop	{r4, pc}
 133              		.loc 1 293 1 view .LVU32
 134              		.cfi_endproc
 135              	.LFE286:
 137              		.section	.text.usbStart,"ax",%progbits
 138              		.align	1
 139              		.global	usbStart
 140              		.syntax unified
 141              		.thumb
 142              		.thumb_func
 144              	usbStart:
 145              	.LVL7:
 146              	.LFB287:
 294:lib/chibios/os/hal/src/hal_usb.c **** 
 295:lib/chibios/os/hal/src/hal_usb.c **** /**
 296:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Configures and activates the USB peripheral.
 297:lib/chibios/os/hal/src/hal_usb.c ****  *
 298:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 299:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] config    pointer to the @p USBConfig object
 300:lib/chibios/os/hal/src/hal_usb.c ****  *
 301:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 302:lib/chibios/os/hal/src/hal_usb.c ****  */
 303:lib/chibios/os/hal/src/hal_usb.c **** void usbStart(USBDriver *usbp, const USBConfig *config) {
 147              		.loc 1 303 57 is_stmt 1 view -0
 148              		.cfi_startproc
 149              		@ args = 0, pretend = 0, frame = 0
 150              		@ frame_needed = 0, uses_anonymous_args = 0
 304:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 151              		.loc 1 304 3 view .LVU34
 305:lib/chibios/os/hal/src/hal_usb.c **** 
 306:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (config != NULL));
 152              		.loc 1 306 3 view .LVU35
 153              		.loc 1 306 3 view .LVU36
 154              		.loc 1 306 3 view .LVU37
 307:lib/chibios/os/hal/src/hal_usb.c **** 
 308:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 155              		.loc 1 308 3 view .LVU38
 156              	.LBB287:
 157              	.LBI287:
 158              		.file 2 "./lib/chibios/os/hal/osal/rt-nil/osal.h"
   1:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*
   2:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio
   3:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
   4:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     you may not use this file except in compliance with the License.
   6:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     You may obtain a copy of the License at
   7:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
   8:./lib/chibios/os/hal/osal/rt-nil/osal.h ****         http://www.apache.org/licenses/LICENSE-2.0
   9:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  10:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     Unless required by applicable law or agreed to in writing, software
  11:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     See the License for the specific language governing permissions and
  14:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     limitations under the License.
  15:./lib/chibios/os/hal/osal/rt-nil/osal.h **** */
  16:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  17:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  18:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @file    osal.h
  19:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   OSAL module header.
  20:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
  21:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @addtogroup OSAL
  22:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  23:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  24:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  25:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #ifndef OSAL_H
  26:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_H
  27:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  28:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include <stddef.h>
  29:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include <stdint.h>
  30:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include <stdbool.h>
  31:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  32:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #include "ch.h"
  33:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  34:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
  35:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module constants.                                                         */
  36:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
  37:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  38:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  39:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Common constants
  40:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  41:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  42:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if !defined(FALSE) || defined(__DOXYGEN__)
  43:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define FALSE                               0
  44:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  45:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  46:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if !defined(TRUE) || defined(__DOXYGEN__)
  47:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define TRUE                                1
  48:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  49:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  50:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_SUCCESS                        false
  51:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_FAILED                         true
  52:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  53:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  54:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
  55:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  56:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Messages
  57:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  58:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  59:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define MSG_OK                              (msg_t)0
  60:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define MSG_TIMEOUT                         (msg_t)-1
  61:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define MSG_RESET                           (msg_t)-2
  62:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  63:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  64:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  65:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
  66:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  67:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Special time constants
  68:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  69:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  70:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define TIME_IMMEDIATE                      ((sysinterval_t)0)
  71:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define TIME_INFINITE                       ((sysinterval_t)-1)
  72:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  73:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
  74:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  75:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  76:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Systick modes.
  77:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  78:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  79:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_NONE                   0
  80:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_PERIODIC               1
  81:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_FREERUNNING            2
  82:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
  83:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  84:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  85:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Systick parameters.
  86:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
  87:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  88:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  89:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Size in bits of the @p systick_t type.
  90:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  91:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_RESOLUTION                  CH_CFG_ST_RESOLUTION
  92:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  93:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  94:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Required systick frequency or resolution.
  95:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
  96:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_FREQUENCY                   CH_CFG_ST_FREQUENCY
  97:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
  98:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
  99:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Systick mode required by the underlying OS.
 100:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 101:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_ST_TIMEDELTA == 0) || defined(__DOXYGEN__)
 102:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE                        OSAL_ST_MODE_PERIODIC
 103:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #else
 104:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE                        OSAL_ST_MODE_FREERUNNING
 105:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 106:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 107:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 108:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 109:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module pre-compile time settings.                                         */
 110:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 111:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 112:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 113:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Derived constants and error checks.                                       */
 114:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 115:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 116:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if !(OSAL_ST_MODE == OSAL_ST_MODE_NONE) &&                                 \
 117:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     !(OSAL_ST_MODE == OSAL_ST_MODE_PERIODIC) &&                             \
 118:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     !(OSAL_ST_MODE == OSAL_ST_MODE_FREERUNNING)
 119:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #error "invalid OSAL_ST_MODE setting in osal.h"
 120:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 121:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 122:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (OSAL_ST_RESOLUTION != 16) && (OSAL_ST_RESOLUTION != 32) &&             \
 123:./lib/chibios/os/hal/osal/rt-nil/osal.h ****     (OSAL_ST_RESOLUTION != 64)
 124:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #error "invalid OSAL_ST_RESOLUTION, must be 16, 32 or 64"
 125:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 126:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 127:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 128:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module data structures and types.                                         */
 129:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 130:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 131:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 132:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 133:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a system status word.
 134:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 135:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t syssts_t;
 136:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 137:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 138:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 139:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 140:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a message.
 141:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 142:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef int32_t msg_t;
 143:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 144:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 145:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 146:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 147:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of system time counter.
 148:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 149:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t systime_t;
 150:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 151:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 152:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 153:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 154:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of system time interval.
 155:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 156:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t sysinterval_t;
 157:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 158:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 159:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 160:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 161:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of time conversion variable.
 162:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This type must have double width than other time types, it is
 163:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          only used internally for conversions.
 164:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 165:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint64_t time_conv_t;
 166:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 167:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 168:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 169:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 170:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of realtime counter.
 171:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 172:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t rtcnt_t;
 173:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 174:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 175:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 176:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 177:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a thread reference.
 178:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 179:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef thread_t * thread_reference_t;
 180:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 181:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 182:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 183:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 184:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event flags mask.
 185:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 186:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t eventflags_t;
 187:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 188:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 189:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_USE_EVENTS == FALSE) || defined(__DOXYGEN__)
 190:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 191:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event flags object.
 192:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The content of this structure is not part of the API and should
 193:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          not be relied upon. Implementers may define this structure in
 194:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          an entirely different way.
 195:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Retrieval and clearing of the flags are not defined in this
 196:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          API and are implementation-dependent.
 197:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 198:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef struct event_source event_source_t;
 199:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 200:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 201:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event source callback.
 202:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This type is not part of the OSAL API and is provided
 203:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          exclusively as an example and for convenience.
 204:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 205:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef void (*eventcallback_t)(event_source_t *esp);
 206:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 207:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 208:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Events source object.
 209:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The content of this structure is not part of the API and should
 210:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          not be relied upon. Implementers may define this structure in
 211:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          an entirely different way.
 212:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Retrieval and clearing of the flags are not defined in this
 213:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          API and are implementation-dependent.
 214:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 215:./lib/chibios/os/hal/osal/rt-nil/osal.h **** struct event_source {
 216:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   volatile eventflags_t flags;      /**< @brief Stored event flags.         */
 217:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   eventcallback_t       cb;         /**< @brief Event source callback.      */
 218:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   void                  *param;     /**< @brief User defined field.         */
 219:./lib/chibios/os/hal/osal/rt-nil/osal.h **** };
 220:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif /* CH_CFG_USE_EVENTS == FALSE */
 221:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 222:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 223:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a mutex.
 224:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    If the OS does not support mutexes or there is no OS then the
 225:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          mechanism can be simulated.
 226:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 227:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if CH_CFG_USE_MUTEXES || defined(__DOXYGEN__)
 228:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #elif CH_CFG_USE_SEMAPHORES
 229:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef semaphore_t mutex_t;
 230:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #else
 231:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef uint32_t mutex_t;
 232:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 233:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 234:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if 0
 235:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 236:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a thread queue.
 237:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details A thread queue is a queue of sleeping threads, queued threads
 238:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          can be dequeued one at time or all together.
 239:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    In this implementation it is implemented as a single reference
 240:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          because there are no real threads.
 241:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 242:./lib/chibios/os/hal/osal/rt-nil/osal.h **** typedef struct {
 243:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   thread_reference_t    tr;
 244:./lib/chibios/os/hal/osal/rt-nil/osal.h **** } threads_queue_t;
 245:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 246:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 247:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 248:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module macros.                                                            */
 249:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 250:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 251:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 252:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Debug related macros
 253:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 254:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 255:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 256:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Condition assertion.
 257:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details If the condition check fails then the OSAL panics with a
 258:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          message and halts.
 259:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The condition is tested only if the @p OSAL_ENABLE_ASSERTIONS
 260:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          switch is enabled.
 261:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The remark string is not currently used except for putting a
 262:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          comment in the code about the assertion.
 263:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 264:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] c         the condition to be verified to be true
 265:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] remark    a remark string
 266:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 267:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 268:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 269:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgAssert(c, remark) chDbgAssert(c, remark)
 270:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 271:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 272:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Function parameters check.
 273:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details If the condition check fails then the OSAL panics and halts.
 274:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The condition is tested only if the @p OSAL_ENABLE_CHECKS switch
 275:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          is enabled.
 276:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 277:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] c         the condition to be verified to be true
 278:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 279:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 280:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 281:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgCheck(c) chDbgCheck(c)
 282:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 283:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 284:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   I-Class state check.
 285:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 286:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 287:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgCheckClassI() chDbgCheckClassI()
 288:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 289:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 290:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   S-Class state check.
 291:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 292:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 293:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalDbgCheckClassS() chDbgCheckClassS()
 294:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 295:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 296:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 297:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    IRQ service routines wrappers
 298:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 299:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 300:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 301:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Priority level verification macro.
 302:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 303:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_IS_VALID_PRIORITY(n) CH_IRQ_IS_VALID_KERNEL_PRIORITY(n)
 304:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 305:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 306:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ prologue code.
 307:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This macro must be inserted at the start of all IRQ handlers.
 308:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 309:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_PROLOGUE() CH_IRQ_PROLOGUE()
 310:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 311:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 312:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ epilogue code.
 313:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This macro must be inserted at the end of all IRQ handlers.
 314:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 315:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_EPILOGUE() CH_IRQ_EPILOGUE()
 316:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 317:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 318:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ handler function declaration.
 319:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This macro hides the details of an ISR function declaration.
 320:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 321:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] id        a vector name as defined in @p vectors.s
 322:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 323:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_HANDLER(id) CH_IRQ_HANDLER(id)
 324:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 325:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 326:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 327:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Time conversion utilities
 328:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 329:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 330:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 331:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Seconds to time interval.
 332:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from seconds to system ticks number.
 333:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 334:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 335:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 336:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 337:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 338:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] secs      number of seconds
 339:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 340:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 341:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 342:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 343:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_S2I(secs) TIME_S2I(secs)
 344:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 345:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 346:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Milliseconds to time interval.
 347:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from milliseconds to system ticks number.
 348:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 349:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 350:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 351:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 352:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 353:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msecs     number of milliseconds
 354:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 355:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 356:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 357:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 358:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_MS2I(msecs) TIME_MS2I(msecs)
 359:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 360:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 361:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Microseconds to time interval.
 362:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from microseconds to system ticks number.
 363:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 364:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 365:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 366:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 367:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 368:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] usecs     number of microseconds
 369:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 370:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 371:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 372:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 373:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_US2I(usecs) TIME_US2I(usecs)
 374:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 375:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 376:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to seconds.
 377:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to seconds.
 378:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next second boundary.
 379:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 380:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 381:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 382:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 383:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 384:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of seconds.
 385:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 386:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 387:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 388:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_I2S(interval) TIME_I2S(interval)
 389:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 390:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 391:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to milliseconds.
 392:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to milliseconds.
 393:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next millisecond boundary.
 394:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 395:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 396:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 397:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 398:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 399:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of milliseconds.
 400:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 401:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 402:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 403:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_I2MS(interval) TIME_I2MS(interval)
 404:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 405:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 406:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to microseconds.
 407:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to microseconds.
 408:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next microsecond boundary.
 409:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 410:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 411:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          converted.
 412:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 413:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 414:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of microseconds.
 415:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 416:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 417:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 418:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_I2US(interval) TIME_I2US(interval)
 419:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 420:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 421:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 422:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Time conversion utilities for the realtime counter
 423:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 424:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 425:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 426:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Seconds to realtime counter.
 427:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from seconds to realtime counter cycles.
 428:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1.
 429:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 430:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 431:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] sec       number of seconds
 432:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 433:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 434:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 435:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 436:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_S2RTC(freq, sec) S2RTC(freq, sec)
 437:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 438:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 439:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Milliseconds to realtime counter.
 440:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from milliseconds to realtime counter cycles.
 441:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next millisecond boundary.
 442:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1000.
 443:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 444:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 445:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msec      number of milliseconds
 446:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 447:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 448:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 449:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 450:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_MS2RTC(freq, msec) MS2RTC(freq, msec)
 451:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 452:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 453:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Microseconds to realtime counter.
 454:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Converts from microseconds to realtime counter cycles.
 455:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next microsecond boundary.
 456:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1000000.
 457:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 458:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 459:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] usec      number of microseconds
 460:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 461:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 462:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 463:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 464:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define OSAL_US2RTC(freq, usec) US2RTC(freq, usec)
 465:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 466:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 467:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 468:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @name    Sleep macros using absolute time
 469:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @{
 470:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 471:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 472:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of seconds.
 473:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 474:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 475:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 476:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 477:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] secs      time in seconds, must be different from zero
 478:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 479:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 480:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 481:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepSeconds(secs) osalThreadSleep(OSAL_S2I(secs))
 482:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 483:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 484:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of
 485:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          milliseconds.
 486:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 487:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 488:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 489:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 490:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msecs     time in milliseconds, must be different from zero
 491:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 492:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 493:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 494:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepMilliseconds(msecs) osalThreadSleep(OSAL_MS2I(msecs))
 495:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 496:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 497:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of
 498:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          microseconds.
 499:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 500:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 501:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 502:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 503:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] usecs     time in microseconds, must be different from zero
 504:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 505:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 506:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 507:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepMicroseconds(usecs) osalThreadSleep(OSAL_US2I(usecs))
 508:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /** @} */
 509:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 510:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 511:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* External declarations.                                                    */
 512:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 513:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 514:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #ifdef __cplusplus
 515:./lib/chibios/os/hal/osal/rt-nil/osal.h **** extern "C" {
 516:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 517:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 518:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #ifdef __cplusplus
 519:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 520:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 521:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 522:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 523:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /* Module inline functions.                                                  */
 524:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 525:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 526:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 527:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   OSAL module initialization.
 528:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 529:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 530:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 531:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalInit(void) {
 532:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 533:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 534:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 535:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 536:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   System halt with error message.
 537:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 538:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] reason    the halt message pointer
 539:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 540:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 541:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 542:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysHalt(const char *reason) {
 543:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 544:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysHalt(reason);
 545:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 546:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 547:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 548:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Disables interrupts globally.
 549:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 550:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 551:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 552:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysDisable(void) {
 553:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 554:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysDisable();
 555:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 556:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 557:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 558:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Enables interrupts globally.
 559:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 560:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 561:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 562:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysEnable(void) {
 563:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 564:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysEnable();
 565:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 566:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 567:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 568:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Enters a critical zone from thread context.
 569:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 570:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 571:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 572:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysLock(void) {
 159              		.loc 2 573 20 view .LVU39
 574:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysLock();
 160              		.loc 2 575 3 view .LVU40
 161              	.LBB288:
 162              	.LBI288:
 163              		.file 3 "./lib/chibios/os/rt/include/chsys.h"
   1:./lib/chibios/os/rt/include/chsys.h **** /*
   2:./lib/chibios/os/rt/include/chsys.h ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio.
   3:./lib/chibios/os/rt/include/chsys.h **** 
   4:./lib/chibios/os/rt/include/chsys.h ****     This file is part of ChibiOS.
   5:./lib/chibios/os/rt/include/chsys.h **** 
   6:./lib/chibios/os/rt/include/chsys.h ****     ChibiOS is free software; you can redistribute it and/or modify
   7:./lib/chibios/os/rt/include/chsys.h ****     it under the terms of the GNU General Public License as published by
   8:./lib/chibios/os/rt/include/chsys.h ****     the Free Software Foundation; either version 3 of the License, or
   9:./lib/chibios/os/rt/include/chsys.h ****     (at your option) any later version.
  10:./lib/chibios/os/rt/include/chsys.h **** 
  11:./lib/chibios/os/rt/include/chsys.h ****     ChibiOS is distributed in the hope that it will be useful,
  12:./lib/chibios/os/rt/include/chsys.h ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:./lib/chibios/os/rt/include/chsys.h ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:./lib/chibios/os/rt/include/chsys.h ****     GNU General Public License for more details.
  15:./lib/chibios/os/rt/include/chsys.h **** 
  16:./lib/chibios/os/rt/include/chsys.h ****     You should have received a copy of the GNU General Public License
  17:./lib/chibios/os/rt/include/chsys.h ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  18:./lib/chibios/os/rt/include/chsys.h **** */
  19:./lib/chibios/os/rt/include/chsys.h **** 
  20:./lib/chibios/os/rt/include/chsys.h **** /**
  21:./lib/chibios/os/rt/include/chsys.h ****  * @file    rt/include/chsys.h
  22:./lib/chibios/os/rt/include/chsys.h ****  * @brief   System related macros and structures.
  23:./lib/chibios/os/rt/include/chsys.h ****  *
  24:./lib/chibios/os/rt/include/chsys.h ****  * @addtogroup system
  25:./lib/chibios/os/rt/include/chsys.h ****  * @{
  26:./lib/chibios/os/rt/include/chsys.h ****  */
  27:./lib/chibios/os/rt/include/chsys.h **** 
  28:./lib/chibios/os/rt/include/chsys.h **** #ifndef CHSYS_H
  29:./lib/chibios/os/rt/include/chsys.h **** #define CHSYS_H
  30:./lib/chibios/os/rt/include/chsys.h **** 
  31:./lib/chibios/os/rt/include/chsys.h **** /*lint -sem(chSysHalt, r_no)*/
  32:./lib/chibios/os/rt/include/chsys.h **** 
  33:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  34:./lib/chibios/os/rt/include/chsys.h **** /* Module constants.                                                         */
  35:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  36:./lib/chibios/os/rt/include/chsys.h **** 
  37:./lib/chibios/os/rt/include/chsys.h **** /**
  38:./lib/chibios/os/rt/include/chsys.h ****  * @name    Masks of executable integrity checks.
  39:./lib/chibios/os/rt/include/chsys.h ****  * @{
  40:./lib/chibios/os/rt/include/chsys.h ****  */
  41:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_RLIST                  1U
  42:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_VTLIST                 2U
  43:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_REGISTRY               4U
  44:./lib/chibios/os/rt/include/chsys.h **** #define CH_INTEGRITY_PORT                   8U
  45:./lib/chibios/os/rt/include/chsys.h **** /** @} */
  46:./lib/chibios/os/rt/include/chsys.h **** 
  47:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  48:./lib/chibios/os/rt/include/chsys.h **** /* Module pre-compile time settings.                                         */
  49:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  50:./lib/chibios/os/rt/include/chsys.h **** 
  51:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  52:./lib/chibios/os/rt/include/chsys.h **** /* Derived constants and error checks.                                       */
  53:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  54:./lib/chibios/os/rt/include/chsys.h **** 
  55:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  56:./lib/chibios/os/rt/include/chsys.h **** /* Module data structures and types.                                         */
  57:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  58:./lib/chibios/os/rt/include/chsys.h **** 
  59:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  60:./lib/chibios/os/rt/include/chsys.h **** /* Module macros.                                                            */
  61:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
  62:./lib/chibios/os/rt/include/chsys.h **** 
  63:./lib/chibios/os/rt/include/chsys.h **** /**
  64:./lib/chibios/os/rt/include/chsys.h ****  * @name    ISRs abstraction macros
  65:./lib/chibios/os/rt/include/chsys.h ****  * @{
  66:./lib/chibios/os/rt/include/chsys.h ****  */
  67:./lib/chibios/os/rt/include/chsys.h **** /**
  68:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Priority level validation macro.
  69:./lib/chibios/os/rt/include/chsys.h ****  * @details This macro determines if the passed value is a valid priority
  70:./lib/chibios/os/rt/include/chsys.h ****  *          level for the underlying architecture.
  71:./lib/chibios/os/rt/include/chsys.h ****  *
  72:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] prio      the priority level
  73:./lib/chibios/os/rt/include/chsys.h ****  * @return              Priority range result.
  74:./lib/chibios/os/rt/include/chsys.h ****  * @retval false        if the priority is invalid or if the architecture
  75:./lib/chibios/os/rt/include/chsys.h ****  *                      does not support priorities.
  76:./lib/chibios/os/rt/include/chsys.h ****  * @retval true         if the priority is valid.
  77:./lib/chibios/os/rt/include/chsys.h ****  */
  78:./lib/chibios/os/rt/include/chsys.h **** #if defined(PORT_IRQ_IS_VALID_PRIORITY) || defined(__DOXYGEN__)
  79:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_PRIORITY(prio)                                      \
  80:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_IS_VALID_PRIORITY(prio)
  81:./lib/chibios/os/rt/include/chsys.h **** #else
  82:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_PRIORITY(prio) false
  83:./lib/chibios/os/rt/include/chsys.h **** #endif
  84:./lib/chibios/os/rt/include/chsys.h **** 
  85:./lib/chibios/os/rt/include/chsys.h **** /**
  86:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Priority level validation macro.
  87:./lib/chibios/os/rt/include/chsys.h ****  * @details This macro determines if the passed value is a valid priority
  88:./lib/chibios/os/rt/include/chsys.h ****  *          level that cannot preempt the kernel critical zone.
  89:./lib/chibios/os/rt/include/chsys.h ****  *
  90:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] prio      the priority level
  91:./lib/chibios/os/rt/include/chsys.h ****  * @return              Priority range result.
  92:./lib/chibios/os/rt/include/chsys.h ****  * @retval false        if the priority is invalid or if the architecture
  93:./lib/chibios/os/rt/include/chsys.h ****  *                      does not support priorities.
  94:./lib/chibios/os/rt/include/chsys.h ****  * @retval true         if the priority is valid.
  95:./lib/chibios/os/rt/include/chsys.h ****  */
  96:./lib/chibios/os/rt/include/chsys.h **** #if defined(PORT_IRQ_IS_VALID_KERNEL_PRIORITY) || defined(__DOXYGEN__)
  97:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_KERNEL_PRIORITY(prio)                               \
  98:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_IS_VALID_KERNEL_PRIORITY(prio)
  99:./lib/chibios/os/rt/include/chsys.h **** #else
 100:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_IS_VALID_KERNEL_PRIORITY(prio) false
 101:./lib/chibios/os/rt/include/chsys.h **** #endif
 102:./lib/chibios/os/rt/include/chsys.h **** 
 103:./lib/chibios/os/rt/include/chsys.h **** /**
 104:./lib/chibios/os/rt/include/chsys.h ****  * @brief   IRQ handler enter code.
 105:./lib/chibios/os/rt/include/chsys.h ****  * @note    Usually IRQ handlers functions are also declared naked.
 106:./lib/chibios/os/rt/include/chsys.h ****  * @note    On some architectures this macro can be empty.
 107:./lib/chibios/os/rt/include/chsys.h ****  *
 108:./lib/chibios/os/rt/include/chsys.h ****  * @special
 109:./lib/chibios/os/rt/include/chsys.h ****  */
 110:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_PROLOGUE()                                                   \
 111:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_PROLOGUE();                                                      \
 112:./lib/chibios/os/rt/include/chsys.h ****   CH_CFG_IRQ_PROLOGUE_HOOK();                                               \
 113:./lib/chibios/os/rt/include/chsys.h ****   _stats_increase_irq();                                                    \
 114:./lib/chibios/os/rt/include/chsys.h ****   _trace_isr_enter(__func__);                                               \
 115:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_enter_isr()
 116:./lib/chibios/os/rt/include/chsys.h **** 
 117:./lib/chibios/os/rt/include/chsys.h **** /**
 118:./lib/chibios/os/rt/include/chsys.h ****  * @brief   IRQ handler exit code.
 119:./lib/chibios/os/rt/include/chsys.h ****  * @note    Usually IRQ handlers function are also declared naked.
 120:./lib/chibios/os/rt/include/chsys.h ****  * @note    This macro usually performs the final reschedule by using
 121:./lib/chibios/os/rt/include/chsys.h ****  *          @p chSchIsPreemptionRequired() and @p chSchDoReschedule().
 122:./lib/chibios/os/rt/include/chsys.h ****  *
 123:./lib/chibios/os/rt/include/chsys.h ****  * @special
 124:./lib/chibios/os/rt/include/chsys.h ****  */
 125:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_EPILOGUE()                                                   \
 126:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_leave_isr();                                                   \
 127:./lib/chibios/os/rt/include/chsys.h ****   _trace_isr_leave(__func__);                                               \
 128:./lib/chibios/os/rt/include/chsys.h ****   CH_CFG_IRQ_EPILOGUE_HOOK();                                               \
 129:./lib/chibios/os/rt/include/chsys.h ****   PORT_IRQ_EPILOGUE()
 130:./lib/chibios/os/rt/include/chsys.h **** 
 131:./lib/chibios/os/rt/include/chsys.h **** /**
 132:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Standard normal IRQ handler declaration.
 133:./lib/chibios/os/rt/include/chsys.h ****  * @note    @p id can be a function name or a vector number depending on the
 134:./lib/chibios/os/rt/include/chsys.h ****  *          port implementation.
 135:./lib/chibios/os/rt/include/chsys.h ****  *
 136:./lib/chibios/os/rt/include/chsys.h ****  * @special
 137:./lib/chibios/os/rt/include/chsys.h ****  */
 138:./lib/chibios/os/rt/include/chsys.h **** #define CH_IRQ_HANDLER(id) PORT_IRQ_HANDLER(id)
 139:./lib/chibios/os/rt/include/chsys.h **** /** @} */
 140:./lib/chibios/os/rt/include/chsys.h **** 
 141:./lib/chibios/os/rt/include/chsys.h **** /**
 142:./lib/chibios/os/rt/include/chsys.h ****  * @name    Fast ISRs abstraction macros
 143:./lib/chibios/os/rt/include/chsys.h ****  * @{
 144:./lib/chibios/os/rt/include/chsys.h ****  */
 145:./lib/chibios/os/rt/include/chsys.h **** /**
 146:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Standard fast IRQ handler declaration.
 147:./lib/chibios/os/rt/include/chsys.h ****  * @note    @p id can be a function name or a vector number depending on the
 148:./lib/chibios/os/rt/include/chsys.h ****  *          port implementation.
 149:./lib/chibios/os/rt/include/chsys.h ****  * @note    Not all architectures support fast interrupts.
 150:./lib/chibios/os/rt/include/chsys.h ****  *
 151:./lib/chibios/os/rt/include/chsys.h ****  * @special
 152:./lib/chibios/os/rt/include/chsys.h ****  */
 153:./lib/chibios/os/rt/include/chsys.h **** #define CH_FAST_IRQ_HANDLER(id) PORT_FAST_IRQ_HANDLER(id)
 154:./lib/chibios/os/rt/include/chsys.h **** /** @} */
 155:./lib/chibios/os/rt/include/chsys.h **** 
 156:./lib/chibios/os/rt/include/chsys.h **** /**
 157:./lib/chibios/os/rt/include/chsys.h ****  * @name    Time conversion utilities for the realtime counter
 158:./lib/chibios/os/rt/include/chsys.h ****  * @{
 159:./lib/chibios/os/rt/include/chsys.h ****  */
 160:./lib/chibios/os/rt/include/chsys.h **** /**
 161:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Seconds to realtime counter.
 162:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from seconds to realtime counter cycles.
 163:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1.
 164:./lib/chibios/os/rt/include/chsys.h ****  *
 165:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 166:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] sec       number of seconds
 167:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of cycles.
 168:./lib/chibios/os/rt/include/chsys.h ****  *
 169:./lib/chibios/os/rt/include/chsys.h ****  * @api
 170:./lib/chibios/os/rt/include/chsys.h ****  */
 171:./lib/chibios/os/rt/include/chsys.h **** #define S2RTC(freq, sec) ((freq) * (sec))
 172:./lib/chibios/os/rt/include/chsys.h **** 
 173:./lib/chibios/os/rt/include/chsys.h **** /**
 174:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Milliseconds to realtime counter.
 175:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from milliseconds to realtime counter cycles.
 176:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded upward to the next millisecond boundary.
 177:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000.
 178:./lib/chibios/os/rt/include/chsys.h ****  *
 179:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 180:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] msec      number of milliseconds
 181:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of cycles.
 182:./lib/chibios/os/rt/include/chsys.h ****  *
 183:./lib/chibios/os/rt/include/chsys.h ****  * @api
 184:./lib/chibios/os/rt/include/chsys.h ****  */
 185:./lib/chibios/os/rt/include/chsys.h **** #define MS2RTC(freq, msec) (rtcnt_t)((((freq) + 999UL) / 1000UL) * (msec))
 186:./lib/chibios/os/rt/include/chsys.h **** 
 187:./lib/chibios/os/rt/include/chsys.h **** /**
 188:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Microseconds to realtime counter.
 189:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from microseconds to realtime counter cycles.
 190:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded upward to the next microsecond boundary.
 191:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000000.
 192:./lib/chibios/os/rt/include/chsys.h ****  *
 193:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 194:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] usec      number of microseconds
 195:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of cycles.
 196:./lib/chibios/os/rt/include/chsys.h ****  *
 197:./lib/chibios/os/rt/include/chsys.h ****  * @api
 198:./lib/chibios/os/rt/include/chsys.h ****  */
 199:./lib/chibios/os/rt/include/chsys.h **** #define US2RTC(freq, usec) (rtcnt_t)((((freq) + 999999UL) / 1000000UL) * (usec))
 200:./lib/chibios/os/rt/include/chsys.h **** 
 201:./lib/chibios/os/rt/include/chsys.h **** /**
 202:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Realtime counter cycles to seconds.
 203:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from realtime counter cycles number to seconds.
 204:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded up to the next second boundary.
 205:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1.
 206:./lib/chibios/os/rt/include/chsys.h ****  *
 207:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 208:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] n         number of cycles
 209:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of seconds.
 210:./lib/chibios/os/rt/include/chsys.h ****  *
 211:./lib/chibios/os/rt/include/chsys.h ****  * @api
 212:./lib/chibios/os/rt/include/chsys.h ****  */
 213:./lib/chibios/os/rt/include/chsys.h **** #define RTC2S(freq, n) ((((n) - 1UL) / (freq)) + 1UL)
 214:./lib/chibios/os/rt/include/chsys.h **** 
 215:./lib/chibios/os/rt/include/chsys.h **** /**
 216:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Realtime counter cycles to milliseconds.
 217:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from realtime counter cycles number to milliseconds.
 218:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded up to the next millisecond boundary.
 219:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000.
 220:./lib/chibios/os/rt/include/chsys.h ****  *
 221:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 222:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] n         number of cycles
 223:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of milliseconds.
 224:./lib/chibios/os/rt/include/chsys.h ****  *
 225:./lib/chibios/os/rt/include/chsys.h ****  * @api
 226:./lib/chibios/os/rt/include/chsys.h ****  */
 227:./lib/chibios/os/rt/include/chsys.h **** #define RTC2MS(freq, n) ((((n) - 1UL) / ((freq) / 1000UL)) + 1UL)
 228:./lib/chibios/os/rt/include/chsys.h **** 
 229:./lib/chibios/os/rt/include/chsys.h **** /**
 230:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Realtime counter cycles to microseconds.
 231:./lib/chibios/os/rt/include/chsys.h ****  * @details Converts from realtime counter cycles number to microseconds.
 232:./lib/chibios/os/rt/include/chsys.h ****  * @note    The result is rounded up to the next microsecond boundary.
 233:./lib/chibios/os/rt/include/chsys.h ****  * @note    The macro assumes that @p freq >= @p 1000000.
 234:./lib/chibios/os/rt/include/chsys.h ****  *
 235:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 236:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] n         number of cycles
 237:./lib/chibios/os/rt/include/chsys.h ****  * @return              The number of microseconds.
 238:./lib/chibios/os/rt/include/chsys.h ****  *
 239:./lib/chibios/os/rt/include/chsys.h ****  * @api
 240:./lib/chibios/os/rt/include/chsys.h ****  */
 241:./lib/chibios/os/rt/include/chsys.h **** #define RTC2US(freq, n) ((((n) - 1UL) / ((freq) / 1000000UL)) + 1UL)
 242:./lib/chibios/os/rt/include/chsys.h **** /** @} */
 243:./lib/chibios/os/rt/include/chsys.h **** 
 244:./lib/chibios/os/rt/include/chsys.h **** /**
 245:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Returns the current value of the system real time counter.
 246:./lib/chibios/os/rt/include/chsys.h ****  * @note    This function is only available if the port layer supports the
 247:./lib/chibios/os/rt/include/chsys.h ****  *          option @p PORT_SUPPORTS_RT.
 248:./lib/chibios/os/rt/include/chsys.h ****  *
 249:./lib/chibios/os/rt/include/chsys.h ****  * @return              The value of the system realtime counter of
 250:./lib/chibios/os/rt/include/chsys.h ****  *                      type rtcnt_t.
 251:./lib/chibios/os/rt/include/chsys.h ****  *
 252:./lib/chibios/os/rt/include/chsys.h ****  * @xclass
 253:./lib/chibios/os/rt/include/chsys.h ****  */
 254:./lib/chibios/os/rt/include/chsys.h **** #if (PORT_SUPPORTS_RT == TRUE) || defined(__DOXYGEN__)
 255:./lib/chibios/os/rt/include/chsys.h **** #define chSysGetRealtimeCounterX() (rtcnt_t)port_rt_get_counter_value()
 256:./lib/chibios/os/rt/include/chsys.h **** #endif
 257:./lib/chibios/os/rt/include/chsys.h **** 
 258:./lib/chibios/os/rt/include/chsys.h **** /**
 259:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Performs a context switch.
 260:./lib/chibios/os/rt/include/chsys.h ****  * @note    Not a user function, it is meant to be invoked by the scheduler
 261:./lib/chibios/os/rt/include/chsys.h ****  *          itself or from within the port layer.
 262:./lib/chibios/os/rt/include/chsys.h ****  *
 263:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] ntp       the thread to be switched in
 264:./lib/chibios/os/rt/include/chsys.h ****  * @param[in] otp       the thread to be switched out
 265:./lib/chibios/os/rt/include/chsys.h ****  *
 266:./lib/chibios/os/rt/include/chsys.h ****  * @special
 267:./lib/chibios/os/rt/include/chsys.h ****  */
 268:./lib/chibios/os/rt/include/chsys.h **** #define chSysSwitch(ntp, otp) {                                             \
 269:./lib/chibios/os/rt/include/chsys.h ****                                                                             \
 270:./lib/chibios/os/rt/include/chsys.h ****   _trace_switch(ntp, otp);                                                  \
 271:./lib/chibios/os/rt/include/chsys.h ****   _stats_ctxswc(ntp, otp);                                                  \
 272:./lib/chibios/os/rt/include/chsys.h ****   CH_CFG_CONTEXT_SWITCH_HOOK(ntp, otp);                                     \
 273:./lib/chibios/os/rt/include/chsys.h ****   port_switch(ntp, otp);                                                    \
 274:./lib/chibios/os/rt/include/chsys.h **** }
 275:./lib/chibios/os/rt/include/chsys.h **** 
 276:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 277:./lib/chibios/os/rt/include/chsys.h **** /* External declarations.                                                    */
 278:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 279:./lib/chibios/os/rt/include/chsys.h **** 
 280:./lib/chibios/os/rt/include/chsys.h **** #if !defined(__DOXYGEN__)
 281:./lib/chibios/os/rt/include/chsys.h **** extern stkalign_t ch_idle_thread_wa[];
 282:./lib/chibios/os/rt/include/chsys.h **** #endif
 283:./lib/chibios/os/rt/include/chsys.h **** 
 284:./lib/chibios/os/rt/include/chsys.h **** #ifdef __cplusplus
 285:./lib/chibios/os/rt/include/chsys.h **** extern "C" {
 286:./lib/chibios/os/rt/include/chsys.h **** #endif
 287:./lib/chibios/os/rt/include/chsys.h ****   void chSysInit(void);
 288:./lib/chibios/os/rt/include/chsys.h ****   bool chSysIntegrityCheckI(unsigned testmask);
 289:./lib/chibios/os/rt/include/chsys.h ****   void chSysTimerHandlerI(void);
 290:./lib/chibios/os/rt/include/chsys.h ****   syssts_t chSysGetStatusAndLockX(void);
 291:./lib/chibios/os/rt/include/chsys.h ****   void chSysRestoreStatusX(syssts_t sts);
 292:./lib/chibios/os/rt/include/chsys.h **** #if PORT_SUPPORTS_RT == TRUE
 293:./lib/chibios/os/rt/include/chsys.h ****   bool chSysIsCounterWithinX(rtcnt_t cnt, rtcnt_t start, rtcnt_t end);
 294:./lib/chibios/os/rt/include/chsys.h ****   void chSysPolledDelayX(rtcnt_t cycles);
 295:./lib/chibios/os/rt/include/chsys.h **** #endif
 296:./lib/chibios/os/rt/include/chsys.h **** #ifdef __cplusplus
 297:./lib/chibios/os/rt/include/chsys.h **** }
 298:./lib/chibios/os/rt/include/chsys.h **** #endif
 299:./lib/chibios/os/rt/include/chsys.h **** 
 300:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 301:./lib/chibios/os/rt/include/chsys.h **** /* Module inline functions.                                                  */
 302:./lib/chibios/os/rt/include/chsys.h **** /*===========================================================================*/
 303:./lib/chibios/os/rt/include/chsys.h **** 
 304:./lib/chibios/os/rt/include/chsys.h **** /**
 305:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Raises the system interrupt priority mask to the maximum level.
 306:./lib/chibios/os/rt/include/chsys.h ****  * @details All the maskable interrupt sources are disabled regardless their
 307:./lib/chibios/os/rt/include/chsys.h ****  *          hardware priority.
 308:./lib/chibios/os/rt/include/chsys.h ****  * @note    Do not invoke this API from within a kernel lock.
 309:./lib/chibios/os/rt/include/chsys.h ****  *
 310:./lib/chibios/os/rt/include/chsys.h ****  * @special
 311:./lib/chibios/os/rt/include/chsys.h ****  */
 312:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysDisable(void) {
 313:./lib/chibios/os/rt/include/chsys.h **** 
 314:./lib/chibios/os/rt/include/chsys.h ****   port_disable();
 315:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_disable();
 316:./lib/chibios/os/rt/include/chsys.h **** }
 317:./lib/chibios/os/rt/include/chsys.h **** 
 318:./lib/chibios/os/rt/include/chsys.h **** /**
 319:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Raises the system interrupt priority mask to system level.
 320:./lib/chibios/os/rt/include/chsys.h ****  * @details The interrupt sources that should not be able to preempt the kernel
 321:./lib/chibios/os/rt/include/chsys.h ****  *          are disabled, interrupt sources with higher priority are still
 322:./lib/chibios/os/rt/include/chsys.h ****  *          enabled.
 323:./lib/chibios/os/rt/include/chsys.h ****  * @note    Do not invoke this API from within a kernel lock.
 324:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API is no replacement for @p chSysLock(), the @p chSysLock()
 325:./lib/chibios/os/rt/include/chsys.h ****  *          could do more than just disable the interrupts.
 326:./lib/chibios/os/rt/include/chsys.h ****  *
 327:./lib/chibios/os/rt/include/chsys.h ****  * @special
 328:./lib/chibios/os/rt/include/chsys.h ****  */
 329:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysSuspend(void) {
 330:./lib/chibios/os/rt/include/chsys.h **** 
 331:./lib/chibios/os/rt/include/chsys.h ****   port_suspend();
 332:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_suspend();
 333:./lib/chibios/os/rt/include/chsys.h **** }
 334:./lib/chibios/os/rt/include/chsys.h **** 
 335:./lib/chibios/os/rt/include/chsys.h **** /**
 336:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Lowers the system interrupt priority mask to user level.
 337:./lib/chibios/os/rt/include/chsys.h ****  * @details All the interrupt sources are enabled.
 338:./lib/chibios/os/rt/include/chsys.h ****  * @note    Do not invoke this API from within a kernel lock.
 339:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API is no replacement for @p chSysUnlock(), the
 340:./lib/chibios/os/rt/include/chsys.h ****  *          @p chSysUnlock() could do more than just enable the interrupts.
 341:./lib/chibios/os/rt/include/chsys.h ****  *
 342:./lib/chibios/os/rt/include/chsys.h ****  * @special
 343:./lib/chibios/os/rt/include/chsys.h ****  */
 344:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysEnable(void) {
 345:./lib/chibios/os/rt/include/chsys.h **** 
 346:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_enable();
 347:./lib/chibios/os/rt/include/chsys.h ****   port_enable();
 348:./lib/chibios/os/rt/include/chsys.h **** }
 349:./lib/chibios/os/rt/include/chsys.h **** 
 350:./lib/chibios/os/rt/include/chsys.h **** /**
 351:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Enters the kernel lock state.
 352:./lib/chibios/os/rt/include/chsys.h ****  *
 353:./lib/chibios/os/rt/include/chsys.h ****  * @special
 354:./lib/chibios/os/rt/include/chsys.h ****  */
 355:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysLock(void) {
 164              		.loc 3 355 20 view .LVU41
 356:./lib/chibios/os/rt/include/chsys.h **** 
 357:./lib/chibios/os/rt/include/chsys.h ****   port_lock();
 165              		.loc 3 357 3 view .LVU42
 166              	.LBB289:
 167              	.LBI289:
 168              		.file 4 "./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h"
   1:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*
   2:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio.
   3:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
   4:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     This file is part of ChibiOS.
   5:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
   6:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     ChibiOS is free software; you can redistribute it and/or modify
   7:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     it under the terms of the GNU General Public License as published by
   8:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     the Free Software Foundation; either version 3 of the License, or
   9:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     (at your option) any later version.
  10:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  11:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     ChibiOS is distributed in the hope that it will be useful,
  12:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     GNU General Public License for more details.
  15:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  16:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     You should have received a copy of the GNU General Public License
  17:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  18:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** */
  19:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  20:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  21:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @file    chcore_v7m.h
  22:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   ARMv7-M architecture port macros and structures.
  23:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
  24:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @addtogroup ARMCMx_V7M_CORE
  25:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @{
  26:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  27:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  28:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifndef CHCORE_V7M_H
  29:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CHCORE_V7M_H
  30:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  31:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  32:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module constants.                                                         */
  33:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  34:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  35:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  36:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @name    Port Capabilities and Constants
  37:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @{
  38:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  39:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  40:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   This port supports a realtime counter.
  41:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  42:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_SUPPORTS_RT                TRUE
  43:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  44:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  45:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Natural alignment constant.
  46:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    It is the minimum alignment for pointer-size variables.
  47:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  48:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_NATURAL_ALIGN              sizeof (void *)
  49:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  50:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  51:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Stack alignment constant.
  52:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    It is the alignment required for the stack pointer.
  53:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  54:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_STACK_ALIGN                sizeof (stkalign_t)
  55:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  56:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  57:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Working Areas alignment constant.
  58:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    It is the alignment to be enforced for thread working areas.
  59:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  60:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WORKING_AREA_ALIGN         ((PORT_ENABLE_GUARD_PAGES == TRUE) ?\
  61:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                                          32U : PORT_STACK_ALIGN)
  62:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /** @} */
  63:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  64:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  65:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Disabled value for BASEPRI register.
  66:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  67:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_BASEPRI_DISABLED         0U
  68:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  69:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  70:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module pre-compile time settings.                                         */
  71:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
  72:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  73:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  74:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Implements a syscall interface on SVC.
  75:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  76:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_USE_SYSCALL) || defined(__DOXYGEN__)
  77:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_USE_SYSCALL                FALSE
  78:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
  79:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  80:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  81:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Number of MPU regions to be saved/restored during context switch.
  82:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The first region is always region zero.
  83:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The use of this option has an overhead of 8 bytes for each
  84:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          region for each thread.
  85:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Allowed values are 0..4, zero means none.
  86:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  87:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_SWITCHED_REGIONS_NUMBER) || defined(__DOXYGEN__)
  88:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_SWITCHED_REGIONS_NUMBER    0
  89:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
  90:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
  91:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
  92:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Enables stack overflow guard pages using MPU.
  93:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    This option can only be enabled if also option
  94:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CH_DBG_ENABLE_STACK_CHECK is enabled.
  95:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The use of this option has an overhead of 32 bytes for each
  96:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          thread.
  97:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
  98:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_ENABLE_GUARD_PAGES) || defined(__DOXYGEN__)
  99:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ENABLE_GUARD_PAGES         FALSE
 100:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 101:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 102:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 103:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   MPU region to be used to stack guards.
 104:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Make sure this region is not included in the
 105:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p PORT_SWITCHED_REGIONS_NUMBER regions range.
 106:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 107:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_USE_GUARD_MPU_REGION) || defined(__DOXYGEN__)
 108:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_USE_GUARD_MPU_REGION       MPU_REGION_7
 109:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 110:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 111:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 112:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Stack size for the system idle thread.
 113:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This size depends on the idle thread implementation, usually
 114:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          the idle thread should take no more space than those reserved
 115:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          by @p PORT_INT_REQUIRED_STACK.
 116:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    In this port it is set to 16 because the idle thread does have
 117:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          a stack frame when compiling without optimizations. You may
 118:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          reduce this value to zero when compiling with optimizations.
 119:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 120:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_IDLE_THREAD_STACK_SIZE) || defined(__DOXYGEN__)
 121:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IDLE_THREAD_STACK_SIZE     16
 122:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 123:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 124:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 125:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Per-thread stack overhead for interrupts servicing.
 126:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This constant is used in the calculation of the correct working
 127:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          area size.
 128:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    In this port this value is conservatively set to 64 because the
 129:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          function @p chSchDoReschedule() can have a stack frame, especially
 130:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          with compiler optimizations disabled. The value can be reduced
 131:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          when compiler optimizations are enabled.
 132:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 133:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(PORT_INT_REQUIRED_STACK) || defined(__DOXYGEN__)
 134:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_INT_REQUIRED_STACK         64
 135:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 136:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 137:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 138:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Enables the use of the WFI instruction in the idle thread loop.
 139:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 140:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_ENABLE_WFI_IDLE)
 141:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_ENABLE_WFI_IDLE          FALSE
 142:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 143:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 144:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 145:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   FPU support in context switch.
 146:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details Activating this option activates the FPU support in the kernel.
 147:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 148:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_USE_FPU)
 149:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_USE_FPU                  CORTEX_HAS_FPU
 150:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (CORTEX_USE_FPU == TRUE) && (CORTEX_HAS_FPU == FALSE)
 151:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* This setting requires an FPU presence check in case it is externally
 152:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****    redefined.*/
 153:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #error "the selected core does not have an FPU"
 154:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 155:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 156:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 157:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Simplified priority handling flag.
 158:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details Activating this option makes the Kernel work in compact mode.
 159:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          In compact mode interrupts are disabled globally instead of
 160:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          raising the priority mask to some intermediate level.
 161:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 162:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_SIMPLIFIED_PRIORITY)
 163:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_SIMPLIFIED_PRIORITY      FALSE
 164:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 165:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 166:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 167:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   SVCALL handler priority.
 168:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The default SVCALL handler priority is defaulted to
 169:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CORTEX_MAXIMUM_PRIORITY+1, this reserves the
 170:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CORTEX_MAXIMUM_PRIORITY priority level as fast interrupts
 171:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          priority level.
 172:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 173:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_PRIORITY_SVCALL)
 174:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_PRIORITY_SVCALL          (CORTEX_MAXIMUM_PRIORITY + 1U)
 175:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif !PORT_IRQ_IS_VALID_PRIORITY(CORTEX_PRIORITY_SVCALL)
 176:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* If it is externally redefined then better perform a validity check on it.*/
 177:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #error "invalid priority level specified for CORTEX_PRIORITY_SVCALL"
 178:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 179:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 180:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 181:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   NVIC PRIGROUP initialization expression.
 182:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details The default assigns all available priority bits as preemption
 183:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          priority with no sub-priority.
 184:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 185:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(CORTEX_PRIGROUP_INIT) || defined(__DOXYGEN__)
 186:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_PRIGROUP_INIT            (7 - CORTEX_PRIORITY_BITS)
 187:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 188:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 189:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 190:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Derived constants and error checks.                                       */
 191:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 192:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 193:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_SWITCHED_REGIONS_NUMBER < 0) || (PORT_SWITCHED_REGIONS_NUMBER > 4)
 194:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #error "invalid PORT_SWITCHED_REGIONS_NUMBER value"
 195:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 196:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 197:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(_FROM_ASM_)
 198:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 199:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   MPU guard page size.
 200:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 201:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_ENABLE_GUARD_PAGES == TRUE) || defined(__DOXYGEN__)
 202:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_DBG_ENABLE_STACK_CHECK == FALSE
 203:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "PORT_ENABLE_GUARD_PAGES requires CH_DBG_ENABLE_STACK_CHECK"
 204:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 205:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if __MPU_PRESENT == 0
 206:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "MPU not present in current device"
 207:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 208:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_GUARD_PAGE_SIZE          32U
 209:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 210:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_GUARD_PAGE_SIZE          0U
 211:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 212:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* !defined(_FROM_ASM_) */
 213:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 214:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 215:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @name    Architecture and Compiler
 216:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @{
 217:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 218:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CORTEX_MODEL == 3) || defined(__DOXYGEN__)
 219:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 220:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if !defined(CH_CUSTOMER_LIC_PORT_CM3)
 221:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "CH_CUSTOMER_LIC_PORT_CM3 not defined"
 222:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 223:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 224:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_CUSTOMER_LIC_PORT_CM3 == FALSE
 225:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "ChibiOS Cortex-M3 port not licensed"
 226:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 227:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 228:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 229:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Macro defining the specific ARM architecture.
 230:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 231:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ARCHITECTURE_ARM_v7M
 232:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 233:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 234:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Name of the implemented architecture.
 235:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 236:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ARCHITECTURE_NAME          "ARMv7-M"
 237:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 238:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 239:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Name of the architecture variant.
 240:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 241:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_ENABLE_GUARD_PAGES == FALSE) || defined(__DOXYGEN__)
 242:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_CORE_VARIANT_NAME        "Cortex-M3"
 243:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 244:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_CORE_VARIANT_NAME        "Cortex-M3 (MPU)"
 245:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 246:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 247:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (CORTEX_MODEL == 4)
 248:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 249:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if !defined(CH_CUSTOMER_LIC_PORT_CM4)
 250:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "CH_CUSTOMER_LIC_PORT_CM4 not defined"
 251:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 252:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 253:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_CUSTOMER_LIC_PORT_CM4 == FALSE
 254:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #error "ChibiOS Cortex-M4 port not licensed"
 255:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 256:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 257:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_ARCHITECTURE_ARM_v7ME
 258:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_ARCHITECTURE_NAME        "ARMv7E-M"
 259:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CORTEX_USE_FPU
 260:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 261:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4F"
 262:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 263:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4F (MPU)"
 264:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 265:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #else
 266:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 267:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4"
 268:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 269:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M4 (MPU)"
 270:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 271:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 272:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 273:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (CORTEX_MODEL == 7)
 274:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 275:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if !defined(CH_CUSTOMER_LIC_PORT_CM7)
 276:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "CH_CUSTOMER_LIC_PORT_CM7 not defined"
 277:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 278:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 279:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CH_CUSTOMER_LIC_PORT_CM7 == FALSE
 280:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #error "ChibiOS Cortex-M7 port not licensed"
 281:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 282:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 283:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_ARCHITECTURE_ARM_v7ME
 284:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #define PORT_ARCHITECTURE_NAME        "ARMv7E-M"
 285:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #if CORTEX_USE_FPU
 286:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 287:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7F"
 288:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 289:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7F (MPU)"
 290:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 291:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #else
 292:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #if PORT_ENABLE_GUARD_PAGES == FALSE
 293:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7"
 294:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #else
 295:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****       #define PORT_CORE_VARIANT_NAME    "Cortex-M7 (MPU)"
 296:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     #endif
 297:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   #endif
 298:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 299:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 300:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 301:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Port-specific information string.
 302:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 303:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CORTEX_SIMPLIFIED_PRIORITY == FALSE) || defined(__DOXYGEN__)
 304:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_INFO                       "Advanced kernel mode"
 305:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 306:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_INFO                       "Compact kernel mode"
 307:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 308:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /** @} */
 309:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 310:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CORTEX_SIMPLIFIED_PRIORITY == FALSE) || defined(__DOXYGEN__)
 311:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 312:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Maximum usable priority for normal ISRs.
 313:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 314:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_MAX_KERNEL_PRIORITY      (CORTEX_PRIORITY_SVCALL + 1U)
 315:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 316:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 317:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   BASEPRI level within kernel lock.
 318:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 319:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_BASEPRI_KERNEL                                               \
 320:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   CORTEX_PRIO_MASK(CORTEX_MAX_KERNEL_PRIORITY)
 321:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 322:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 323:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_MAX_KERNEL_PRIORITY      0U
 324:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 325:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 326:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 327:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   PendSV priority level.
 328:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    This priority is enforced to be equal to
 329:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          @p CORTEX_MAX_KERNEL_PRIORITY, this handler always have the
 330:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          highest priority that cannot preempt the kernel.
 331:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 332:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define CORTEX_PRIORITY_PENDSV          CORTEX_MAX_KERNEL_PRIORITY
 333:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 334:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 335:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module data structures and types.                                         */
 336:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 337:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 338:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* The following code is not processed when the file is included from an
 339:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****    asm module.*/
 340:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(_FROM_ASM_)
 341:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 342:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* The documentation of the following declarations is in chconf.h in order
 343:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****    to not have duplicated structure names into the documentation.*/
 344:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if !defined(__DOXYGEN__)
 345:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_extctx {
 346:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r0;
 347:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r1;
 348:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r2;
 349:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r3;
 350:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r12;
 351:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      lr_thd;
 352:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      pc;
 353:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      xpsr;
 354:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_USE_FPU
 355:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s0;
 356:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s1;
 357:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s2;
 358:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s3;
 359:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s4;
 360:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s5;
 361:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s6;
 362:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s7;
 363:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s8;
 364:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s9;
 365:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s10;
 366:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s11;
 367:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s12;
 368:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s13;
 369:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s14;
 370:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s15;
 371:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      fpscr;
 372:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      reserved;
 373:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_USE_FPU */
 374:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 375:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 376:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_USE_SYSCALL == TRUE) || defined(__DOXYGEN__)
 377:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 378:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Link context structure.
 379:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This structure is used when there is the need to save extra
 380:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          context information that is not part of the registers stacked
 381:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          in HW.
 382:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 383:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_linkctx {
 384:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t              control;
 385:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct port_extctx    *ectxp;
 386:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 387:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 388:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 389:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_intctx {
 390:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_SWITCHED_REGIONS_NUMBER > 0) || defined(__DOXYGEN__)
 391:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct {
 392:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     uint32_t    rbar;
 393:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     uint32_t    rasr;
 394:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   } regions[PORT_SWITCHED_REGIONS_NUMBER];
 395:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 396:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_USE_FPU
 397:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s16;
 398:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s17;
 399:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s18;
 400:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s19;
 401:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s20;
 402:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s21;
 403:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s22;
 404:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s23;
 405:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s24;
 406:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s25;
 407:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s26;
 408:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s27;
 409:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s28;
 410:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s29;
 411:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s30;
 412:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      s31;
 413:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_USE_FPU */
 414:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r4;
 415:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r5;
 416:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r6;
 417:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r7;
 418:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r8;
 419:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r9;
 420:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r10;
 421:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      r11;
 422:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   uint32_t      lr;
 423:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 424:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 425:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** struct port_context {
 426:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct port_intctx    *sp;
 427:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_USE_SYSCALL == TRUE) || defined(__DOXYGEN__)
 428:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct {
 429:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     uint32_t            psp;
 430:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     const void          *p;
 431:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   } syscall;
 432:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 433:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** };
 434:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* !defined(__DOXYGEN__) */
 435:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 436:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 437:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module macros.                                                            */
 438:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 439:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 440:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* By default threads have no syscall context information.*/
 441:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_USE_SYSCALL == TRUE) || defined(__DOXYGEN__)
 442:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_SYSCALL(tp, wtop)                              \
 443:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.syscall.psp = (uint32_t)(wtop);                                 \
 444:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.syscall.p   = NULL;
 445:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 446:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_SYSCALL(tp, wtop)
 447:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 448:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 449:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* By default threads have all regions disabled.*/
 450:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_SWITCHED_REGIONS_NUMBER == 0) || defined(__DOXYGEN__)
 451:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)
 452:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 1) || defined(__DOXYGEN__)
 453:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 454:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 455:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U
 456:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 2) || defined(__DOXYGEN__)
 457:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 458:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 459:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U;                                      \
 460:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rbar  = 0U;                                      \
 461:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rasr  = 0U
 462:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 3) || defined(__DOXYGEN__)
 463:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 464:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 465:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U;                                      \
 466:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rbar  = 0U;                                      \
 467:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rasr  = 0U;                                      \
 468:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rbar  = 0U;                                      \
 469:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rasr  = 0U
 470:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #elif (PORT_SWITCHED_REGIONS_NUMBER == 4) || defined(__DOXYGEN__)
 471:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define __PORT_SETUP_CONTEXT_MPU(tp)                                        \
 472:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rbar  = 0U;                                      \
 473:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[0].rasr  = 0U;                                      \
 474:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rbar  = 0U;                                      \
 475:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[1].rasr  = 0U;                                      \
 476:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rbar  = 0U;                                      \
 477:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[2].rasr  = 0U;                                      \
 478:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[3].rbar  = 0U;                                      \
 479:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->regions[3].rasr  = 0U
 480:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 481:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 482:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 483:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 484:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Platform dependent part of the @p chThdCreateI() API.
 485:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This code usually setup the context switching frame represented
 486:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          by an @p port_intctx structure.
 487:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 488:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_SETUP_CONTEXT(tp, wbase, wtop, pf, arg) {                      \
 489:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp = (struct port_intctx *)((uint8_t *)(wtop) -                 \
 490:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                                         sizeof (struct port_intctx));       \
 491:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->r4 = (uint32_t)(pf);                                        \
 492:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->r5 = (uint32_t)(arg);                                       \
 493:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   (tp)->ctx.sp->lr = (uint32_t)_port_thread_start;                          \
 494:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __PORT_SETUP_CONTEXT_MPU(tp);                                             \
 495:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __PORT_SETUP_CONTEXT_SYSCALL(tp, wtop);                                   \
 496:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 497:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 498:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** //  __PORT_SETUP_CONTEXT_MPU(tp)
 499:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 500:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 501:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Computes the thread working area global size.
 502:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    There is no need to perform alignments in this macro.
 503:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 504:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WA_SIZE(n) ((size_t)PORT_GUARD_PAGE_SIZE +                     \
 505:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          sizeof (struct port_intctx) +                      \
 506:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          sizeof (struct port_extctx) +                      \
 507:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          (size_t)(n) +                                      \
 508:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                          (size_t)PORT_INT_REQUIRED_STACK)
 509:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 510:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 511:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Static working area allocation.
 512:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This macro is used to allocate a static thread working area
 513:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          aligned as both position and size.
 514:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 515:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] s         the name to be assigned to the stack array
 516:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] n         the stack size to be assigned to the thread
 517:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 518:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (PORT_ENABLE_GUARD_PAGES == FALSE) || defined(__DOXYGEN__)
 519:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WORKING_AREA(s, n)                                             \
 520:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   stkalign_t s[THD_WORKING_AREA_SIZE(n) / sizeof (stkalign_t)]
 521:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 522:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_WORKING_AREA(s, n)                                             \
 523:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   ALIGNED_VAR(32) stkalign_t s[THD_WORKING_AREA_SIZE(n) / sizeof (stkalign_t)]
 524:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 525:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 526:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 527:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   IRQ prologue code.
 528:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This macro must be inserted at the start of all IRQ handlers
 529:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          enabled to invoke system APIs.
 530:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 531:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_PROLOGUE()
 532:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 533:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 534:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   IRQ epilogue code.
 535:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This macro must be inserted at the end of all IRQ handlers
 536:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          enabled to invoke system APIs.
 537:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 538:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_EPILOGUE() _port_irq_epilogue()
 539:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 540:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 541:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   IRQ handler function declaration.
 542:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    @p id can be a function name or a vector number depending on the
 543:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          port implementation.
 544:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 545:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 546:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_HANDLER(id) extern "C" void id(void)
 547:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 548:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_IRQ_HANDLER(id) void id(void)
 549:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 550:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 551:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 552:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Fast IRQ handler function declaration.
 553:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    @p id can be a function name or a vector number depending on the
 554:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          port implementation.
 555:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 556:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 557:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_FAST_IRQ_HANDLER(id) extern "C" void id(void)
 558:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 559:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define PORT_FAST_IRQ_HANDLER(id) void id(void)
 560:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 561:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 562:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 563:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Performs a context switch between two threads.
 564:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details This is the most critical code in any port, this function
 565:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          is responsible for the context switch between 2 threads.
 566:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    The implementation of this code affects <b>directly</b> the context
 567:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          switch performance so optimize here as much as you can.
 568:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 569:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] ntp       the thread to be switched in
 570:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] otp       the thread to be switched out
 571:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 572:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if (CH_DBG_ENABLE_STACK_CHECK == FALSE) || defined(__DOXYGEN__)
 573:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define port_switch(ntp, otp) _port_switch(ntp, otp)
 574:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 575:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if PORT_ENABLE_GUARD_PAGES == FALSE
 576:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define port_switch(ntp, otp) {                                             \
 577:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   struct port_intctx *r13 = (struct port_intctx *)__get_PSP();              \
 578:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   if ((stkalign_t *)(r13 - 1) < (otp)->wabase) {                            \
 579:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****     chSysHalt("stack overflow");                                            \
 580:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   }                                                                         \
 581:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   _port_switch(ntp, otp);                                                   \
 582:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 583:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else
 584:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #define port_switch(ntp, otp) {                                             \
 585:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   _port_switch(ntp, otp);                                                   \
 586:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                                                                             \
 587:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   /* Setting up the guard page for the switched-in thread.*/                \
 588:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   mpuSetRegionAddress(PORT_USE_GUARD_MPU_REGION,                            \
 589:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****                       chThdGetSelfX()->wabase);                             \
 590:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 591:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 592:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 593:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 594:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 595:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* External declarations.                                                    */
 596:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 597:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 598:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 599:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** extern "C" {
 600:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 601:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void port_init(void);
 602:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_irq_epilogue(void);
 603:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_switch(thread_t *ntp, thread_t *otp);
 604:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_thread_start(void);
 605:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_switch_from_isr(void);
 606:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void _port_exit_from_isr(void);
 607:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if PORT_USE_SYSCALL == TRUE
 608:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   void port_unprivileged_jump(uint32_t pc, uint32_t psp);
 609:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 610:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #ifdef __cplusplus
 611:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 612:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 613:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 614:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 615:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /* Module inline functions.                                                  */
 616:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /*===========================================================================*/
 617:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 618:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 619:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Returns a word encoding the current interrupts status.
 620:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 621:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @return              The interrupts status.
 622:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 623:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE syssts_t port_get_irq_status(void) {
 624:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   syssts_t sts;
 625:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 626:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 627:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   sts = (syssts_t)__get_BASEPRI();
 628:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 629:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   sts = (syssts_t)__get_PRIMASK();
 630:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 631:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return sts;
 632:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 633:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 634:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 635:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Checks the interrupt status.
 636:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 637:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @param[in] sts       the interrupt status word
 638:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 639:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @return              The interrupt status.
 640:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval false        the word specified a disabled interrupts status.
 641:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval true         the word specified an enabled interrupts status.
 642:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 643:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE bool port_irq_enabled(syssts_t sts) {
 644:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 645:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 646:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return sts == (syssts_t)CORTEX_BASEPRI_DISABLED;
 647:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 648:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return (sts & (syssts_t)1) == (syssts_t)0;
 649:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 650:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 651:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 652:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 653:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Determines the current execution context.
 654:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *
 655:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @return              The execution context.
 656:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval false        not running in ISR mode.
 657:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @retval true         running in ISR mode.
 658:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 659:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE bool port_is_isr_context(void) {
 660:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 661:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   return (bool)((__get_IPSR() & 0x1FFU) != 0U);
 662:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 663:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 664:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 665:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-lock action.
 666:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function raises the base priority to kernel
 667:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 668:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_lock(void) {
 169              		.loc 4 669 27 view .LVU43
 670:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 671:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 672:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 673:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if __CM7_REV <= 1
 674:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __disable_irq();
 675:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 676:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __set_BASEPRI(CORTEX_BASEPRI_KERNEL);
 170              		.loc 4 677 3 view .LVU44
 171              	.LBB290:
 172              	.LBI290:
 173              		.file 5 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h"
   1:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @version  V5.0.4
   5:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * @date     09. April 2018
   6:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /*
   8:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  10:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  12:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  16:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  *
  18:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  * limitations under the License.
  23:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
  24:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  25:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  28:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  34:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  38:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
  39:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  43:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  46:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  49:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif                                           
  52:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  55:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __USED
  56:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  58:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  61:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  64:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  67:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  70:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  78:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  86:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
  94:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 102:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 110:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 113:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 116:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 117:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 118:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   @{
 122:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 123:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 124:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 125:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 129:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 131:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 133:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 134:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 135:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 136:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 140:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 141:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 142:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 143:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 144:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 145:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 146:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 147:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Control Register
 148:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the Control Register.
 149:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Control Register value
 150:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 151:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_CONTROL(void)
 152:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 153:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 154:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 155:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, control" : "=r" (result) );
 156:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 157:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 158:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 159:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 160:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 161:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 162:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Control Register (non-secure)
 163:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the non-secure Control Register when in secure mode.
 164:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               non-secure Control Register value
 165:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 166:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_CONTROL_NS(void)
 167:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 168:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 169:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 170:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, control_ns" : "=r" (result) );
 171:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 172:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 173:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 174:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 175:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 176:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 177:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Control Register
 178:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Writes the given value to the Control Register.
 179:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    control  Control Register value to set
 180:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 181:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_CONTROL(uint32_t control)
 182:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 183:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR control, %0" : : "r" (control) : "memory");
 184:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 185:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 186:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 187:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 188:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 189:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Control Register (non-secure)
 190:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Writes the given value to the non-secure Control Register when in secure state.
 191:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    control  Control Register value to set
 192:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 193:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_CONTROL_NS(uint32_t control)
 194:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 195:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR control_ns, %0" : : "r" (control) : "memory");
 196:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 197:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 198:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 199:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 200:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 201:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get IPSR Register
 202:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the IPSR Register.
 203:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               IPSR Register value
 204:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 205:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_IPSR(void)
 206:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 207:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 208:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 209:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, ipsr" : "=r" (result) );
 210:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 211:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 212:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 213:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 214:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 215:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get APSR Register
 216:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the APSR Register.
 217:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               APSR Register value
 218:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 219:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_APSR(void)
 220:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 221:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 222:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 223:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, apsr" : "=r" (result) );
 224:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 225:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 226:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 227:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 228:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 229:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get xPSR Register
 230:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the content of the xPSR Register.
 231:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               xPSR Register value
 232:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 233:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_xPSR(void)
 234:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 235:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 236:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 237:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, xpsr" : "=r" (result) );
 238:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 239:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 240:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 241:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 242:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 243:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Process Stack Pointer
 244:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the Process Stack Pointer (PSP).
 245:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               PSP Register value
 246:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 247:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_PSP(void)
 248:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 249:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 250:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 251:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, psp"  : "=r" (result) );
 252:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 253:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 254:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 255:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 256:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 257:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 258:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Process Stack Pointer (non-secure)
 259:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Process Stack Pointer (PSP) when in secure s
 260:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               PSP Register value
 261:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 262:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_PSP_NS(void)
 263:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 264:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 265:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 266:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, psp_ns"  : "=r" (result) );
 267:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 268:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 269:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 270:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 271:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 272:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 273:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Process Stack Pointer
 274:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Process Stack Pointer (PSP).
 275:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfProcStack  Process Stack Pointer value to set
 276:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 277:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_PSP(uint32_t topOfProcStack)
 278:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 279:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR psp, %0" : : "r" (topOfProcStack) : );
 280:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 281:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 282:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 283:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 284:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 285:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Process Stack Pointer (non-secure)
 286:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Process Stack Pointer (PSP) when in secure sta
 287:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfProcStack  Process Stack Pointer value to set
 288:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 289:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_PSP_NS(uint32_t topOfProcStack)
 290:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 291:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR psp_ns, %0" : : "r" (topOfProcStack) : );
 292:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 293:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 294:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 295:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 296:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 297:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Main Stack Pointer
 298:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the Main Stack Pointer (MSP).
 299:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               MSP Register value
 300:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 301:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_MSP(void)
 302:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 303:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 304:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 305:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, msp" : "=r" (result) );
 306:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 307:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 308:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 309:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 310:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 311:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 312:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Main Stack Pointer (non-secure)
 313:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Main Stack Pointer (MSP) when in secure stat
 314:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               MSP Register value
 315:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 316:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_MSP_NS(void)
 317:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 318:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 319:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 320:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, msp_ns" : "=r" (result) );
 321:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 322:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 323:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 324:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 325:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 326:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 327:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Main Stack Pointer
 328:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Main Stack Pointer (MSP).
 329:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfMainStack  Main Stack Pointer value to set
 330:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 331:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_MSP(uint32_t topOfMainStack)
 332:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 333:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR msp, %0" : : "r" (topOfMainStack) : );
 334:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 335:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 336:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 337:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 338:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 339:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Main Stack Pointer (non-secure)
 340:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Main Stack Pointer (MSP) when in secure state.
 341:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfMainStack  Main Stack Pointer value to set
 342:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 343:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_MSP_NS(uint32_t topOfMainStack)
 344:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 345:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR msp_ns, %0" : : "r" (topOfMainStack) : );
 346:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 347:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 348:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 349:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 350:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 351:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 352:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Stack Pointer (non-secure)
 353:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Stack Pointer (SP) when in secure state.
 354:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               SP Register value
 355:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 356:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_SP_NS(void)
 357:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 358:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 359:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 360:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, sp_ns" : "=r" (result) );
 361:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 362:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 363:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 364:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 365:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 366:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Stack Pointer (non-secure)
 367:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Stack Pointer (SP) when in secure state.
 368:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    topOfStack  Stack Pointer value to set
 369:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 370:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_SP_NS(uint32_t topOfStack)
 371:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 372:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR sp_ns, %0" : : "r" (topOfStack) : );
 373:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 374:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 375:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 376:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 377:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 378:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Priority Mask
 379:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current state of the priority mask bit from the Priority Mask Register.
 380:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Priority Mask value
 381:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 382:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_PRIMASK(void)
 383:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 384:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 385:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 386:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, primask" : "=r" (result) :: "memory");
 387:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 388:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 389:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 390:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 391:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 392:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 393:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Priority Mask (non-secure)
 394:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current state of the non-secure priority mask bit from the Priority Mask Reg
 395:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Priority Mask value
 396:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 397:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_PRIMASK_NS(void)
 398:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 399:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 400:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 401:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, primask_ns" : "=r" (result) :: "memory");
 402:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 403:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 404:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 405:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 406:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 407:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 408:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Priority Mask
 409:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Priority Mask Register.
 410:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    priMask  Priority Mask
 411:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 412:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_PRIMASK(uint32_t priMask)
 413:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 414:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR primask, %0" : : "r" (priMask) : "memory");
 415:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 416:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 417:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 418:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 419:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 420:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Priority Mask (non-secure)
 421:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the non-secure Priority Mask Register when in secure state.
 422:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    priMask  Priority Mask
 423:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 424:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_PRIMASK_NS(uint32_t priMask)
 425:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 426:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR primask_ns, %0" : : "r" (priMask) : "memory");
 427:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 428:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 429:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 430:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 431:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 432:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 433:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1))    )
 434:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 435:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Enable FIQ
 436:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Enables FIQ interrupts by clearing the F-bit in the CPSR.
 437:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 438:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 439:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_fault_irq(void)
 440:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 441:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie f" : : : "memory");
 442:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 443:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 444:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 445:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 446:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Disable FIQ
 447:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Disables FIQ interrupts by setting the F-bit in the CPSR.
 448:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 449:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 450:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_fault_irq(void)
 451:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 452:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid f" : : : "memory");
 453:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 454:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 455:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 456:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 457:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Base Priority
 458:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the Base Priority register.
 459:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Base Priority register value
 460:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 461:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __get_BASEPRI(void)
 462:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 463:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 464:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 465:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, basepri" : "=r" (result) );
 466:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 467:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 468:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 469:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 470:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #if (defined (__ARM_FEATURE_CMSE ) && (__ARM_FEATURE_CMSE == 3))
 471:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 472:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Get Base Priority (non-secure)
 473:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Returns the current value of the non-secure Base Priority register when in secure state.
 474:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \return               Base Priority register value
 475:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 476:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __TZ_get_BASEPRI_NS(void)
 477:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 478:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   uint32_t result;
 479:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 480:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MRS %0, basepri_ns" : "=r" (result) );
 481:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   return(result);
 482:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** }
 483:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** #endif
 484:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 485:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** 
 486:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** /**
 487:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \brief   Set Base Priority
 488:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \details Assigns the given value to the Base Priority register.
 489:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   \param [in]    basePri  Base Priority value to set
 490:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****  */
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __set_BASEPRI(uint32_t basePri)
 174              		.loc 5 491 27 view .LVU45
 175              	.LBB291:
 492:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 493:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h ****   __ASM volatile ("MSR basepri, %0" : : "r" (basePri) : "memory");
 176              		.loc 5 493 3 view .LVU46
 177              	.LBE291:
 178              	.LBE290:
 179              	.LBE289:
 180              	.LBE288:
 181              	.LBE287:
 303:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 182              		.loc 1 303 57 is_stmt 0 view .LVU47
 183 0000 10B5     		push	{r4, lr}
 184              		.cfi_def_cfa_offset 8
 185              		.cfi_offset 4, -8
 186              		.cfi_offset 14, -4
 187              	.LBB300:
 188              	.LBB298:
 189              	.LBB296:
 190              	.LBB294:
 191              	.LBB292:
 192              		.loc 5 493 3 view .LVU48
 193 0002 2022     		movs	r2, #32
 194              	.LBE292:
 195              	.LBE294:
 196              	.LBE296:
 197              	.LBE298:
 198              	.LBE300:
 303:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 199              		.loc 1 303 57 view .LVU49
 200 0004 0446     		mov	r4, r0
 201              	.LBB301:
 202              	.LBB299:
 203              	.LBB297:
 204              	.LBB295:
 205              	.LBB293:
 206              		.loc 5 493 3 view .LVU50
 207              		.syntax unified
 208              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 209 0006 82F31188 		MSR basepri, r2
 210              	@ 0 "" 2
 211              	.LVL8:
 212              		.loc 5 493 3 view .LVU51
 213              		.thumb
 214              		.syntax unified
 215              	.LBE293:
 216              	.LBE295:
 217              	.LBE297:
 358:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 218              		.loc 3 358 34 is_stmt 1 view .LVU52
 359:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 219              		.loc 3 359 20 view .LVU53
 220              	.LBE299:
 221              	.LBE301:
 309:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert((usbp->state == USB_STOP) || (usbp->state == USB_READY),
 222              		.loc 1 309 3 view .LVU54
 223              		.loc 1 309 3 view .LVU55
 224              		.loc 1 309 3 view .LVU56
 310:lib/chibios/os/hal/src/hal_usb.c ****                 "invalid state");
 311:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = config;
 225              		.loc 1 311 3 view .LVU57
 226              		.loc 1 311 16 is_stmt 0 view .LVU58
 227 000a 4160     		str	r1, [r0, #4]
 312:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 228              		.loc 1 312 3 is_stmt 1 view .LVU59
 229              	.LVL9:
 230              		.loc 1 312 17 view .LVU60
 313:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 231              		.loc 1 313 18 is_stmt 0 view .LVU61
 232 000c 0021     		movs	r1, #0
 233              	.LVL10:
 234              		.loc 1 313 18 view .LVU62
 235 000e 0C30     		adds	r0, r0, #12
 236              	.LVL11:
 237              		.loc 1 313 18 view .LVU63
 238 0010 FFF7FEFF 		bl	memset
 239              	.LVL12:
 314:lib/chibios/os/hal/src/hal_usb.c ****   }
 315:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_start(usbp);
 240              		.loc 1 315 3 is_stmt 1 view .LVU64
 241 0014 2046     		mov	r0, r4
 242 0016 FFF7FEFF 		bl	usb_lld_start
 243              	.LVL13:
 316:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state = USB_READY;
 244              		.loc 1 316 3 view .LVU65
 245              		.loc 1 316 15 is_stmt 0 view .LVU66
 246 001a 0223     		movs	r3, #2
 247 001c 2370     		strb	r3, [r4]
 317:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 248              		.loc 1 317 3 is_stmt 1 view .LVU67
 249              	.LBB302:
 250              	.LBI302:
 576:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 577:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 578:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 579:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Leaves a critical zone from thread context.
 580:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 581:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 582:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 583:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysUnlock(void) {
 251              		.loc 2 584 20 view .LVU68
 585:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysUnlock();
 252              		.loc 2 586 3 view .LVU69
 253              	.LBB303:
 254              	.LBI303:
 360:./lib/chibios/os/rt/include/chsys.h **** }
 361:./lib/chibios/os/rt/include/chsys.h **** 
 362:./lib/chibios/os/rt/include/chsys.h **** /**
 363:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Leaves the kernel lock state.
 364:./lib/chibios/os/rt/include/chsys.h ****  *
 365:./lib/chibios/os/rt/include/chsys.h ****  * @special
 366:./lib/chibios/os/rt/include/chsys.h ****  */
 367:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysUnlock(void) {
 255              		.loc 3 367 20 view .LVU70
 256              	.LBB304:
 368:./lib/chibios/os/rt/include/chsys.h **** 
 369:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_unlock();
 257              		.loc 3 369 22 view .LVU71
 370:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 258              		.loc 3 370 33 view .LVU72
 371:./lib/chibios/os/rt/include/chsys.h **** 
 372:./lib/chibios/os/rt/include/chsys.h ****   /* The following condition can be triggered by the use of i-class functions
 373:./lib/chibios/os/rt/include/chsys.h ****      in a critical section not followed by a chSchRescheduleS(), this means
 374:./lib/chibios/os/rt/include/chsys.h ****      that the current thread has a lower priority than the next thread in
 375:./lib/chibios/os/rt/include/chsys.h ****      the ready list.*/
 376:./lib/chibios/os/rt/include/chsys.h ****   chDbgAssert((ch.rlist.pqueue.next == &ch.rlist.pqueue) ||
 259              		.loc 3 376 3 view .LVU73
 260              		.loc 3 376 3 view .LVU74
 261              		.loc 3 376 3 view .LVU75
 377:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 378:./lib/chibios/os/rt/include/chsys.h ****               "priority order violation");
 379:./lib/chibios/os/rt/include/chsys.h **** 
 380:./lib/chibios/os/rt/include/chsys.h ****   port_unlock();
 262              		.loc 3 380 3 view .LVU76
 263              	.LBB305:
 264              	.LBI305:
 678:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 679:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if __CM7_REV <= 1
 680:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __enable_irq();
 681:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 682:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif
 683:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 684:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __disable_irq();
 685:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 686:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 687:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 688:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 689:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-unlock action.
 690:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function lowers the base priority to user
 691:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 692:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_unlock(void) {
 265              		.loc 4 693 27 view .LVU77
 694:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 695:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if CORTEX_SIMPLIFIED_PRIORITY == FALSE
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __set_BASEPRI(CORTEX_BASEPRI_DISABLED);
 266              		.loc 4 696 3 view .LVU78
 267              	.LVL14:
 268              	.LBB306:
 269              	.LBI306:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 270              		.loc 5 491 27 view .LVU79
 271              	.LBB307:
 272              		.loc 5 493 3 view .LVU80
 273 001e 0023     		movs	r3, #0
 274              		.syntax unified
 275              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 276 0020 83F31188 		MSR basepri, r3
 277              	@ 0 "" 2
 278              	.LVL15:
 279              		.loc 5 493 3 is_stmt 0 view .LVU81
 280              		.thumb
 281              		.syntax unified
 282              	.LBE307:
 283              	.LBE306:
 284              	.LBE305:
 285              	.LBE304:
 286              	.LBE303:
 287              	.LBE302:
 318:lib/chibios/os/hal/src/hal_usb.c **** }
 288              		.loc 1 318 1 view .LVU82
 289 0024 10BD     		pop	{r4, pc}
 290              		.loc 1 318 1 view .LVU83
 291              		.cfi_endproc
 292              	.LFE287:
 294              		.section	.text.usbStop,"ax",%progbits
 295              		.align	1
 296              		.global	usbStop
 297              		.syntax unified
 298              		.thumb
 299              		.thumb_func
 301              	usbStop:
 302              	.LVL16:
 303              	.LFB288:
 319:lib/chibios/os/hal/src/hal_usb.c **** 
 320:lib/chibios/os/hal/src/hal_usb.c **** /**
 321:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Deactivates the USB peripheral.
 322:lib/chibios/os/hal/src/hal_usb.c ****  *
 323:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 324:lib/chibios/os/hal/src/hal_usb.c ****  *
 325:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 326:lib/chibios/os/hal/src/hal_usb.c ****  */
 327:lib/chibios/os/hal/src/hal_usb.c **** void usbStop(USBDriver *usbp) {
 304              		.loc 1 327 31 is_stmt 1 view -0
 305              		.cfi_startproc
 306              		@ args = 0, pretend = 0, frame = 0
 307              		@ frame_needed = 0, uses_anonymous_args = 0
 328:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 308              		.loc 1 328 3 view .LVU85
 329:lib/chibios/os/hal/src/hal_usb.c **** 
 330:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 309              		.loc 1 330 3 view .LVU86
 310              		.loc 1 330 3 view .LVU87
 311              		.loc 1 330 3 view .LVU88
 331:lib/chibios/os/hal/src/hal_usb.c **** 
 332:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 312              		.loc 1 332 3 view .LVU89
 313              	.LBB308:
 314              	.LBI308:
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 315              		.loc 2 573 20 view .LVU90
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 316              		.loc 2 575 3 view .LVU91
 317              	.LBB309:
 318              	.LBI309:
 355:./lib/chibios/os/rt/include/chsys.h **** 
 319              		.loc 3 355 20 view .LVU92
 357:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 320              		.loc 3 357 3 view .LVU93
 321              	.LBB310:
 322              	.LBI310:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 323              		.loc 4 669 27 view .LVU94
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 324              		.loc 4 677 3 view .LVU95
 325              	.LBB311:
 326              	.LBI311:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 327              		.loc 5 491 27 view .LVU96
 328              	.LBB312:
 329              		.loc 5 493 3 view .LVU97
 330              	.LBE312:
 331              	.LBE311:
 332              	.LBE310:
 333              	.LBE309:
 334              	.LBE308:
 327:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 335              		.loc 1 327 31 is_stmt 0 view .LVU98
 336 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 337              		.cfi_def_cfa_offset 24
 338              		.cfi_offset 3, -24
 339              		.cfi_offset 4, -20
 340              		.cfi_offset 5, -16
 341              		.cfi_offset 6, -12
 342              		.cfi_offset 7, -8
 343              		.cfi_offset 14, -4
 327:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 344              		.loc 1 327 31 view .LVU99
 345 0002 0446     		mov	r4, r0
 346              	.LBB317:
 347              	.LBB316:
 348              	.LBB315:
 349              	.LBB314:
 350              	.LBB313:
 351              		.loc 5 493 3 view .LVU100
 352 0004 2023     		movs	r3, #32
 353              		.syntax unified
 354              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 355 0006 83F31188 		MSR basepri, r3
 356              	@ 0 "" 2
 357              	.LVL17:
 358              		.loc 5 493 3 view .LVU101
 359              		.thumb
 360              		.syntax unified
 361              	.LBE313:
 362              	.LBE314:
 363              	.LBE315:
 358:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 364              		.loc 3 358 34 is_stmt 1 view .LVU102
 359:./lib/chibios/os/rt/include/chsys.h **** }
 365              		.loc 3 359 20 view .LVU103
 366              	.LBE316:
 367              	.LBE317:
 333:lib/chibios/os/hal/src/hal_usb.c **** 
 334:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert((usbp->state == USB_STOP) || (usbp->state == USB_READY) ||
 368              		.loc 1 334 3 view .LVU104
 369              		.loc 1 334 3 view .LVU105
 370              		.loc 1 334 3 view .LVU106
 335:lib/chibios/os/hal/src/hal_usb.c ****                 (usbp->state == USB_SELECTED) || (usbp->state == USB_ACTIVE) ||
 336:lib/chibios/os/hal/src/hal_usb.c ****                 (usbp->state == USB_SUSPENDED),
 337:lib/chibios/os/hal/src/hal_usb.c ****                 "invalid state");
 338:lib/chibios/os/hal/src/hal_usb.c **** 
 339:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_stop(usbp);
 371              		.loc 1 339 3 view .LVU107
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 341:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state  = USB_STOP;
 372              		.loc 1 341 16 is_stmt 0 view .LVU108
 373 000a 2546     		mov	r5, r4
 339:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 374              		.loc 1 339 3 view .LVU109
 375 000c FFF7FEFF 		bl	usb_lld_stop
 376              	.LVL18:
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 377              		.loc 1 340 3 is_stmt 1 view .LVU110
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 378              		.loc 1 340 16 is_stmt 0 view .LVU111
 379 0010 0026     		movs	r6, #0
 380              		.loc 1 341 16 view .LVU112
 381 0012 0123     		movs	r3, #1
 340:lib/chibios/os/hal/src/hal_usb.c ****   usbp->config = NULL;
 382              		.loc 1 340 16 view .LVU113
 383 0014 6660     		str	r6, [r4, #4]
 384              		.loc 1 341 3 is_stmt 1 view .LVU114
 385              		.loc 1 341 16 is_stmt 0 view .LVU115
 386 0016 05F8083B 		strb	r3, [r5], #8
 342:lib/chibios/os/hal/src/hal_usb.c **** 
 343:lib/chibios/os/hal/src/hal_usb.c ****   /* Resetting all ongoing synchronous operations.*/
 344:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 387              		.loc 1 344 3 is_stmt 1 view .LVU116
 388              	.LVL19:
 389              		.loc 1 344 17 view .LVU117
 390 001a 2834     		adds	r4, r4, #40
 391              	.LVL20:
 345:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 346:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->epc[i] != NULL) {
 347:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 348:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 349:lib/chibios/os/hal/src/hal_usb.c ****       }
 350:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->out_state != NULL) {
 351:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 352:lib/chibios/os/hal/src/hal_usb.c ****       }
 353:lib/chibios/os/hal/src/hal_usb.c ****     }
 354:lib/chibios/os/hal/src/hal_usb.c **** #endif
 355:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 392              		.loc 1 355 18 is_stmt 0 view .LVU118
 393 001c 3746     		mov	r7, r6
 394              	.LVL21:
 395              	.L14:
 346:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 396              		.loc 1 346 5 is_stmt 1 view .LVU119
 346:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 397              		.loc 1 346 18 is_stmt 0 view .LVU120
 398 001e 55F8043F 		ldr	r3, [r5, #4]!
 346:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 399              		.loc 1 346 8 view .LVU121
 400 0022 73B1     		cbz	r3, .L11
 347:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 401              		.loc 1 347 7 is_stmt 1 view .LVU122
 347:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 402              		.loc 1 347 23 is_stmt 0 view .LVU123
 403 0024 5869     		ldr	r0, [r3, #20]
 347:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 404              		.loc 1 347 10 view .LVU124
 405 0026 20B1     		cbz	r0, .L12
 348:lib/chibios/os/hal/src/hal_usb.c ****       }
 406              		.loc 1 348 9 is_stmt 1 view .LVU125
 407              	.LVL22:
 408              	.LBB318:
 409              	.LBI318:
 587:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 588:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 589:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 590:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Enters a critical zone from ISR context.
 591:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 592:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 593:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 594:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysLockFromISR(void) {
 596:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysLockFromISR();
 598:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 599:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 600:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 601:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Leaves a critical zone from ISR context.
 602:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 603:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 604:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @special
 605:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysUnlockFromISR(void) {
 607:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysUnlockFromISR();
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 610:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 611:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 612:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Returns the execution status and enters a critical zone.
 613:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details This functions enters into a critical zone and can be called
 614:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          from any context. Because its flexibility it is less efficient
 615:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          than @p chSysLock() which is preferable when the calling context
 616:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          is known.
 617:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @post    The system is in a critical zone.
 618:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 619:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The previous system status, the encoding of this
 620:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      status word is architecture-dependent and opaque.
 621:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 622:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 623:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 624:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline syssts_t osalSysGetStatusAndLockX(void) {
 625:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 626:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chSysGetStatusAndLockX();
 627:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 628:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 629:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 630:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Restores the specified execution status and leaves a critical zone.
 631:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    A call to @p chSchRescheduleS() is automatically performed
 632:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          if exiting the critical zone and if not in ISR context.
 633:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 634:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] sts       the system status to be restored.
 635:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 636:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 637:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 638:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysRestoreStatusX(syssts_t sts) {
 639:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 640:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysRestoreStatusX(sts);
 641:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 642:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 643:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 644:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Polled delay.
 645:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The real delay is always few cycles in excess of the specified
 646:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          value.
 647:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 648:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] cycles    number of cycles
 649:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 650:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 651:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 652:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (PORT_SUPPORTS_RT == TRUE) || defined(__DOXYGEN__)
 653:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalSysPolledDelayX(rtcnt_t cycles) {
 654:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 655:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysPolledDelayX(cycles);
 656:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 657:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 658:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 659:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 660:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Systick callback for the underlying OS.
 661:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This callback is only defined if the OSAL requires such a
 662:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          service from the HAL.
 663:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 664:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #if (OSAL_ST_MODE != OSAL_ST_MODE_NONE) || defined(__DOXYGEN__)
 665:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalOsTimerHandlerI(void) {
 666:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 667:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSysTimerHandlerI();
 668:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 669:./lib/chibios/os/hal/osal/rt-nil/osal.h **** #endif
 670:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 671:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 672:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Checks if a reschedule is required and performs it.
 673:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    I-Class functions invoked from thread context must not reschedule
 674:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          by themselves, an explicit reschedule using this function is
 675:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          required in this scenario.
 676:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 677:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 678:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 679:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 680:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalOsRescheduleS(void) {
 681:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 682:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chSchRescheduleS();
 683:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 684:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 685:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 686:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Current system time.
 687:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @details Returns the number of system ticks since the @p osalInit()
 688:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          invocation.
 689:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    The counter can reach its maximum and then restart from zero.
 690:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function can be called from any context but its atomicity
 691:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          is not guaranteed on architectures whose word size is less than
 692:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          @p systime_t size.
 693:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 694:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The system time in ticks.
 695:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 696:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 697:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 698:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline systime_t osalOsGetSystemTimeX(void) {
 699:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 700:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chVTGetSystemTimeX();
 701:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 702:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 703:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 704:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Adds an interval to a system time returning a system time.
 705:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 706:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] systime   base system time
 707:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval to be added
 708:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The new system time.
 709:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 710:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 711:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 712:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline systime_t osalTimeAddX(systime_t systime,
 713:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                      sysinterval_t interval) {
 714:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 715:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chTimeAddX(systime, interval);
 716:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 717:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 718:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 719:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Subtracts two system times returning an interval.
 720:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 721:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] start     first system time
 722:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] end       second system time
 723:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The interval representing the time difference.
 724:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 725:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 726:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 727:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline sysinterval_t osalTimeDiffX(systime_t start, systime_t end) {
 728:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 729:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chTimeDiffX(start, end);
 730:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 731:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 732:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 733:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Checks if the specified time is within the specified time window.
 734:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    When start==end then the function returns always true because the
 735:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          whole time range is specified.
 736:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function can be called from any context.
 737:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 738:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] time      the time to be verified
 739:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] start     the start of the time window (inclusive)
 740:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] end       the end of the time window (non inclusive)
 741:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @retval true         current time within the specified time window.
 742:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @retval false        current time not within the specified time window.
 743:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 744:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @xclass
 745:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 746:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline bool osalTimeIsInRangeX(systime_t time,
 747:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                       systime_t start,
 748:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                       systime_t end) {
 749:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 750:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chTimeIsInRangeX(time, start, end);
 751:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 752:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 753:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 754:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Suspends the invoking thread for the specified time.
 755:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 756:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] delay     the delay in system ticks, the special values are
 757:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 758:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE is allowed but interpreted as a
 759:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        normal time specification.
 760:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE this value is not allowed.
 761:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      .
 762:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 763:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 764:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 765:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalThreadSleepS(sysinterval_t delay) {
 766:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 767:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chThdSleepS(delay);
 768:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 769:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 770:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 771:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Suspends the invoking thread for the specified time.
 772:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 773:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] delay     the delay in system ticks, the special values are
 774:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 775:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE is allowed but interpreted as a
 776:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        normal time specification.
 777:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE this value is not allowed.
 778:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      .
 779:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 780:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @api
 781:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 782:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalThreadSleep(sysinterval_t delay) {
 783:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chThdSleep(delay);
 785:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 786:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 787:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 788:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Sends the current thread sleeping and sets a reference variable.
 789:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function must reschedule, it can only be called from thread
 790:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          context.
 791:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 792:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 793:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The wake up message.
 794:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 795:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 796:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 797:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline msg_t osalThreadSuspendS(thread_reference_t *trp) {
 798:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chThdSuspendTimeoutS(trp, TIME_INFINITE);
 800:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 801:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 802:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 803:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Sends the current thread sleeping and sets a reference variable.
 804:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function must reschedule, it can only be called from thread
 805:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          context.
 806:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 807:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 808:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] timeout   the timeout in system ticks, the special values are
 809:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 810:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE the thread enters an infinite sleep
 811:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        state.
 812:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE the thread is not enqueued and
 813:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        the function returns @p MSG_TIMEOUT as if a timeout
 814:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                        occurred.
 815:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *                      .
 816:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @return              The wake up message.
 817:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @retval MSG_TIMEOUT  if the operation timed out.
 818:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 819:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @sclass
 820:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 821:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline msg_t osalThreadSuspendTimeoutS(thread_reference_t *trp,
 822:./lib/chibios/os/hal/osal/rt-nil/osal.h ****                                               sysinterval_t timeout) {
 823:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 824:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   return chThdSuspendTimeoutS(trp, timeout);
 825:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 826:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 827:./lib/chibios/os/hal/osal/rt-nil/osal.h **** /**
 828:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @brief   Wakes up a thread waiting on a thread reference object.
 829:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @note    This function must not reschedule because it can be called from
 830:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *          ISR context.
 831:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 832:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 833:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @param[in] msg       the message code
 834:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  *
 835:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  * @iclass
 836:./lib/chibios/os/hal/osal/rt-nil/osal.h ****  */
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** static inline void osalThreadResumeI(thread_reference_t *trp, msg_t msg) {
 410              		.loc 2 837 20 view .LVU126
 411              	.LBB319:
 838:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 839:./lib/chibios/os/hal/osal/rt-nil/osal.h ****   chThdResumeI(trp, msg);
 412              		.loc 2 839 3 view .LVU127
 413 0028 6FF00101 		mvn	r1, #1
 414 002c 0C30     		adds	r0, r0, #12
 415              	.LVL23:
 416              		.loc 2 839 3 is_stmt 0 view .LVU128
 417 002e FFF7FEFF 		bl	chThdResumeI
 418              	.LVL24:
 419              	.L12:
 420              		.loc 2 839 3 view .LVU129
 421              	.LBE319:
 422              	.LBE318:
 350:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 423              		.loc 1 350 7 is_stmt 1 view .LVU130
 350:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 424              		.loc 1 350 23 is_stmt 0 view .LVU131
 425 0032 2B68     		ldr	r3, [r5]
 426 0034 9869     		ldr	r0, [r3, #24]
 350:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 427              		.loc 1 350 10 view .LVU132
 428 0036 20B1     		cbz	r0, .L11
 351:lib/chibios/os/hal/src/hal_usb.c ****       }
 429              		.loc 1 351 9 is_stmt 1 view .LVU133
 430              	.LVL25:
 431              	.LBB320:
 432              	.LBI320:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 433              		.loc 2 837 20 view .LVU134
 434              	.LBB321:
 435              		.loc 2 839 3 view .LVU135
 436 0038 6FF00101 		mvn	r1, #1
 437 003c 0C30     		adds	r0, r0, #12
 438              	.LVL26:
 439              		.loc 2 839 3 is_stmt 0 view .LVU136
 440 003e FFF7FEFF 		bl	chThdResumeI
 441              	.LVL27:
 442              	.L11:
 443              		.loc 2 839 3 view .LVU137
 444              	.LBE321:
 445              	.LBE320:
 446              		.loc 1 355 5 is_stmt 1 discriminator 2 view .LVU138
 344:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 447              		.loc 1 344 17 is_stmt 0 discriminator 2 view .LVU139
 448 0042 A542     		cmp	r5, r4
 449              		.loc 1 355 18 discriminator 2 view .LVU140
 450 0044 2E60     		str	r6, [r5]
 344:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 451              		.loc 1 344 50 is_stmt 1 discriminator 2 view .LVU141
 344:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 452              		.loc 1 344 17 discriminator 2 view .LVU142
 453 0046 EAD1     		bne	.L14
 356:lib/chibios/os/hal/src/hal_usb.c ****   }
 357:lib/chibios/os/hal/src/hal_usb.c ****   osalOsRescheduleS();
 454              		.loc 1 357 3 view .LVU143
 455              	.LBB322:
 456              	.LBI322:
 680:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 457              		.loc 2 680 20 view .LVU144
 458              	.LBB323:
 682:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 459              		.loc 2 682 3 view .LVU145
 460 0048 FFF7FEFF 		bl	chSchRescheduleS
 461              	.LVL28:
 462              	.LBE323:
 463              	.LBE322:
 358:lib/chibios/os/hal/src/hal_usb.c **** 
 359:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 464              		.loc 1 359 3 view .LVU146
 465              	.LBB324:
 466              	.LBI324:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 467              		.loc 2 584 20 view .LVU147
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 468              		.loc 2 586 3 view .LVU148
 469              	.LBB325:
 470              	.LBI325:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 471              		.loc 3 367 20 view .LVU149
 472              	.LBB326:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 473              		.loc 3 369 22 view .LVU150
 370:./lib/chibios/os/rt/include/chsys.h **** 
 474              		.loc 3 370 33 view .LVU151
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 475              		.loc 3 376 3 view .LVU152
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 476              		.loc 3 376 3 view .LVU153
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 477              		.loc 3 376 3 view .LVU154
 478              		.loc 3 380 3 view .LVU155
 479              	.LBB327:
 480              	.LBI327:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 481              		.loc 4 693 27 view .LVU156
 482              		.loc 4 696 3 view .LVU157
 483              	.LBB328:
 484              	.LBI328:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 485              		.loc 5 491 27 view .LVU158
 486              	.LBB329:
 487              		.loc 5 493 3 view .LVU159
 488              		.syntax unified
 489              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 490 004c 87F31188 		MSR basepri, r7
 491              	@ 0 "" 2
 492              	.LVL29:
 493              		.loc 5 493 3 is_stmt 0 view .LVU160
 494              		.thumb
 495              		.syntax unified
 496              	.LBE329:
 497              	.LBE328:
 498              	.LBE327:
 499              	.LBE326:
 500              	.LBE325:
 501              	.LBE324:
 360:lib/chibios/os/hal/src/hal_usb.c **** }
 502              		.loc 1 360 1 view .LVU161
 503 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 504              		.loc 1 360 1 view .LVU162
 505              		.cfi_endproc
 506              	.LFE288:
 508              		.section	.text.usbInitEndpointI,"ax",%progbits
 509              		.align	1
 510              		.global	usbInitEndpointI
 511              		.syntax unified
 512              		.thumb
 513              		.thumb_func
 515              	usbInitEndpointI:
 516              	.LVL30:
 517              	.LFB289:
 361:lib/chibios/os/hal/src/hal_usb.c **** 
 362:lib/chibios/os/hal/src/hal_usb.c **** /**
 363:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Enables an endpoint.
 364:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function enables an endpoint, both IN and/or OUT directions
 365:lib/chibios/os/hal/src/hal_usb.c ****  *          depending on the configuration structure.
 366:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function must be invoked in response of a SET_CONFIGURATION
 367:lib/chibios/os/hal/src/hal_usb.c ****  *          or SET_INTERFACE message.
 368:lib/chibios/os/hal/src/hal_usb.c ****  *
 369:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 370:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 371:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] epcp      the endpoint configuration
 372:lib/chibios/os/hal/src/hal_usb.c ****  *
 373:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 374:lib/chibios/os/hal/src/hal_usb.c ****  */
 375:lib/chibios/os/hal/src/hal_usb.c **** void usbInitEndpointI(USBDriver *usbp, usbep_t ep,
 376:lib/chibios/os/hal/src/hal_usb.c ****                       const USBEndpointConfig *epcp) {
 518              		.loc 1 376 54 is_stmt 1 view -0
 519              		.cfi_startproc
 520              		@ args = 0, pretend = 0, frame = 0
 521              		@ frame_needed = 0, uses_anonymous_args = 0
 377:lib/chibios/os/hal/src/hal_usb.c **** 
 378:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 522              		.loc 1 378 23 view .LVU164
 379:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (epcp != NULL));
 523              		.loc 1 379 3 view .LVU165
 524              		.loc 1 379 3 view .LVU166
 525              		.loc 1 379 3 view .LVU167
 380:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(usbp->state == USB_ACTIVE,
 526              		.loc 1 380 3 view .LVU168
 527              		.loc 1 380 3 view .LVU169
 528              		.loc 1 380 3 view .LVU170
 381:lib/chibios/os/hal/src/hal_usb.c ****                 "invalid state");
 382:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(usbp->epc[ep] == NULL, "already initialized");
 529              		.loc 1 382 3 view .LVU171
 530              		.loc 1 382 3 view .LVU172
 531              		.loc 1 382 3 view .LVU173
 383:lib/chibios/os/hal/src/hal_usb.c **** 
 384:lib/chibios/os/hal/src/hal_usb.c ****   /* Logically enabling the endpoint in the USBDriver structure.*/
 385:lib/chibios/os/hal/src/hal_usb.c ****   usbp->epc[ep] = epcp;
 532              		.loc 1 385 3 view .LVU174
 376:lib/chibios/os/hal/src/hal_usb.c **** 
 533              		.loc 1 376 54 is_stmt 0 view .LVU175
 534 0000 70B5     		push	{r4, r5, r6, lr}
 535              		.cfi_def_cfa_offset 16
 536              		.cfi_offset 4, -16
 537              		.cfi_offset 5, -12
 538              		.cfi_offset 6, -8
 539              		.cfi_offset 14, -4
 540              		.loc 1 385 17 view .LVU176
 541 0002 00EB8103 		add	r3, r0, r1, lsl #2
 376:lib/chibios/os/hal/src/hal_usb.c **** 
 542              		.loc 1 376 54 view .LVU177
 543 0006 0546     		mov	r5, r0
 386:lib/chibios/os/hal/src/hal_usb.c **** 
 387:lib/chibios/os/hal/src/hal_usb.c ****   /* Clearing the state structures, custom fields as well.*/
 388:lib/chibios/os/hal/src/hal_usb.c ****   if (epcp->in_state != NULL) {
 544              		.loc 1 388 11 view .LVU178
 545 0008 5069     		ldr	r0, [r2, #20]
 546              	.LVL31:
 385:lib/chibios/os/hal/src/hal_usb.c **** 
 547              		.loc 1 385 17 view .LVU179
 548 000a DA60     		str	r2, [r3, #12]
 549              		.loc 1 388 3 is_stmt 1 view .LVU180
 376:lib/chibios/os/hal/src/hal_usb.c **** 
 550              		.loc 1 376 54 is_stmt 0 view .LVU181
 551 000c 0E46     		mov	r6, r1
 552 000e 1446     		mov	r4, r2
 553              		.loc 1 388 6 view .LVU182
 554 0010 18B1     		cbz	r0, .L23
 389:lib/chibios/os/hal/src/hal_usb.c ****     memset(epcp->in_state, 0, sizeof(USBInEndpointState));
 555              		.loc 1 389 5 is_stmt 1 view .LVU183
 556 0012 1422     		movs	r2, #20
 557              	.LVL32:
 558              		.loc 1 389 5 is_stmt 0 view .LVU184
 559 0014 0021     		movs	r1, #0
 560              	.LVL33:
 561              		.loc 1 389 5 view .LVU185
 562 0016 FFF7FEFF 		bl	memset
 563              	.LVL34:
 564              	.L23:
 390:lib/chibios/os/hal/src/hal_usb.c ****   }
 391:lib/chibios/os/hal/src/hal_usb.c ****   if (epcp->out_state != NULL) {
 565              		.loc 1 391 3 is_stmt 1 view .LVU186
 566              		.loc 1 391 11 is_stmt 0 view .LVU187
 567 001a A069     		ldr	r0, [r4, #24]
 568              		.loc 1 391 6 view .LVU188
 569 001c 18B1     		cbz	r0, .L24
 392:lib/chibios/os/hal/src/hal_usb.c ****     memset(epcp->out_state, 0, sizeof(USBOutEndpointState));
 570              		.loc 1 392 5 is_stmt 1 view .LVU189
 571 001e 1422     		movs	r2, #20
 572 0020 0021     		movs	r1, #0
 573 0022 FFF7FEFF 		bl	memset
 574              	.LVL35:
 575              	.L24:
 393:lib/chibios/os/hal/src/hal_usb.c ****   }
 394:lib/chibios/os/hal/src/hal_usb.c **** 
 395:lib/chibios/os/hal/src/hal_usb.c ****   /* Low level endpoint activation.*/
 396:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_init_endpoint(usbp, ep);
 576              		.loc 1 396 3 view .LVU190
 577 0026 3146     		mov	r1, r6
 578 0028 2846     		mov	r0, r5
 397:lib/chibios/os/hal/src/hal_usb.c **** }
 579              		.loc 1 397 1 is_stmt 0 view .LVU191
 580 002a BDE87040 		pop	{r4, r5, r6, lr}
 581              		.cfi_restore 14
 582              		.cfi_restore 6
 583              		.cfi_restore 5
 584              		.cfi_restore 4
 585              		.cfi_def_cfa_offset 0
 586              	.LVL36:
 396:lib/chibios/os/hal/src/hal_usb.c **** }
 587              		.loc 1 396 3 view .LVU192
 588 002e FFF7FEBF 		b	usb_lld_init_endpoint
 589              	.LVL37:
 396:lib/chibios/os/hal/src/hal_usb.c **** }
 590              		.loc 1 396 3 view .LVU193
 591              		.cfi_endproc
 592              	.LFE289:
 594              		.section	.text.usbDisableEndpointsI,"ax",%progbits
 595              		.align	1
 596              		.global	usbDisableEndpointsI
 597              		.syntax unified
 598              		.thumb
 599              		.thumb_func
 601              	usbDisableEndpointsI:
 602              	.LVL38:
 603              	.LFB290:
 398:lib/chibios/os/hal/src/hal_usb.c **** 
 399:lib/chibios/os/hal/src/hal_usb.c **** /**
 400:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Disables all the active endpoints.
 401:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function disables all the active endpoints except the
 402:lib/chibios/os/hal/src/hal_usb.c ****  *          endpoint zero.
 403:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function must be invoked in response of a SET_CONFIGURATION
 404:lib/chibios/os/hal/src/hal_usb.c ****  *          message with configuration number zero.
 405:lib/chibios/os/hal/src/hal_usb.c ****  *
 406:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 407:lib/chibios/os/hal/src/hal_usb.c ****  *
 408:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 409:lib/chibios/os/hal/src/hal_usb.c ****  */
 410:lib/chibios/os/hal/src/hal_usb.c **** void usbDisableEndpointsI(USBDriver *usbp) {
 604              		.loc 1 410 44 is_stmt 1 view -0
 605              		.cfi_startproc
 606              		@ args = 0, pretend = 0, frame = 0
 607              		@ frame_needed = 0, uses_anonymous_args = 0
 411:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 608              		.loc 1 411 3 view .LVU195
 412:lib/chibios/os/hal/src/hal_usb.c **** 
 413:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 609              		.loc 1 413 23 view .LVU196
 414:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 610              		.loc 1 414 3 view .LVU197
 611              		.loc 1 414 3 view .LVU198
 612              		.loc 1 414 3 view .LVU199
 415:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(usbp->state == USB_ACTIVE, "invalid state");
 613              		.loc 1 415 3 view .LVU200
 614              		.loc 1 415 3 view .LVU201
 615              		.loc 1 415 3 view .LVU202
 416:lib/chibios/os/hal/src/hal_usb.c **** 
 417:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting &= 1U;
 616              		.loc 1 417 3 view .LVU203
 418:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    &= 1U;
 617              		.loc 1 418 3 view .LVU204
 410:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 618              		.loc 1 410 44 is_stmt 0 view .LVU205
 619 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 620              		.cfi_def_cfa_offset 24
 621              		.cfi_offset 3, -24
 622              		.cfi_offset 4, -20
 623              		.cfi_offset 5, -16
 624              		.cfi_offset 6, -12
 625              		.cfi_offset 7, -8
 626              		.cfi_offset 14, -4
 417:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    &= 1U;
 627              		.loc 1 417 22 view .LVU206
 628 0002 8368     		ldr	r3, [r0, #8]
 629 0004 03F00113 		and	r3, r3, #65537
 410:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 630              		.loc 1 410 44 view .LVU207
 631 0008 0446     		mov	r4, r0
 417:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving    &= 1U;
 632              		.loc 1 417 22 view .LVU208
 633 000a 8360     		str	r3, [r0, #8]
 419:lib/chibios/os/hal/src/hal_usb.c **** 
 420:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 1; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 634              		.loc 1 420 3 is_stmt 1 view .LVU209
 635              	.LVL39:
 636              		.loc 1 420 17 view .LVU210
 637 000c 00F10C05 		add	r5, r0, #12
 638 0010 00F12806 		add	r6, r0, #40
 421:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 422:lib/chibios/os/hal/src/hal_usb.c ****     /* Signaling the event to threads waiting on endpoints.*/
 423:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->epc[i] != NULL) {
 424:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 425:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 426:lib/chibios/os/hal/src/hal_usb.c ****       }
 427:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->out_state != NULL) {
 428:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 429:lib/chibios/os/hal/src/hal_usb.c ****       }
 430:lib/chibios/os/hal/src/hal_usb.c ****     }
 431:lib/chibios/os/hal/src/hal_usb.c **** #endif
 432:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 639              		.loc 1 432 18 is_stmt 0 view .LVU211
 640 0014 0027     		movs	r7, #0
 641              	.LVL40:
 642              	.L36:
 423:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 643              		.loc 1 423 5 is_stmt 1 view .LVU212
 423:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 644              		.loc 1 423 18 is_stmt 0 view .LVU213
 645 0016 55F8043F 		ldr	r3, [r5, #4]!
 423:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 646              		.loc 1 423 8 view .LVU214
 647 001a 73B1     		cbz	r3, .L33
 424:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 648              		.loc 1 424 7 is_stmt 1 view .LVU215
 424:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 649              		.loc 1 424 23 is_stmt 0 view .LVU216
 650 001c 5869     		ldr	r0, [r3, #20]
 424:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 651              		.loc 1 424 10 view .LVU217
 652 001e 20B1     		cbz	r0, .L34
 425:lib/chibios/os/hal/src/hal_usb.c ****       }
 653              		.loc 1 425 9 is_stmt 1 view .LVU218
 654              	.LVL41:
 655              	.LBB330:
 656              	.LBI330:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 657              		.loc 2 837 20 view .LVU219
 658              	.LBB331:
 659              		.loc 2 839 3 view .LVU220
 660 0020 6FF00101 		mvn	r1, #1
 661 0024 0C30     		adds	r0, r0, #12
 662              	.LVL42:
 663              		.loc 2 839 3 is_stmt 0 view .LVU221
 664 0026 FFF7FEFF 		bl	chThdResumeI
 665              	.LVL43:
 666              	.L34:
 667              		.loc 2 839 3 view .LVU222
 668              	.LBE331:
 669              	.LBE330:
 427:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 670              		.loc 1 427 7 is_stmt 1 view .LVU223
 427:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 671              		.loc 1 427 23 is_stmt 0 view .LVU224
 672 002a 2B68     		ldr	r3, [r5]
 673 002c 9869     		ldr	r0, [r3, #24]
 427:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 674              		.loc 1 427 10 view .LVU225
 675 002e 20B1     		cbz	r0, .L33
 428:lib/chibios/os/hal/src/hal_usb.c ****       }
 676              		.loc 1 428 9 is_stmt 1 view .LVU226
 677              	.LVL44:
 678              	.LBB332:
 679              	.LBI332:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 680              		.loc 2 837 20 view .LVU227
 681              	.LBB333:
 682              		.loc 2 839 3 view .LVU228
 683 0030 6FF00101 		mvn	r1, #1
 684 0034 0C30     		adds	r0, r0, #12
 685              	.LVL45:
 686              		.loc 2 839 3 is_stmt 0 view .LVU229
 687 0036 FFF7FEFF 		bl	chThdResumeI
 688              	.LVL46:
 689              	.L33:
 690              		.loc 2 839 3 view .LVU230
 691              	.LBE333:
 692              	.LBE332:
 693              		.loc 1 432 5 is_stmt 1 discriminator 2 view .LVU231
 420:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 694              		.loc 1 420 17 is_stmt 0 discriminator 2 view .LVU232
 695 003a B542     		cmp	r5, r6
 696              		.loc 1 432 18 discriminator 2 view .LVU233
 697 003c 2F60     		str	r7, [r5]
 420:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 698              		.loc 1 420 50 is_stmt 1 discriminator 2 view .LVU234
 420:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 699              		.loc 1 420 17 discriminator 2 view .LVU235
 700 003e EAD1     		bne	.L36
 433:lib/chibios/os/hal/src/hal_usb.c ****   }
 434:lib/chibios/os/hal/src/hal_usb.c **** 
 435:lib/chibios/os/hal/src/hal_usb.c ****   /* Low level endpoints deactivation.*/
 436:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_disable_endpoints(usbp);
 701              		.loc 1 436 3 view .LVU236
 702 0040 2046     		mov	r0, r4
 437:lib/chibios/os/hal/src/hal_usb.c **** }
 703              		.loc 1 437 1 is_stmt 0 view .LVU237
 704 0042 BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 705              		.cfi_restore 14
 706              		.cfi_restore 7
 707              		.cfi_restore 6
 708              		.cfi_restore 5
 709              		.cfi_restore 4
 710              		.cfi_restore 3
 711              		.cfi_def_cfa_offset 0
 712              	.LVL47:
 436:lib/chibios/os/hal/src/hal_usb.c **** }
 713              		.loc 1 436 3 view .LVU238
 714 0046 FFF7FEBF 		b	usb_lld_disable_endpoints
 715              	.LVL48:
 436:lib/chibios/os/hal/src/hal_usb.c **** }
 716              		.loc 1 436 3 view .LVU239
 717              		.cfi_endproc
 718              	.LFE290:
 720              		.section	.text.usbStartReceiveI,"ax",%progbits
 721              		.align	1
 722              		.global	usbStartReceiveI
 723              		.syntax unified
 724              		.thumb
 725              		.thumb_func
 727              	usbStartReceiveI:
 728              	.LVL49:
 729              	.LFB291:
 438:lib/chibios/os/hal/src/hal_usb.c **** 
 439:lib/chibios/os/hal/src/hal_usb.c **** /**
 440:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Starts a receive transaction on an OUT endpoint.
 441:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function is meant to be called from ISR context outside
 442:lib/chibios/os/hal/src/hal_usb.c ****  *          critical zones because there is a potentially slow operation
 443:lib/chibios/os/hal/src/hal_usb.c ****  *          inside.
 444:lib/chibios/os/hal/src/hal_usb.c ****  *
 445:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 446:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 447:lib/chibios/os/hal/src/hal_usb.c ****  * @param[out] buf      buffer where to copy the received data
 448:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size. It is recommended a multiple of
 449:lib/chibios/os/hal/src/hal_usb.c ****  *                      the packet size because the excess is discarded.
 450:lib/chibios/os/hal/src/hal_usb.c ****  *
 451:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 452:lib/chibios/os/hal/src/hal_usb.c ****  */
 453:lib/chibios/os/hal/src/hal_usb.c **** void usbStartReceiveI(USBDriver *usbp, usbep_t ep,
 454:lib/chibios/os/hal/src/hal_usb.c ****                       uint8_t *buf, size_t n) {
 730              		.loc 1 454 47 is_stmt 1 view -0
 731              		.cfi_startproc
 732              		@ args = 0, pretend = 0, frame = 0
 733              		@ frame_needed = 0, uses_anonymous_args = 0
 734              		@ link register save eliminated.
 455:lib/chibios/os/hal/src/hal_usb.c ****   USBOutEndpointState *osp;
 735              		.loc 1 455 3 view .LVU241
 456:lib/chibios/os/hal/src/hal_usb.c **** 
 457:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 736              		.loc 1 457 23 view .LVU242
 458:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (ep <= (usbep_t)USB_MAX_ENDPOINTS));
 737              		.loc 1 458 3 view .LVU243
 738              		.loc 1 458 3 view .LVU244
 739              		.loc 1 458 3 view .LVU245
 459:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(!usbGetReceiveStatusI(usbp, ep), "already receiving");
 740              		.loc 1 459 3 view .LVU246
 741              		.loc 1 459 3 view .LVU247
 742              		.loc 1 459 3 view .LVU248
 460:lib/chibios/os/hal/src/hal_usb.c **** 
 461:lib/chibios/os/hal/src/hal_usb.c ****   /* Marking the endpoint as active.*/
 462:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving |= (uint16_t)((unsigned)1U << (unsigned)ep);
 743              		.loc 1 462 3 view .LVU249
 454:lib/chibios/os/hal/src/hal_usb.c ****   USBOutEndpointState *osp;
 744              		.loc 1 454 47 is_stmt 0 view .LVU250
 745 0000 F0B4     		push	{r4, r5, r6, r7}
 746              		.cfi_def_cfa_offset 16
 747              		.cfi_offset 4, -16
 748              		.cfi_offset 5, -12
 749              		.cfi_offset 6, -8
 750              		.cfi_offset 7, -4
 463:lib/chibios/os/hal/src/hal_usb.c **** 
 464:lib/chibios/os/hal/src/hal_usb.c ****   /* Setting up the transfer.*/
 465:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -save -e661 [18.1] pclint is confused by the check on ep.*/
 466:lib/chibios/os/hal/src/hal_usb.c ****   osp = usbp->epc[ep]->out_state;
 751              		.loc 1 466 18 view .LVU251
 752 0002 00EB8104 		add	r4, r0, r1, lsl #2
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 753              		.loc 1 462 19 view .LVU252
 754 0006 4789     		ldrh	r7, [r0, #10]
 755              		.loc 1 466 7 view .LVU253
 756 0008 E468     		ldr	r4, [r4, #12]
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 757              		.loc 1 462 46 view .LVU254
 758 000a 0125     		movs	r5, #1
 759              		.loc 1 466 7 view .LVU255
 760 000c A469     		ldr	r4, [r4, #24]
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 761              		.loc 1 462 46 view .LVU256
 762 000e 8D40     		lsls	r5, r5, r1
 462:lib/chibios/os/hal/src/hal_usb.c **** 
 763              		.loc 1 462 19 view .LVU257
 764 0010 3D43     		orrs	r5, r5, r7
 765 0012 4581     		strh	r5, [r0, #10]	@ movhi
 766              		.loc 1 466 3 is_stmt 1 view .LVU258
 767              	.LVL50:
 467:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 468:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxbuf  = buf;
 768              		.loc 1 468 3 view .LVU259
 469:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxsize = n;
 769              		.loc 1 469 15 is_stmt 0 view .LVU260
 770 0014 2360     		str	r3, [r4]
 470:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxcnt  = 0;
 771              		.loc 1 470 15 view .LVU261
 772 0016 0023     		movs	r3, #0
 773              	.LVL51:
 468:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxsize = n;
 774              		.loc 1 468 15 view .LVU262
 775 0018 A260     		str	r2, [r4, #8]
 469:lib/chibios/os/hal/src/hal_usb.c ****   osp->rxsize = n;
 776              		.loc 1 469 3 is_stmt 1 view .LVU263
 777              		.loc 1 470 3 view .LVU264
 778              		.loc 1 470 15 is_stmt 0 view .LVU265
 779 001a 6360     		str	r3, [r4, #4]
 471:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 472:lib/chibios/os/hal/src/hal_usb.c ****   osp->thread = NULL;
 780              		.loc 1 472 3 is_stmt 1 view .LVU266
 781              		.loc 1 472 15 is_stmt 0 view .LVU267
 782 001c E360     		str	r3, [r4, #12]
 473:lib/chibios/os/hal/src/hal_usb.c **** #endif
 474:lib/chibios/os/hal/src/hal_usb.c **** 
 475:lib/chibios/os/hal/src/hal_usb.c ****   /* Starting transfer.*/
 476:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_start_out(usbp, ep);
 783              		.loc 1 476 3 is_stmt 1 view .LVU268
 477:lib/chibios/os/hal/src/hal_usb.c **** }
 784              		.loc 1 477 1 is_stmt 0 view .LVU269
 785 001e F0BC     		pop	{r4, r5, r6, r7}
 786              		.cfi_restore 7
 787              		.cfi_restore 6
 788              		.cfi_restore 5
 789              		.cfi_restore 4
 790              		.cfi_def_cfa_offset 0
 791              	.LVL52:
 476:lib/chibios/os/hal/src/hal_usb.c **** }
 792              		.loc 1 476 3 view .LVU270
 793 0020 FFF7FEBF 		b	usb_lld_start_out
 794              	.LVL53:
 476:lib/chibios/os/hal/src/hal_usb.c **** }
 795              		.loc 1 476 3 view .LVU271
 796              		.cfi_endproc
 797              	.LFE291:
 799              		.section	.text.usbStartTransmitI,"ax",%progbits
 800              		.align	1
 801              		.global	usbStartTransmitI
 802              		.syntax unified
 803              		.thumb
 804              		.thumb_func
 806              	usbStartTransmitI:
 807              	.LVL54:
 808              	.LFB292:
 478:lib/chibios/os/hal/src/hal_usb.c **** 
 479:lib/chibios/os/hal/src/hal_usb.c **** /**
 480:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Starts a transmit transaction on an IN endpoint.
 481:lib/chibios/os/hal/src/hal_usb.c ****  * @note    This function is meant to be called from ISR context outside
 482:lib/chibios/os/hal/src/hal_usb.c ****  *          critical zones because there is a potentially slow operation
 483:lib/chibios/os/hal/src/hal_usb.c ****  *          inside.
 484:lib/chibios/os/hal/src/hal_usb.c ****  *
 485:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 486:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 487:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] buf       buffer where to fetch the data to be transmitted
 488:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size
 489:lib/chibios/os/hal/src/hal_usb.c ****  *
 490:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 491:lib/chibios/os/hal/src/hal_usb.c ****  */
 492:lib/chibios/os/hal/src/hal_usb.c **** void usbStartTransmitI(USBDriver *usbp, usbep_t ep,
 493:lib/chibios/os/hal/src/hal_usb.c ****                        const uint8_t *buf, size_t n) {
 809              		.loc 1 493 54 is_stmt 1 view -0
 810              		.cfi_startproc
 811              		@ args = 0, pretend = 0, frame = 0
 812              		@ frame_needed = 0, uses_anonymous_args = 0
 813              		@ link register save eliminated.
 494:lib/chibios/os/hal/src/hal_usb.c ****   USBInEndpointState *isp;
 814              		.loc 1 494 3 view .LVU273
 495:lib/chibios/os/hal/src/hal_usb.c **** 
 496:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 815              		.loc 1 496 23 view .LVU274
 497:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck((usbp != NULL) && (ep <= (usbep_t)USB_MAX_ENDPOINTS));
 816              		.loc 1 497 3 view .LVU275
 817              		.loc 1 497 3 view .LVU276
 818              		.loc 1 497 3 view .LVU277
 498:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgAssert(!usbGetTransmitStatusI(usbp, ep), "already transmitting");
 819              		.loc 1 498 3 view .LVU278
 820              		.loc 1 498 3 view .LVU279
 821              		.loc 1 498 3 view .LVU280
 499:lib/chibios/os/hal/src/hal_usb.c **** 
 500:lib/chibios/os/hal/src/hal_usb.c ****   /* Marking the endpoint as active.*/
 501:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting |= (uint16_t)((unsigned)1U << (unsigned)ep);
 822              		.loc 1 501 3 view .LVU281
 493:lib/chibios/os/hal/src/hal_usb.c ****   USBInEndpointState *isp;
 823              		.loc 1 493 54 is_stmt 0 view .LVU282
 824 0000 F0B4     		push	{r4, r5, r6, r7}
 825              		.cfi_def_cfa_offset 16
 826              		.cfi_offset 4, -16
 827              		.cfi_offset 5, -12
 828              		.cfi_offset 6, -8
 829              		.cfi_offset 7, -4
 502:lib/chibios/os/hal/src/hal_usb.c **** 
 503:lib/chibios/os/hal/src/hal_usb.c ****   /* Setting up the transfer.*/
 504:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -save -e661 [18.1] pclint is confused by the check on ep.*/
 505:lib/chibios/os/hal/src/hal_usb.c ****   isp = usbp->epc[ep]->in_state;
 830              		.loc 1 505 18 view .LVU283
 831 0002 00EB8104 		add	r4, r0, r1, lsl #2
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 832              		.loc 1 501 22 view .LVU284
 833 0006 0789     		ldrh	r7, [r0, #8]
 834              		.loc 1 505 7 view .LVU285
 835 0008 E468     		ldr	r4, [r4, #12]
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 836              		.loc 1 501 49 view .LVU286
 837 000a 0125     		movs	r5, #1
 838              		.loc 1 505 7 view .LVU287
 839 000c 6469     		ldr	r4, [r4, #20]
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 840              		.loc 1 501 49 view .LVU288
 841 000e 8D40     		lsls	r5, r5, r1
 501:lib/chibios/os/hal/src/hal_usb.c **** 
 842              		.loc 1 501 22 view .LVU289
 843 0010 3D43     		orrs	r5, r5, r7
 844 0012 0581     		strh	r5, [r0, #8]	@ movhi
 845              		.loc 1 505 3 is_stmt 1 view .LVU290
 846              	.LVL55:
 506:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 507:lib/chibios/os/hal/src/hal_usb.c ****   isp->txbuf  = buf;
 847              		.loc 1 507 3 view .LVU291
 508:lib/chibios/os/hal/src/hal_usb.c ****   isp->txsize = n;
 848              		.loc 1 508 15 is_stmt 0 view .LVU292
 849 0014 2360     		str	r3, [r4]
 509:lib/chibios/os/hal/src/hal_usb.c ****   isp->txcnt  = 0;
 850              		.loc 1 509 15 view .LVU293
 851 0016 0023     		movs	r3, #0
 852              	.LVL56:
 507:lib/chibios/os/hal/src/hal_usb.c ****   isp->txsize = n;
 853              		.loc 1 507 15 view .LVU294
 854 0018 A260     		str	r2, [r4, #8]
 508:lib/chibios/os/hal/src/hal_usb.c ****   isp->txsize = n;
 855              		.loc 1 508 3 is_stmt 1 view .LVU295
 856              		.loc 1 509 3 view .LVU296
 857              		.loc 1 509 15 is_stmt 0 view .LVU297
 858 001a 6360     		str	r3, [r4, #4]
 510:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 511:lib/chibios/os/hal/src/hal_usb.c ****   isp->thread = NULL;
 859              		.loc 1 511 3 is_stmt 1 view .LVU298
 860              		.loc 1 511 15 is_stmt 0 view .LVU299
 861 001c E360     		str	r3, [r4, #12]
 512:lib/chibios/os/hal/src/hal_usb.c **** #endif
 513:lib/chibios/os/hal/src/hal_usb.c **** 
 514:lib/chibios/os/hal/src/hal_usb.c ****   /* Starting transfer.*/
 515:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_start_in(usbp, ep);
 862              		.loc 1 515 3 is_stmt 1 view .LVU300
 516:lib/chibios/os/hal/src/hal_usb.c **** }
 863              		.loc 1 516 1 is_stmt 0 view .LVU301
 864 001e F0BC     		pop	{r4, r5, r6, r7}
 865              		.cfi_restore 7
 866              		.cfi_restore 6
 867              		.cfi_restore 5
 868              		.cfi_restore 4
 869              		.cfi_def_cfa_offset 0
 870              	.LVL57:
 515:lib/chibios/os/hal/src/hal_usb.c **** }
 871              		.loc 1 515 3 view .LVU302
 872 0020 FFF7FEBF 		b	usb_lld_start_in
 873              	.LVL58:
 515:lib/chibios/os/hal/src/hal_usb.c **** }
 874              		.loc 1 515 3 view .LVU303
 875              		.cfi_endproc
 876              	.LFE292:
 878              		.section	.text.usbReceive,"ax",%progbits
 879              		.align	1
 880              		.global	usbReceive
 881              		.syntax unified
 882              		.thumb
 883              		.thumb_func
 885              	usbReceive:
 886              	.LVL59:
 887              	.LFB293:
 517:lib/chibios/os/hal/src/hal_usb.c **** 
 518:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_USE_WAIT == TRUE) || defined(__DOXYGEN__)
 519:lib/chibios/os/hal/src/hal_usb.c **** /**
 520:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Performs a receive transaction on an OUT endpoint.
 521:lib/chibios/os/hal/src/hal_usb.c ****  *
 522:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 523:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 524:lib/chibios/os/hal/src/hal_usb.c ****  * @param[out] buf      buffer where to copy the received data
 525:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size. It is recommended a multiple of
 526:lib/chibios/os/hal/src/hal_usb.c ****  *                      the packet size because the excess is discarded.
 527:lib/chibios/os/hal/src/hal_usb.c ****  *
 528:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The received effective data size, it can be less than
 529:lib/chibios/os/hal/src/hal_usb.c ****  *                      the amount specified.
 530:lib/chibios/os/hal/src/hal_usb.c ****  * @retval MSG_RESET    driver not in @p USB_ACTIVE state or the operation
 531:lib/chibios/os/hal/src/hal_usb.c ****  *                      has been aborted by an USB reset or a transition to
 532:lib/chibios/os/hal/src/hal_usb.c ****  *                      the @p USB_SUSPENDED state.
 533:lib/chibios/os/hal/src/hal_usb.c ****  *
 534:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 535:lib/chibios/os/hal/src/hal_usb.c ****  */
 536:lib/chibios/os/hal/src/hal_usb.c **** msg_t usbReceive(USBDriver *usbp, usbep_t ep, uint8_t *buf, size_t n) {
 888              		.loc 1 536 71 is_stmt 1 view -0
 889              		.cfi_startproc
 890              		@ args = 0, pretend = 0, frame = 0
 891              		@ frame_needed = 0, uses_anonymous_args = 0
 537:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 892              		.loc 1 537 3 view .LVU305
 538:lib/chibios/os/hal/src/hal_usb.c **** 
 539:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 893              		.loc 1 539 3 view .LVU306
 894              	.LBB353:
 895              	.LBI353:
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 896              		.loc 2 573 20 view .LVU307
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 897              		.loc 2 575 3 view .LVU308
 898              	.LBB354:
 899              	.LBI354:
 355:./lib/chibios/os/rt/include/chsys.h **** 
 900              		.loc 3 355 20 view .LVU309
 357:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 901              		.loc 3 357 3 view .LVU310
 902              	.LBB355:
 903              	.LBI355:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 904              		.loc 4 669 27 view .LVU311
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 905              		.loc 4 677 3 view .LVU312
 906              	.LBB356:
 907              	.LBI356:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 908              		.loc 5 491 27 view .LVU313
 909              	.LBB357:
 910              		.loc 5 493 3 view .LVU314
 911              	.LBE357:
 912              	.LBE356:
 913              	.LBE355:
 914              	.LBE354:
 915              	.LBE353:
 536:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 916              		.loc 1 536 71 is_stmt 0 view .LVU315
 917 0000 70B5     		push	{r4, r5, r6, lr}
 918              		.cfi_def_cfa_offset 16
 919              		.cfi_offset 4, -16
 920              		.cfi_offset 5, -12
 921              		.cfi_offset 6, -8
 922              		.cfi_offset 14, -4
 536:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 923              		.loc 1 536 71 view .LVU316
 924 0002 0446     		mov	r4, r0
 925 0004 0D46     		mov	r5, r1
 926              	.LBB362:
 927              	.LBB361:
 928              	.LBB360:
 929              	.LBB359:
 930              	.LBB358:
 931              		.loc 5 493 3 view .LVU317
 932 0006 2026     		movs	r6, #32
 933              		.syntax unified
 934              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 935 0008 86F31188 		MSR basepri, r6
 936              	@ 0 "" 2
 937              	.LVL60:
 938              		.loc 5 493 3 view .LVU318
 939              		.thumb
 940              		.syntax unified
 941              	.LBE358:
 942              	.LBE359:
 943              	.LBE360:
 358:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 944              		.loc 3 358 34 is_stmt 1 view .LVU319
 359:./lib/chibios/os/rt/include/chsys.h **** }
 945              		.loc 3 359 20 view .LVU320
 946              	.LBE361:
 947              	.LBE362:
 540:lib/chibios/os/hal/src/hal_usb.c **** 
 541:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetDriverStateI(usbp) != USB_ACTIVE) {
 948              		.loc 1 541 3 view .LVU321
 949              		.loc 1 541 6 is_stmt 0 view .LVU322
 950 000c 0678     		ldrb	r6, [r0]	@ zero_extendqisi2
 951 000e 042E     		cmp	r6, #4
 952 0010 05D0     		beq	.L47
 542:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlock();
 953              		.loc 1 542 5 is_stmt 1 view .LVU323
 954              	.LBB363:
 955              	.LBI363:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 956              		.loc 2 584 20 view .LVU324
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 957              		.loc 2 586 3 view .LVU325
 958              	.LBB364:
 959              	.LBI364:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 960              		.loc 3 367 20 view .LVU326
 961              	.LBB365:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 962              		.loc 3 369 22 view .LVU327
 370:./lib/chibios/os/rt/include/chsys.h **** 
 963              		.loc 3 370 33 view .LVU328
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 964              		.loc 3 376 3 view .LVU329
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 965              		.loc 3 376 3 view .LVU330
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 966              		.loc 3 376 3 view .LVU331
 967              		.loc 3 380 3 view .LVU332
 968              	.LBB366:
 969              	.LBI366:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 970              		.loc 4 693 27 view .LVU333
 971              		.loc 4 696 3 view .LVU334
 972              	.LVL61:
 973              	.LBB367:
 974              	.LBI367:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 975              		.loc 5 491 27 view .LVU335
 976              	.LBB368:
 977              		.loc 5 493 3 view .LVU336
 978 0012 0023     		movs	r3, #0
 979              	.LVL62:
 980              		.loc 5 493 3 is_stmt 0 view .LVU337
 981              		.syntax unified
 982              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 983 0014 83F31188 		MSR basepri, r3
 984              	@ 0 "" 2
 985              	.LVL63:
 986              		.loc 5 493 3 view .LVU338
 987              		.thumb
 988              		.syntax unified
 989              	.LBE368:
 990              	.LBE367:
 991              	.LBE366:
 992              	.LBE365:
 993              	.LBE364:
 994              	.LBE363:
 543:lib/chibios/os/hal/src/hal_usb.c ****     return MSG_RESET;
 995              		.loc 1 543 5 is_stmt 1 view .LVU339
 996              		.loc 1 543 12 is_stmt 0 view .LVU340
 997 0018 6FF00100 		mvn	r0, #1
 998              	.LVL64:
 999              	.L46:
 544:lib/chibios/os/hal/src/hal_usb.c ****   }
 545:lib/chibios/os/hal/src/hal_usb.c **** 
 546:lib/chibios/os/hal/src/hal_usb.c ****   usbStartReceiveI(usbp, ep, buf, n);
 547:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->out_state->thread);
 548:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 549:lib/chibios/os/hal/src/hal_usb.c **** 
 550:lib/chibios/os/hal/src/hal_usb.c ****   return msg;
 551:lib/chibios/os/hal/src/hal_usb.c **** }
 1000              		.loc 1 551 1 view .LVU341
 1001 001c 70BD     		pop	{r4, r5, r6, pc}
 1002              	.LVL65:
 1003              	.L47:
 546:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->out_state->thread);
 1004              		.loc 1 546 3 is_stmt 1 view .LVU342
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1005              		.loc 1 547 38 is_stmt 0 view .LVU343
 1006 001e 04EB8504 		add	r4, r4, r5, lsl #2
 546:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->out_state->thread);
 1007              		.loc 1 546 3 view .LVU344
 1008 0022 FFF7FEFF 		bl	usbStartReceiveI
 1009              	.LVL66:
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1010              		.loc 1 547 3 is_stmt 1 view .LVU345
 1011              	.LBB369:
 1012              	.LBI369:
 797:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1013              		.loc 2 797 21 view .LVU346
 1014              	.LBB370:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1015              		.loc 2 799 3 view .LVU347
 1016              	.LBE370:
 1017              	.LBE369:
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1018              		.loc 1 547 42 is_stmt 0 view .LVU348
 1019 0026 E368     		ldr	r3, [r4, #12]
 547:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1020              		.loc 1 547 9 view .LVU349
 1021 0028 9869     		ldr	r0, [r3, #24]
 1022              	.LBB372:
 1023              	.LBB371:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1024              		.loc 2 799 10 view .LVU350
 1025 002a 4FF0FF31 		mov	r1, #-1
 1026 002e 0C30     		adds	r0, r0, #12
 1027 0030 FFF7FEFF 		bl	chThdSuspendTimeoutS
 1028              	.LVL67:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1029              		.loc 2 799 10 view .LVU351
 1030              	.LBE371:
 1031              	.LBE372:
 548:lib/chibios/os/hal/src/hal_usb.c **** 
 1032              		.loc 1 548 3 is_stmt 1 view .LVU352
 1033              	.LBB373:
 1034              	.LBI373:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1035              		.loc 2 584 20 view .LVU353
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1036              		.loc 2 586 3 view .LVU354
 1037              	.LBB374:
 1038              	.LBI374:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 1039              		.loc 3 367 20 view .LVU355
 1040              	.LBB375:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 1041              		.loc 3 369 22 view .LVU356
 370:./lib/chibios/os/rt/include/chsys.h **** 
 1042              		.loc 3 370 33 view .LVU357
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1043              		.loc 3 376 3 view .LVU358
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1044              		.loc 3 376 3 view .LVU359
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1045              		.loc 3 376 3 view .LVU360
 1046              		.loc 3 380 3 view .LVU361
 1047              	.LBB376:
 1048              	.LBI376:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1049              		.loc 4 693 27 view .LVU362
 1050              		.loc 4 696 3 view .LVU363
 1051              	.LBB377:
 1052              	.LBI377:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1053              		.loc 5 491 27 view .LVU364
 1054              	.LBB378:
 1055              		.loc 5 493 3 view .LVU365
 1056 0034 0023     		movs	r3, #0
 1057              		.syntax unified
 1058              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1059 0036 83F31188 		MSR basepri, r3
 1060              	@ 0 "" 2
 1061              	.LVL68:
 1062              		.loc 5 493 3 is_stmt 0 view .LVU366
 1063              		.thumb
 1064              		.syntax unified
 1065              	.LBE378:
 1066              	.LBE377:
 1067              	.LBE376:
 1068              	.LBE375:
 1069              	.LBE374:
 1070              	.LBE373:
 550:lib/chibios/os/hal/src/hal_usb.c **** }
 1071              		.loc 1 550 3 is_stmt 1 view .LVU367
 550:lib/chibios/os/hal/src/hal_usb.c **** }
 1072              		.loc 1 550 10 is_stmt 0 view .LVU368
 1073 003a EFE7     		b	.L46
 1074              		.cfi_endproc
 1075              	.LFE293:
 1077              		.section	.text.usbTransmit,"ax",%progbits
 1078              		.align	1
 1079              		.global	usbTransmit
 1080              		.syntax unified
 1081              		.thumb
 1082              		.thumb_func
 1084              	usbTransmit:
 1085              	.LVL69:
 1086              	.LFB294:
 552:lib/chibios/os/hal/src/hal_usb.c **** 
 553:lib/chibios/os/hal/src/hal_usb.c **** /**
 554:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Performs a transmit transaction on an IN endpoint.
 555:lib/chibios/os/hal/src/hal_usb.c ****  *
 556:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 557:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 558:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] buf       buffer where to fetch the data to be transmitted
 559:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] n         transaction size
 560:lib/chibios/os/hal/src/hal_usb.c ****  *
 561:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The operation status.
 562:lib/chibios/os/hal/src/hal_usb.c ****  * @retval MSG_OK       operation performed successfully.
 563:lib/chibios/os/hal/src/hal_usb.c ****  * @retval MSG_RESET    driver not in @p USB_ACTIVE state or the operation
 564:lib/chibios/os/hal/src/hal_usb.c ****  *                      has been aborted by an USB reset or a transition to
 565:lib/chibios/os/hal/src/hal_usb.c ****  *                      the @p USB_SUSPENDED state.
 566:lib/chibios/os/hal/src/hal_usb.c ****  *
 567:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 568:lib/chibios/os/hal/src/hal_usb.c ****  */
 569:lib/chibios/os/hal/src/hal_usb.c **** msg_t usbTransmit(USBDriver *usbp, usbep_t ep, const uint8_t *buf, size_t n) {
 1087              		.loc 1 569 78 is_stmt 1 view -0
 1088              		.cfi_startproc
 1089              		@ args = 0, pretend = 0, frame = 0
 1090              		@ frame_needed = 0, uses_anonymous_args = 0
 570:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 1091              		.loc 1 570 3 view .LVU370
 571:lib/chibios/os/hal/src/hal_usb.c **** 
 572:lib/chibios/os/hal/src/hal_usb.c ****   osalSysLock();
 1092              		.loc 1 572 3 view .LVU371
 1093              	.LBB398:
 1094              	.LBI398:
 573:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1095              		.loc 2 573 20 view .LVU372
 575:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1096              		.loc 2 575 3 view .LVU373
 1097              	.LBB399:
 1098              	.LBI399:
 355:./lib/chibios/os/rt/include/chsys.h **** 
 1099              		.loc 3 355 20 view .LVU374
 357:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_thd();
 1100              		.loc 3 357 3 view .LVU375
 1101              	.LBB400:
 1102              	.LBI400:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1103              		.loc 4 669 27 view .LVU376
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 1104              		.loc 4 677 3 view .LVU377
 1105              	.LBB401:
 1106              	.LBI401:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1107              		.loc 5 491 27 view .LVU378
 1108              	.LBB402:
 1109              		.loc 5 493 3 view .LVU379
 1110              	.LBE402:
 1111              	.LBE401:
 1112              	.LBE400:
 1113              	.LBE399:
 1114              	.LBE398:
 569:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 1115              		.loc 1 569 78 is_stmt 0 view .LVU380
 1116 0000 70B5     		push	{r4, r5, r6, lr}
 1117              		.cfi_def_cfa_offset 16
 1118              		.cfi_offset 4, -16
 1119              		.cfi_offset 5, -12
 1120              		.cfi_offset 6, -8
 1121              		.cfi_offset 14, -4
 569:lib/chibios/os/hal/src/hal_usb.c ****   msg_t msg;
 1122              		.loc 1 569 78 view .LVU381
 1123 0002 0446     		mov	r4, r0
 1124 0004 0D46     		mov	r5, r1
 1125              	.LBB407:
 1126              	.LBB406:
 1127              	.LBB405:
 1128              	.LBB404:
 1129              	.LBB403:
 1130              		.loc 5 493 3 view .LVU382
 1131 0006 2026     		movs	r6, #32
 1132              		.syntax unified
 1133              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1134 0008 86F31188 		MSR basepri, r6
 1135              	@ 0 "" 2
 1136              	.LVL70:
 1137              		.loc 5 493 3 view .LVU383
 1138              		.thumb
 1139              		.syntax unified
 1140              	.LBE403:
 1141              	.LBE404:
 1142              	.LBE405:
 358:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock();
 1143              		.loc 3 358 34 is_stmt 1 view .LVU384
 359:./lib/chibios/os/rt/include/chsys.h **** }
 1144              		.loc 3 359 20 view .LVU385
 1145              	.LBE406:
 1146              	.LBE407:
 573:lib/chibios/os/hal/src/hal_usb.c **** 
 574:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetDriverStateI(usbp) != USB_ACTIVE) {
 1147              		.loc 1 574 3 view .LVU386
 1148              		.loc 1 574 6 is_stmt 0 view .LVU387
 1149 000c 0678     		ldrb	r6, [r0]	@ zero_extendqisi2
 1150 000e 042E     		cmp	r6, #4
 1151 0010 05D0     		beq	.L50
 575:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlock();
 1152              		.loc 1 575 5 is_stmt 1 view .LVU388
 1153              	.LBB408:
 1154              	.LBI408:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1155              		.loc 2 584 20 view .LVU389
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1156              		.loc 2 586 3 view .LVU390
 1157              	.LBB409:
 1158              	.LBI409:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 1159              		.loc 3 367 20 view .LVU391
 1160              	.LBB410:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 1161              		.loc 3 369 22 view .LVU392
 370:./lib/chibios/os/rt/include/chsys.h **** 
 1162              		.loc 3 370 33 view .LVU393
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1163              		.loc 3 376 3 view .LVU394
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1164              		.loc 3 376 3 view .LVU395
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1165              		.loc 3 376 3 view .LVU396
 1166              		.loc 3 380 3 view .LVU397
 1167              	.LBB411:
 1168              	.LBI411:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1169              		.loc 4 693 27 view .LVU398
 1170              		.loc 4 696 3 view .LVU399
 1171              	.LVL71:
 1172              	.LBB412:
 1173              	.LBI412:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1174              		.loc 5 491 27 view .LVU400
 1175              	.LBB413:
 1176              		.loc 5 493 3 view .LVU401
 1177 0012 0023     		movs	r3, #0
 1178              	.LVL72:
 1179              		.loc 5 493 3 is_stmt 0 view .LVU402
 1180              		.syntax unified
 1181              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1182 0014 83F31188 		MSR basepri, r3
 1183              	@ 0 "" 2
 1184              	.LVL73:
 1185              		.loc 5 493 3 view .LVU403
 1186              		.thumb
 1187              		.syntax unified
 1188              	.LBE413:
 1189              	.LBE412:
 1190              	.LBE411:
 1191              	.LBE410:
 1192              	.LBE409:
 1193              	.LBE408:
 576:lib/chibios/os/hal/src/hal_usb.c ****     return MSG_RESET;
 1194              		.loc 1 576 5 is_stmt 1 view .LVU404
 1195              		.loc 1 576 12 is_stmt 0 view .LVU405
 1196 0018 6FF00100 		mvn	r0, #1
 1197              	.LVL74:
 1198              	.L49:
 577:lib/chibios/os/hal/src/hal_usb.c ****   }
 578:lib/chibios/os/hal/src/hal_usb.c **** 
 579:lib/chibios/os/hal/src/hal_usb.c ****   usbStartTransmitI(usbp, ep, buf, n);
 580:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->in_state->thread);
 581:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 582:lib/chibios/os/hal/src/hal_usb.c **** 
 583:lib/chibios/os/hal/src/hal_usb.c ****   return msg;
 584:lib/chibios/os/hal/src/hal_usb.c **** }
 1199              		.loc 1 584 1 view .LVU406
 1200 001c 70BD     		pop	{r4, r5, r6, pc}
 1201              	.LVL75:
 1202              	.L50:
 579:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->in_state->thread);
 1203              		.loc 1 579 3 is_stmt 1 view .LVU407
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1204              		.loc 1 580 38 is_stmt 0 view .LVU408
 1205 001e 04EB8504 		add	r4, r4, r5, lsl #2
 579:lib/chibios/os/hal/src/hal_usb.c ****   msg = osalThreadSuspendS(&usbp->epc[ep]->in_state->thread);
 1206              		.loc 1 579 3 view .LVU409
 1207 0022 FFF7FEFF 		bl	usbStartTransmitI
 1208              	.LVL76:
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1209              		.loc 1 580 3 is_stmt 1 view .LVU410
 1210              	.LBB414:
 1211              	.LBI414:
 797:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1212              		.loc 2 797 21 view .LVU411
 1213              	.LBB415:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1214              		.loc 2 799 3 view .LVU412
 1215              	.LBE415:
 1216              	.LBE414:
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1217              		.loc 1 580 42 is_stmt 0 view .LVU413
 1218 0026 E368     		ldr	r3, [r4, #12]
 580:lib/chibios/os/hal/src/hal_usb.c ****   osalSysUnlock();
 1219              		.loc 1 580 9 view .LVU414
 1220 0028 5869     		ldr	r0, [r3, #20]
 1221              	.LBB417:
 1222              	.LBB416:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1223              		.loc 2 799 10 view .LVU415
 1224 002a 4FF0FF31 		mov	r1, #-1
 1225 002e 0C30     		adds	r0, r0, #12
 1226 0030 FFF7FEFF 		bl	chThdSuspendTimeoutS
 1227              	.LVL77:
 799:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1228              		.loc 2 799 10 view .LVU416
 1229              	.LBE416:
 1230              	.LBE417:
 581:lib/chibios/os/hal/src/hal_usb.c **** 
 1231              		.loc 1 581 3 is_stmt 1 view .LVU417
 1232              	.LBB418:
 1233              	.LBI418:
 584:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1234              		.loc 2 584 20 view .LVU418
 586:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1235              		.loc 2 586 3 view .LVU419
 1236              	.LBB419:
 1237              	.LBI419:
 367:./lib/chibios/os/rt/include/chsys.h **** 
 1238              		.loc 3 367 20 view .LVU420
 1239              	.LBB420:
 369:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_thd();
 1240              		.loc 3 369 22 view .LVU421
 370:./lib/chibios/os/rt/include/chsys.h **** 
 1241              		.loc 3 370 33 view .LVU422
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1242              		.loc 3 376 3 view .LVU423
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1243              		.loc 3 376 3 view .LVU424
 376:./lib/chibios/os/rt/include/chsys.h ****               (ch.rlist.current->hdr.pqueue.prio >= ch.rlist.pqueue.next->prio),
 1244              		.loc 3 376 3 view .LVU425
 1245              		.loc 3 380 3 view .LVU426
 1246              	.LBB421:
 1247              	.LBI421:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1248              		.loc 4 693 27 view .LVU427
 1249              		.loc 4 696 3 view .LVU428
 1250              	.LBB422:
 1251              	.LBI422:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1252              		.loc 5 491 27 view .LVU429
 1253              	.LBB423:
 1254              		.loc 5 493 3 view .LVU430
 1255 0034 0023     		movs	r3, #0
 1256              		.syntax unified
 1257              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1258 0036 83F31188 		MSR basepri, r3
 1259              	@ 0 "" 2
 1260              	.LVL78:
 1261              		.loc 5 493 3 is_stmt 0 view .LVU431
 1262              		.thumb
 1263              		.syntax unified
 1264              	.LBE423:
 1265              	.LBE422:
 1266              	.LBE421:
 1267              	.LBE420:
 1268              	.LBE419:
 1269              	.LBE418:
 583:lib/chibios/os/hal/src/hal_usb.c **** }
 1270              		.loc 1 583 3 is_stmt 1 view .LVU432
 583:lib/chibios/os/hal/src/hal_usb.c **** }
 1271              		.loc 1 583 10 is_stmt 0 view .LVU433
 1272 003a EFE7     		b	.L49
 1273              		.cfi_endproc
 1274              	.LFE294:
 1276              		.section	.text.usbStallReceiveI,"ax",%progbits
 1277              		.align	1
 1278              		.global	usbStallReceiveI
 1279              		.syntax unified
 1280              		.thumb
 1281              		.thumb_func
 1283              	usbStallReceiveI:
 1284              	.LVL79:
 1285              	.LFB295:
 585:lib/chibios/os/hal/src/hal_usb.c **** #endif /* USB_USE_WAIT == TRUE */
 586:lib/chibios/os/hal/src/hal_usb.c **** 
 587:lib/chibios/os/hal/src/hal_usb.c **** /**
 588:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Stalls an OUT endpoint.
 589:lib/chibios/os/hal/src/hal_usb.c ****  *
 590:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 591:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 592:lib/chibios/os/hal/src/hal_usb.c ****  *
 593:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The operation status.
 594:lib/chibios/os/hal/src/hal_usb.c ****  * @retval false        Endpoint stalled.
 595:lib/chibios/os/hal/src/hal_usb.c ****  * @retval true         Endpoint busy, not stalled.
 596:lib/chibios/os/hal/src/hal_usb.c ****  *
 597:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 598:lib/chibios/os/hal/src/hal_usb.c ****  */
 599:lib/chibios/os/hal/src/hal_usb.c **** bool usbStallReceiveI(USBDriver *usbp, usbep_t ep) {
 1286              		.loc 1 599 52 is_stmt 1 view -0
 1287              		.cfi_startproc
 1288              		@ args = 0, pretend = 0, frame = 0
 1289              		@ frame_needed = 0, uses_anonymous_args = 0
 600:lib/chibios/os/hal/src/hal_usb.c **** 
 601:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 1290              		.loc 1 601 23 view .LVU435
 602:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 1291              		.loc 1 602 3 view .LVU436
 1292              		.loc 1 602 3 view .LVU437
 1293              		.loc 1 602 3 view .LVU438
 603:lib/chibios/os/hal/src/hal_usb.c **** 
 604:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetReceiveStatusI(usbp, ep)) {
 1294              		.loc 1 604 3 view .LVU439
 599:lib/chibios/os/hal/src/hal_usb.c **** 
 1295              		.loc 1 599 52 is_stmt 0 view .LVU440
 1296 0000 10B5     		push	{r4, lr}
 1297              		.cfi_def_cfa_offset 8
 1298              		.cfi_offset 4, -8
 1299              		.cfi_offset 14, -4
 1300              		.loc 1 604 7 view .LVU441
 1301 0002 0122     		movs	r2, #1
 1302 0004 4489     		ldrh	r4, [r0, #10]
 1303 0006 02FA01F3 		lsl	r3, r2, r1
 1304              		.loc 1 604 6 view .LVU442
 1305 000a 1C40     		ands	r4, r3, r4
 1306 000c 03D1     		bne	.L54
 605:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 606:lib/chibios/os/hal/src/hal_usb.c ****   }
 607:lib/chibios/os/hal/src/hal_usb.c **** 
 608:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_stall_out(usbp, ep);
 1307              		.loc 1 608 3 is_stmt 1 view .LVU443
 1308 000e FFF7FEFF 		bl	usb_lld_stall_out
 1309              	.LVL80:
 609:lib/chibios/os/hal/src/hal_usb.c ****   return false;
 1310              		.loc 1 609 3 view .LVU444
 1311              		.loc 1 609 10 is_stmt 0 view .LVU445
 1312 0012 2046     		mov	r0, r4
 1313              	.L53:
 610:lib/chibios/os/hal/src/hal_usb.c **** }
 1314              		.loc 1 610 1 view .LVU446
 1315 0014 10BD     		pop	{r4, pc}
 1316              	.LVL81:
 1317              	.L54:
 605:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1318              		.loc 1 605 12 view .LVU447
 1319 0016 1046     		mov	r0, r2
 1320              	.LVL82:
 605:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1321              		.loc 1 605 12 view .LVU448
 1322 0018 FCE7     		b	.L53
 1323              		.cfi_endproc
 1324              	.LFE295:
 1326              		.section	.text.usbStallTransmitI,"ax",%progbits
 1327              		.align	1
 1328              		.global	usbStallTransmitI
 1329              		.syntax unified
 1330              		.thumb
 1331              		.thumb_func
 1333              	usbStallTransmitI:
 1334              	.LVL83:
 1335              	.LFB296:
 611:lib/chibios/os/hal/src/hal_usb.c **** 
 612:lib/chibios/os/hal/src/hal_usb.c **** /**
 613:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Stalls an IN endpoint.
 614:lib/chibios/os/hal/src/hal_usb.c ****  *
 615:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 616:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number
 617:lib/chibios/os/hal/src/hal_usb.c ****  *
 618:lib/chibios/os/hal/src/hal_usb.c ****  * @return              The operation status.
 619:lib/chibios/os/hal/src/hal_usb.c ****  * @retval false        Endpoint stalled.
 620:lib/chibios/os/hal/src/hal_usb.c ****  * @retval true         Endpoint busy, not stalled.
 621:lib/chibios/os/hal/src/hal_usb.c ****  *
 622:lib/chibios/os/hal/src/hal_usb.c ****  * @iclass
 623:lib/chibios/os/hal/src/hal_usb.c ****  */
 624:lib/chibios/os/hal/src/hal_usb.c **** bool usbStallTransmitI(USBDriver *usbp, usbep_t ep) {
 1336              		.loc 1 624 53 is_stmt 1 view -0
 1337              		.cfi_startproc
 1338              		@ args = 0, pretend = 0, frame = 0
 1339              		@ frame_needed = 0, uses_anonymous_args = 0
 625:lib/chibios/os/hal/src/hal_usb.c **** 
 626:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheckClassI();
 1340              		.loc 1 626 23 view .LVU450
 627:lib/chibios/os/hal/src/hal_usb.c ****   osalDbgCheck(usbp != NULL);
 1341              		.loc 1 627 3 view .LVU451
 1342              		.loc 1 627 3 view .LVU452
 1343              		.loc 1 627 3 view .LVU453
 628:lib/chibios/os/hal/src/hal_usb.c **** 
 629:lib/chibios/os/hal/src/hal_usb.c ****   if (usbGetTransmitStatusI(usbp, ep)) {
 1344              		.loc 1 629 3 view .LVU454
 624:lib/chibios/os/hal/src/hal_usb.c **** 
 1345              		.loc 1 624 53 is_stmt 0 view .LVU455
 1346 0000 10B5     		push	{r4, lr}
 1347              		.cfi_def_cfa_offset 8
 1348              		.cfi_offset 4, -8
 1349              		.cfi_offset 14, -4
 1350              		.loc 1 629 7 view .LVU456
 1351 0002 0122     		movs	r2, #1
 1352 0004 0489     		ldrh	r4, [r0, #8]
 1353 0006 02FA01F3 		lsl	r3, r2, r1
 1354              		.loc 1 629 6 view .LVU457
 1355 000a 1C40     		ands	r4, r3, r4
 1356 000c 03D1     		bne	.L57
 630:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 631:lib/chibios/os/hal/src/hal_usb.c ****   }
 632:lib/chibios/os/hal/src/hal_usb.c **** 
 633:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_stall_in(usbp, ep);
 1357              		.loc 1 633 3 is_stmt 1 view .LVU458
 1358 000e FFF7FEFF 		bl	usb_lld_stall_in
 1359              	.LVL84:
 634:lib/chibios/os/hal/src/hal_usb.c ****   return false;
 1360              		.loc 1 634 3 view .LVU459
 1361              		.loc 1 634 10 is_stmt 0 view .LVU460
 1362 0012 2046     		mov	r0, r4
 1363              	.L56:
 635:lib/chibios/os/hal/src/hal_usb.c **** }
 1364              		.loc 1 635 1 view .LVU461
 1365 0014 10BD     		pop	{r4, pc}
 1366              	.LVL85:
 1367              	.L57:
 630:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1368              		.loc 1 630 12 view .LVU462
 1369 0016 1046     		mov	r0, r2
 1370              	.LVL86:
 630:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 1371              		.loc 1 630 12 view .LVU463
 1372 0018 FCE7     		b	.L56
 1373              		.cfi_endproc
 1374              	.LFE296:
 1376              		.section	.text.usbWakeupHost,"ax",%progbits
 1377              		.align	1
 1378              		.global	usbWakeupHost
 1379              		.syntax unified
 1380              		.thumb
 1381              		.thumb_func
 1383              	usbWakeupHost:
 1384              	.LVL87:
 1385              	.LFB297:
 636:lib/chibios/os/hal/src/hal_usb.c **** 
 637:lib/chibios/os/hal/src/hal_usb.c **** /**
 638:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Host wake-up procedure.
 639:lib/chibios/os/hal/src/hal_usb.c ****  * @note    It is silently ignored if the USB device is not in the
 640:lib/chibios/os/hal/src/hal_usb.c ****  *          @p USB_SUSPENDED state.
 641:lib/chibios/os/hal/src/hal_usb.c ****  *
 642:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 643:lib/chibios/os/hal/src/hal_usb.c ****  *
 644:lib/chibios/os/hal/src/hal_usb.c ****  * @api
 645:lib/chibios/os/hal/src/hal_usb.c ****  */
 646:lib/chibios/os/hal/src/hal_usb.c **** void usbWakeupHost(USBDriver *usbp) {
 1386              		.loc 1 646 37 is_stmt 1 view -0
 1387              		.cfi_startproc
 1388              		@ args = 0, pretend = 0, frame = 0
 1389              		@ frame_needed = 0, uses_anonymous_args = 0
 647:lib/chibios/os/hal/src/hal_usb.c **** 
 648:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->state == USB_SUSPENDED) {
 1390              		.loc 1 648 3 view .LVU465
 646:lib/chibios/os/hal/src/hal_usb.c **** 
 1391              		.loc 1 646 37 is_stmt 0 view .LVU466
 1392 0000 10B5     		push	{r4, lr}
 1393              		.cfi_def_cfa_offset 8
 1394              		.cfi_offset 4, -8
 1395              		.cfi_offset 14, -4
 1396              		.loc 1 648 6 view .LVU467
 1397 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1398 0004 052B     		cmp	r3, #5
 1399 0006 0BD1     		bne	.L58
 649:lib/chibios/os/hal/src/hal_usb.c ****     /* Starting host wakeup procedure.*/
 650:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_wakeup_host(usbp);
 1400              		.loc 1 650 5 is_stmt 1 view .LVU468
 1401              		.loc 1 650 5 view .LVU469
 1402 0008 064C     		ldr	r4, .L60
 1403 000a 236C     		ldr	r3, [r4, #64]
 1404 000c 43F01003 		orr	r3, r3, #16
 1405 0010 2364     		str	r3, [r4, #64]
 1406              		.loc 1 650 5 view .LVU470
 1407              	.LVL88:
 1408              	.LBB424:
 1409              	.LBI424:
 782:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1410              		.loc 2 782 20 view .LVU471
 1411              	.LBB425:
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1412              		.loc 2 784 3 view .LVU472
 1413 0012 1420     		movs	r0, #20
 1414              	.LVL89:
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1415              		.loc 2 784 3 is_stmt 0 view .LVU473
 1416 0014 FFF7FEFF 		bl	chThdSleep
 1417              	.LVL90:
 784:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1418              		.loc 2 784 3 view .LVU474
 1419              	.LBE425:
 1420              	.LBE424:
 1421              		.loc 1 650 5 is_stmt 1 view .LVU475
 1422 0018 236C     		ldr	r3, [r4, #64]
 1423 001a 23F01003 		bic	r3, r3, #16
 1424 001e 2364     		str	r3, [r4, #64]
 1425              		.loc 1 650 5 view .LVU476
 1426              	.L58:
 651:lib/chibios/os/hal/src/hal_usb.c ****   }
 652:lib/chibios/os/hal/src/hal_usb.c **** }
 1427              		.loc 1 652 1 is_stmt 0 view .LVU477
 1428 0020 10BD     		pop	{r4, pc}
 1429              	.L61:
 1430 0022 00BF     		.align	2
 1431              	.L60:
 1432 0024 005C0040 		.word	1073765376
 1433              		.cfi_endproc
 1434              	.LFE297:
 1436              		.section	.text._usb_reset,"ax",%progbits
 1437              		.align	1
 1438              		.global	_usb_reset
 1439              		.syntax unified
 1440              		.thumb
 1441              		.thumb_func
 1443              	_usb_reset:
 1444              	.LVL91:
 1445              	.LFB298:
 653:lib/chibios/os/hal/src/hal_usb.c **** 
 654:lib/chibios/os/hal/src/hal_usb.c **** /**
 655:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB reset routine.
 656:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function must be invoked when an USB bus reset condition is
 657:lib/chibios/os/hal/src/hal_usb.c ****  *          detected.
 658:lib/chibios/os/hal/src/hal_usb.c ****  *
 659:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 660:lib/chibios/os/hal/src/hal_usb.c ****  *
 661:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 662:lib/chibios/os/hal/src/hal_usb.c ****  */
 663:lib/chibios/os/hal/src/hal_usb.c **** void _usb_reset(USBDriver *usbp) {
 1446              		.loc 1 663 34 is_stmt 1 view -0
 1447              		.cfi_startproc
 1448              		@ args = 0, pretend = 0, frame = 0
 1449              		@ frame_needed = 0, uses_anonymous_args = 0
 664:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 1450              		.loc 1 664 3 view .LVU479
 665:lib/chibios/os/hal/src/hal_usb.c **** 
 666:lib/chibios/os/hal/src/hal_usb.c ****   /* State transition.*/
 667:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state         = USB_READY;
 1451              		.loc 1 667 3 view .LVU480
 663:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 1452              		.loc 1 663 34 is_stmt 0 view .LVU481
 1453 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1454              		.cfi_def_cfa_offset 32
 1455              		.cfi_offset 4, -32
 1456              		.cfi_offset 5, -28
 1457              		.cfi_offset 6, -24
 1458              		.cfi_offset 7, -20
 1459              		.cfi_offset 8, -16
 1460              		.cfi_offset 9, -12
 1461              		.cfi_offset 10, -8
 1462              		.cfi_offset 14, -4
 668:lib/chibios/os/hal/src/hal_usb.c **** 
 669:lib/chibios/os/hal/src/hal_usb.c ****   /* Resetting internal state.*/
 670:lib/chibios/os/hal/src/hal_usb.c ****   usbp->status        = 0;
 671:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address       = 0;
 672:lib/chibios/os/hal/src/hal_usb.c ****   usbp->configuration = 0;
 673:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting  = 0;
 1463              		.loc 1 673 23 view .LVU482
 1464 0004 0546     		mov	r5, r0
 670:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address       = 0;
 1465              		.loc 1 670 23 view .LVU483
 1466 0006 0026     		movs	r6, #0
 667:lib/chibios/os/hal/src/hal_usb.c **** 
 1467              		.loc 1 667 23 view .LVU484
 1468 0008 0223     		movs	r3, #2
 1469 000a 0370     		strb	r3, [r0]
 670:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address       = 0;
 1470              		.loc 1 670 3 is_stmt 1 view .LVU485
 671:lib/chibios/os/hal/src/hal_usb.c ****   usbp->configuration = 0;
 1471              		.loc 1 671 3 view .LVU486
 672:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting  = 0;
 1472              		.loc 1 672 3 view .LVU487
 670:lib/chibios/os/hal/src/hal_usb.c ****   usbp->address       = 0;
 1473              		.loc 1 670 23 is_stmt 0 view .LVU488
 1474 000c C667     		str	r6, [r0, #124]
 1475              		.loc 1 673 3 is_stmt 1 view .LVU489
 674:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving     = 0;
 1476              		.loc 1 674 3 view .LVU490
 673:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving     = 0;
 1477              		.loc 1 673 23 is_stmt 0 view .LVU491
 1478 000e 45F8086F 		str	r6, [r5, #8]!
 675:lib/chibios/os/hal/src/hal_usb.c **** 
 676:lib/chibios/os/hal/src/hal_usb.c ****   /* Invalidates all endpoints into the USBDriver structure.*/
 677:lib/chibios/os/hal/src/hal_usb.c ****   for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 1479              		.loc 1 677 3 is_stmt 1 view .LVU492
 1480              	.LVL92:
 1481              		.loc 1 677 17 view .LVU493
 663:lib/chibios/os/hal/src/hal_usb.c ****   unsigned i;
 1482              		.loc 1 663 34 is_stmt 0 view .LVU494
 1483 0012 0446     		mov	r4, r0
 1484 0014 00F12807 		add	r7, r0, #40
 1485              	.LBB426:
 1486              	.LBB427:
 1487              	.LBB428:
 1488              	.LBB429:
 1489              	.LBB430:
 1490              	.LBB431:
 1491              		.loc 5 493 3 view .LVU495
 1492 0018 4FF02008 		mov	r8, #32
 1493              	.LBE431:
 1494              	.LBE430:
 1495              	.LBE429:
 1496              	.LBE428:
 1497              	.LBE427:
 1498              	.LBE426:
 1499              	.LBB437:
 1500              	.LBB438:
 1501              	.LBB439:
 1502              	.LBB440:
 1503              	.LBB441:
 1504              	.LBB442:
 1505              	.LBB443:
 1506 001c B146     		mov	r9, r6
 1507              	.LVL93:
 1508              	.L66:
 1509              		.loc 5 493 3 view .LVU496
 1510              	.LBE443:
 1511              	.LBE442:
 1512              	.LBE441:
 1513              	.LBE440:
 1514              	.LBE439:
 1515              	.LBE438:
 1516              	.LBE437:
 678:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 679:lib/chibios/os/hal/src/hal_usb.c ****     /* Signaling the event to threads waiting on endpoints.*/
 680:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->epc[i] != NULL) {
 1517              		.loc 1 680 5 is_stmt 1 view .LVU497
 1518              		.loc 1 680 8 is_stmt 0 view .LVU498
 1519 001e 55F8043F 		ldr	r3, [r5, #4]!
 1520 0022 9BB1     		cbz	r3, .L63
 681:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 1521              		.loc 1 681 7 is_stmt 1 view .LVU499
 1522              	.LBB450:
 1523              	.LBI426:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1524              		.loc 2 595 20 view .LVU500
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1525              		.loc 2 597 3 view .LVU501
 1526              	.LBB436:
 1527              	.LBI427:
 381:./lib/chibios/os/rt/include/chsys.h **** }
 382:./lib/chibios/os/rt/include/chsys.h **** 
 383:./lib/chibios/os/rt/include/chsys.h **** /**
 384:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Enters the kernel lock state from within an interrupt handler.
 385:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API may do nothing on some architectures, it is required
 386:./lib/chibios/os/rt/include/chsys.h ****  *          because on ports that support preemptable interrupt handlers
 387:./lib/chibios/os/rt/include/chsys.h ****  *          it is required to raise the interrupt mask to the same level of
 388:./lib/chibios/os/rt/include/chsys.h ****  *          the system mutual exclusion zone.<br>
 389:./lib/chibios/os/rt/include/chsys.h ****  *          It is good practice to invoke this API before invoking any I-class
 390:./lib/chibios/os/rt/include/chsys.h ****  *          syscall from an interrupt handler.
 391:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API must be invoked exclusively from interrupt handlers.
 392:./lib/chibios/os/rt/include/chsys.h ****  *
 393:./lib/chibios/os/rt/include/chsys.h ****  * @special
 394:./lib/chibios/os/rt/include/chsys.h ****  */
 395:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysLockFromISR(void) {
 1528              		.loc 3 395 20 view .LVU502
 396:./lib/chibios/os/rt/include/chsys.h **** 
 397:./lib/chibios/os/rt/include/chsys.h ****   port_lock_from_isr();
 1529              		.loc 3 397 3 view .LVU503
 1530              	.LBB435:
 1531              	.LBI428:
 697:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 698:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   __enable_irq();
 699:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #endif /* CORTEX_SIMPLIFIED_PRIORITY */
 700:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 701:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 702:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 703:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-lock action from an interrupt handler.
 704:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function raises the base priority to kernel
 705:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 706:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Same as @p port_lock() in this port.
 707:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_lock_from_isr(void) {
 1532              		.loc 4 708 27 view .LVU504
 709:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   port_lock();
 1533              		.loc 4 710 3 view .LVU505
 1534              	.LBB434:
 1535              	.LBI429:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1536              		.loc 4 669 27 view .LVU506
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 1537              		.loc 4 677 3 view .LVU507
 1538              	.LVL94:
 1539              	.LBB433:
 1540              	.LBI430:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1541              		.loc 5 491 27 view .LVU508
 1542              	.LBB432:
 1543              		.loc 5 493 3 view .LVU509
 1544              		.syntax unified
 1545              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1546 0024 88F31188 		MSR basepri, r8
 1547              	@ 0 "" 2
 1548              	.LVL95:
 1549              		.loc 5 493 3 is_stmt 0 view .LVU510
 1550              		.thumb
 1551              		.syntax unified
 1552              	.LBE432:
 1553              	.LBE433:
 1554              	.LBE434:
 1555              	.LBE435:
 398:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 1556              		.loc 3 398 34 is_stmt 1 view .LVU511
 399:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 1557              		.loc 3 399 29 view .LVU512
 1558              	.LBE436:
 1559              	.LBE450:
 682:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->in_state != NULL) {
 1560              		.loc 1 682 7 view .LVU513
 1561              		.loc 1 682 23 is_stmt 0 view .LVU514
 1562 0028 2B68     		ldr	r3, [r5]
 1563 002a 5869     		ldr	r0, [r3, #20]
 1564              		.loc 1 682 10 view .LVU515
 1565 002c 20B1     		cbz	r0, .L64
 683:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 1566              		.loc 1 683 9 is_stmt 1 view .LVU516
 1567              	.LVL96:
 1568              	.LBB451:
 1569              	.LBI451:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1570              		.loc 2 837 20 view .LVU517
 1571              	.LBB452:
 1572              		.loc 2 839 3 view .LVU518
 1573 002e 6FF00101 		mvn	r1, #1
 1574 0032 0C30     		adds	r0, r0, #12
 1575              	.LVL97:
 1576              		.loc 2 839 3 is_stmt 0 view .LVU519
 1577 0034 FFF7FEFF 		bl	chThdResumeI
 1578              	.LVL98:
 1579              	.L64:
 1580              		.loc 2 839 3 view .LVU520
 1581              	.LBE452:
 1582              	.LBE451:
 684:lib/chibios/os/hal/src/hal_usb.c ****       }
 685:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i]->out_state != NULL) {
 1583              		.loc 1 685 7 is_stmt 1 view .LVU521
 1584              		.loc 1 685 23 is_stmt 0 view .LVU522
 1585 0038 2B68     		ldr	r3, [r5]
 1586 003a 9869     		ldr	r0, [r3, #24]
 1587              		.loc 1 685 10 view .LVU523
 1588 003c 20B1     		cbz	r0, .L65
 686:lib/chibios/os/hal/src/hal_usb.c ****         osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 1589              		.loc 1 686 9 is_stmt 1 view .LVU524
 1590              	.LVL99:
 1591              	.LBB453:
 1592              	.LBI453:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1593              		.loc 2 837 20 view .LVU525
 1594              	.LBB454:
 1595              		.loc 2 839 3 view .LVU526
 1596 003e 6FF00101 		mvn	r1, #1
 1597 0042 0C30     		adds	r0, r0, #12
 1598              	.LVL100:
 1599              		.loc 2 839 3 is_stmt 0 view .LVU527
 1600 0044 FFF7FEFF 		bl	chThdResumeI
 1601              	.LVL101:
 1602              	.L65:
 1603              		.loc 2 839 3 view .LVU528
 1604              	.LBE454:
 1605              	.LBE453:
 687:lib/chibios/os/hal/src/hal_usb.c ****       }
 688:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 1606              		.loc 1 688 7 is_stmt 1 view .LVU529
 1607              	.LBB455:
 1608              	.LBI437:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1609              		.loc 2 606 20 view .LVU530
 1610              	.LBB449:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1611              		.loc 2 608 3 view .LVU531
 1612              	.LBB448:
 1613              	.LBI439:
 400:./lib/chibios/os/rt/include/chsys.h **** }
 401:./lib/chibios/os/rt/include/chsys.h **** 
 402:./lib/chibios/os/rt/include/chsys.h **** /**
 403:./lib/chibios/os/rt/include/chsys.h ****  * @brief   Leaves the kernel lock state from within an interrupt handler.
 404:./lib/chibios/os/rt/include/chsys.h ****  *
 405:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API may do nothing on some architectures, it is required
 406:./lib/chibios/os/rt/include/chsys.h ****  *          because on ports that support preemptable interrupt handlers
 407:./lib/chibios/os/rt/include/chsys.h ****  *          it is required to raise the interrupt mask to the same level of
 408:./lib/chibios/os/rt/include/chsys.h ****  *          the system mutual exclusion zone.<br>
 409:./lib/chibios/os/rt/include/chsys.h ****  *          It is good practice to invoke this API after invoking any I-class
 410:./lib/chibios/os/rt/include/chsys.h ****  *          syscall from an interrupt handler.
 411:./lib/chibios/os/rt/include/chsys.h ****  * @note    This API must be invoked exclusively from interrupt handlers.
 412:./lib/chibios/os/rt/include/chsys.h ****  *
 413:./lib/chibios/os/rt/include/chsys.h ****  * @special
 414:./lib/chibios/os/rt/include/chsys.h ****  */
 415:./lib/chibios/os/rt/include/chsys.h **** static inline void chSysUnlockFromISR(void) {
 1614              		.loc 3 415 20 view .LVU532
 416:./lib/chibios/os/rt/include/chsys.h **** 
 417:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_unlock_from_isr();
 1615              		.loc 3 417 31 view .LVU533
 418:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 1616              		.loc 3 418 33 view .LVU534
 419:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 1617              		.loc 3 419 3 view .LVU535
 1618              	.LBB447:
 1619              	.LBI440:
 711:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 712:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 713:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** /**
 714:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @brief   Kernel-unlock action from an interrupt handler.
 715:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @details In this port this function lowers the base priority to user
 716:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  *          level.
 717:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  * @note    Same as @p port_unlock() in this port.
 718:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****  */
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** __STATIC_FORCEINLINE void port_unlock_from_isr(void) {
 1620              		.loc 4 719 27 view .LVU536
 720:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 721:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h ****   port_unlock();
 1621              		.loc 4 721 3 view .LVU537
 1622              	.LBB446:
 1623              	.LBI441:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1624              		.loc 4 693 27 view .LVU538
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 1625              		.loc 4 696 3 view .LVU539
 1626              	.LBB445:
 1627              	.LBI442:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1628              		.loc 5 491 27 view .LVU540
 1629              	.LBB444:
 1630              		.loc 5 493 3 view .LVU541
 1631              		.syntax unified
 1632              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1633 0048 89F31188 		MSR basepri, r9
 1634              	@ 0 "" 2
 1635              	.LVL102:
 1636              		.thumb
 1637              		.syntax unified
 1638              	.L63:
 1639              		.loc 5 493 3 is_stmt 0 view .LVU542
 1640              	.LBE444:
 1641              	.LBE445:
 1642              	.LBE446:
 1643              	.LBE447:
 1644              	.LBE448:
 1645              	.LBE449:
 1646              	.LBE455:
 689:lib/chibios/os/hal/src/hal_usb.c ****     }
 690:lib/chibios/os/hal/src/hal_usb.c **** #endif
 691:lib/chibios/os/hal/src/hal_usb.c ****     usbp->epc[i] = NULL;
 1647              		.loc 1 691 5 is_stmt 1 discriminator 2 view .LVU543
 677:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 1648              		.loc 1 677 17 is_stmt 0 discriminator 2 view .LVU544
 1649 004c BD42     		cmp	r5, r7
 1650              		.loc 1 691 18 discriminator 2 view .LVU545
 1651 004e 2E60     		str	r6, [r5]
 677:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 1652              		.loc 1 677 50 is_stmt 1 discriminator 2 view .LVU546
 677:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 1653              		.loc 1 677 17 discriminator 2 view .LVU547
 1654 0050 E5D1     		bne	.L66
 692:lib/chibios/os/hal/src/hal_usb.c ****   }
 693:lib/chibios/os/hal/src/hal_usb.c **** 
 694:lib/chibios/os/hal/src/hal_usb.c ****   /* EP0 state machine initialization.*/
 695:lib/chibios/os/hal/src/hal_usb.c ****   usbp->ep0state = USB_EP0_STP_WAITING;
 1655              		.loc 1 695 3 view .LVU548
 1656              		.loc 1 695 18 is_stmt 0 view .LVU549
 1657 0052 84F86460 		strb	r6, [r4, #100]
 696:lib/chibios/os/hal/src/hal_usb.c **** 
 697:lib/chibios/os/hal/src/hal_usb.c ****   /* Low level reset.*/
 698:lib/chibios/os/hal/src/hal_usb.c ****   usb_lld_reset(usbp);
 1658              		.loc 1 698 3 is_stmt 1 view .LVU550
 1659 0056 2046     		mov	r0, r4
 1660 0058 FFF7FEFF 		bl	usb_lld_reset
 1661              	.LVL103:
 699:lib/chibios/os/hal/src/hal_usb.c **** 
 700:lib/chibios/os/hal/src/hal_usb.c ****   /* Notification of reset event.*/
 701:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_RESET);
 1662              		.loc 1 701 3 view .LVU551
 1663 005c 6368     		ldr	r3, [r4, #4]
 1664 005e 1B68     		ldr	r3, [r3]
 1665 0060 23B1     		cbz	r3, .L62
 1666              		.loc 1 701 3 discriminator 1 view .LVU552
 1667 0062 2046     		mov	r0, r4
 1668 0064 0021     		movs	r1, #0
 702:lib/chibios/os/hal/src/hal_usb.c **** }
 1669              		.loc 1 702 1 is_stmt 0 discriminator 1 view .LVU553
 1670 0066 BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 1671              		.cfi_remember_state
 1672              		.cfi_restore 14
 1673              		.cfi_restore 10
 1674              		.cfi_restore 9
 1675              		.cfi_restore 8
 1676              		.cfi_restore 7
 1677              		.cfi_restore 6
 1678              		.cfi_restore 5
 1679              		.cfi_restore 4
 1680              		.cfi_def_cfa_offset 0
 1681              	.LVL104:
 701:lib/chibios/os/hal/src/hal_usb.c **** }
 1682              		.loc 1 701 3 discriminator 1 view .LVU554
 1683 006a 1847     		bx	r3	@ indirect register sibling call
 1684              	.LVL105:
 1685              	.L62:
 1686              		.cfi_restore_state
 1687              		.loc 1 702 1 view .LVU555
 1688 006c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1689              		.loc 1 702 1 view .LVU556
 1690              		.cfi_endproc
 1691              	.LFE298:
 1693              		.section	.text._usb_suspend,"ax",%progbits
 1694              		.align	1
 1695              		.global	_usb_suspend
 1696              		.syntax unified
 1697              		.thumb
 1698              		.thumb_func
 1700              	_usb_suspend:
 1701              	.LVL106:
 1702              	.LFB299:
 703:lib/chibios/os/hal/src/hal_usb.c **** 
 704:lib/chibios/os/hal/src/hal_usb.c **** /**
 705:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB suspend routine.
 706:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function must be invoked when an USB bus suspend condition is
 707:lib/chibios/os/hal/src/hal_usb.c ****  *          detected.
 708:lib/chibios/os/hal/src/hal_usb.c ****  *
 709:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 710:lib/chibios/os/hal/src/hal_usb.c ****  *
 711:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 712:lib/chibios/os/hal/src/hal_usb.c ****  */
 713:lib/chibios/os/hal/src/hal_usb.c **** void _usb_suspend(USBDriver *usbp) {
 1703              		.loc 1 713 36 is_stmt 1 view -0
 1704              		.cfi_startproc
 1705              		@ args = 0, pretend = 0, frame = 0
 1706              		@ frame_needed = 0, uses_anonymous_args = 0
 714:lib/chibios/os/hal/src/hal_usb.c ****   /* No state change, suspend always returns to previous state. */
 715:lib/chibios/os/hal/src/hal_usb.c **** 
 716:lib/chibios/os/hal/src/hal_usb.c ****   /* State transition.*/
 717:lib/chibios/os/hal/src/hal_usb.c ****   usbp->saved_state = usbp->state;
 1707              		.loc 1 717 3 view .LVU558
 713:lib/chibios/os/hal/src/hal_usb.c ****   /* No state change, suspend always returns to previous state. */
 1708              		.loc 1 713 36 is_stmt 0 view .LVU559
 1709 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1710              		.cfi_def_cfa_offset 24
 1711              		.cfi_offset 3, -24
 1712              		.cfi_offset 4, -20
 1713              		.cfi_offset 5, -16
 1714              		.cfi_offset 6, -12
 1715              		.cfi_offset 7, -8
 1716              		.cfi_offset 14, -4
 1717              		.loc 1 717 21 view .LVU560
 1718 0002 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1719 0004 80F88030 		strb	r3, [r0, #128]
 718:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state       = USB_SUSPENDED;
 1720              		.loc 1 718 3 is_stmt 1 view .LVU561
 1721              		.loc 1 718 21 is_stmt 0 view .LVU562
 1722 0008 0523     		movs	r3, #5
 1723 000a 0370     		strb	r3, [r0]
 719:lib/chibios/os/hal/src/hal_usb.c **** 
 720:lib/chibios/os/hal/src/hal_usb.c ****   /* Notification of suspend event.*/
 721:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_SUSPEND);
 1724              		.loc 1 721 3 is_stmt 1 view .LVU563
 1725 000c 4368     		ldr	r3, [r0, #4]
 1726 000e 1B68     		ldr	r3, [r3]
 713:lib/chibios/os/hal/src/hal_usb.c ****   /* No state change, suspend always returns to previous state. */
 1727              		.loc 1 713 36 is_stmt 0 view .LVU564
 1728 0010 0446     		mov	r4, r0
 1729              		.loc 1 721 3 view .LVU565
 1730 0012 0BB1     		cbz	r3, .L79
 1731              		.loc 1 721 3 is_stmt 1 discriminator 1 view .LVU566
 1732 0014 0421     		movs	r1, #4
 1733 0016 9847     		blx	r3
 1734              	.LVL107:
 1735              	.L79:
 1736              		.loc 1 721 52 discriminator 3 view .LVU567
 722:lib/chibios/os/hal/src/hal_usb.c **** 
 723:lib/chibios/os/hal/src/hal_usb.c ****   /* Terminating all pending transactions.*/
 724:lib/chibios/os/hal/src/hal_usb.c ****   usbp->transmitting  = 0;
 1737              		.loc 1 724 3 discriminator 3 view .LVU568
 725:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving     = 0;
 1738              		.loc 1 725 3 discriminator 3 view .LVU569
 724:lib/chibios/os/hal/src/hal_usb.c ****   usbp->receiving     = 0;
 1739              		.loc 1 724 23 is_stmt 0 discriminator 3 view .LVU570
 1740 0018 2546     		mov	r5, r4
 1741 001a 0026     		movs	r6, #0
 1742 001c 45F8086F 		str	r6, [r5, #8]!
 1743              	.LBB456:
 726:lib/chibios/os/hal/src/hal_usb.c **** 
 727:lib/chibios/os/hal/src/hal_usb.c ****   /* Signaling the event to threads waiting on endpoints.*/
 728:lib/chibios/os/hal/src/hal_usb.c **** #if USB_USE_WAIT == TRUE
 729:lib/chibios/os/hal/src/hal_usb.c ****   {
 730:lib/chibios/os/hal/src/hal_usb.c ****     unsigned i;
 1744              		.loc 1 730 5 is_stmt 1 discriminator 3 view .LVU571
 731:lib/chibios/os/hal/src/hal_usb.c **** 
 732:lib/chibios/os/hal/src/hal_usb.c ****     for (i = 0; i <= (unsigned)USB_MAX_ENDPOINTS; i++) {
 1745              		.loc 1 732 5 discriminator 3 view .LVU572
 1746              	.LVL108:
 1747              		.loc 1 732 19 discriminator 3 view .LVU573
 1748 0020 2834     		adds	r4, r4, #40
 1749              	.LVL109:
 1750              	.LBB457:
 1751              	.LBB458:
 1752              	.LBB459:
 1753              	.LBB460:
 1754              	.LBB461:
 1755              	.LBB462:
 1756              		.loc 5 493 3 is_stmt 0 discriminator 3 view .LVU574
 1757 0022 2027     		movs	r7, #32
 1758              	.LVL110:
 1759              	.L83:
 1760              		.loc 5 493 3 discriminator 3 view .LVU575
 1761              	.LBE462:
 1762              	.LBE461:
 1763              	.LBE460:
 1764              	.LBE459:
 1765              	.LBE458:
 1766              	.LBE457:
 733:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i] != NULL) {
 1767              		.loc 1 733 7 is_stmt 1 view .LVU576
 1768              		.loc 1 733 10 is_stmt 0 view .LVU577
 1769 0024 55F8043F 		ldr	r3, [r5, #4]!
 1770 0028 9BB1     		cbz	r3, .L80
 734:lib/chibios/os/hal/src/hal_usb.c ****         osalSysLockFromISR();
 1771              		.loc 1 734 9 is_stmt 1 view .LVU578
 1772              	.LBB468:
 1773              	.LBI457:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1774              		.loc 2 595 20 view .LVU579
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1775              		.loc 2 597 3 view .LVU580
 1776              	.LBB467:
 1777              	.LBI458:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 1778              		.loc 3 395 20 view .LVU581
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 1779              		.loc 3 397 3 view .LVU582
 1780              	.LBB466:
 1781              	.LBI459:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1782              		.loc 4 708 27 view .LVU583
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 1783              		.loc 4 710 3 view .LVU584
 1784              	.LBB465:
 1785              	.LBI460:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1786              		.loc 4 669 27 view .LVU585
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 1787              		.loc 4 677 3 view .LVU586
 1788              	.LVL111:
 1789              	.LBB464:
 1790              	.LBI461:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1791              		.loc 5 491 27 view .LVU587
 1792              	.LBB463:
 1793              		.loc 5 493 3 view .LVU588
 1794              		.syntax unified
 1795              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1796 002a 87F31188 		MSR basepri, r7
 1797              	@ 0 "" 2
 1798              	.LVL112:
 1799              		.loc 5 493 3 is_stmt 0 view .LVU589
 1800              		.thumb
 1801              		.syntax unified
 1802              	.LBE463:
 1803              	.LBE464:
 1804              	.LBE465:
 1805              	.LBE466:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 1806              		.loc 3 398 34 is_stmt 1 view .LVU590
 399:./lib/chibios/os/rt/include/chsys.h **** }
 1807              		.loc 3 399 29 view .LVU591
 1808              	.LBE467:
 1809              	.LBE468:
 735:lib/chibios/os/hal/src/hal_usb.c ****         if (usbp->epc[i]->in_state != NULL) {
 1810              		.loc 1 735 9 view .LVU592
 1811              		.loc 1 735 25 is_stmt 0 view .LVU593
 1812 002e 2B68     		ldr	r3, [r5]
 1813 0030 5869     		ldr	r0, [r3, #20]
 1814              		.loc 1 735 12 view .LVU594
 1815 0032 20B1     		cbz	r0, .L81
 736:lib/chibios/os/hal/src/hal_usb.c ****           osalThreadResumeI(&usbp->epc[i]->in_state->thread, MSG_RESET);
 1816              		.loc 1 736 11 is_stmt 1 view .LVU595
 1817              	.LVL113:
 1818              	.LBB469:
 1819              	.LBI469:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1820              		.loc 2 837 20 view .LVU596
 1821              	.LBB470:
 1822              		.loc 2 839 3 view .LVU597
 1823 0034 6FF00101 		mvn	r1, #1
 1824 0038 0C30     		adds	r0, r0, #12
 1825              	.LVL114:
 1826              		.loc 2 839 3 is_stmt 0 view .LVU598
 1827 003a FFF7FEFF 		bl	chThdResumeI
 1828              	.LVL115:
 1829              	.L81:
 1830              		.loc 2 839 3 view .LVU599
 1831              	.LBE470:
 1832              	.LBE469:
 737:lib/chibios/os/hal/src/hal_usb.c ****         }
 738:lib/chibios/os/hal/src/hal_usb.c ****         if (usbp->epc[i]->out_state != NULL) {
 1833              		.loc 1 738 9 is_stmt 1 view .LVU600
 1834              		.loc 1 738 25 is_stmt 0 view .LVU601
 1835 003e 2B68     		ldr	r3, [r5]
 1836 0040 9869     		ldr	r0, [r3, #24]
 1837              		.loc 1 738 12 view .LVU602
 1838 0042 20B1     		cbz	r0, .L82
 739:lib/chibios/os/hal/src/hal_usb.c ****           osalThreadResumeI(&usbp->epc[i]->out_state->thread, MSG_RESET);
 1839              		.loc 1 739 11 is_stmt 1 view .LVU603
 1840              	.LVL116:
 1841              	.LBB471:
 1842              	.LBI471:
 837:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1843              		.loc 2 837 20 view .LVU604
 1844              	.LBB472:
 1845              		.loc 2 839 3 view .LVU605
 1846 0044 6FF00101 		mvn	r1, #1
 1847 0048 0C30     		adds	r0, r0, #12
 1848              	.LVL117:
 1849              		.loc 2 839 3 is_stmt 0 view .LVU606
 1850 004a FFF7FEFF 		bl	chThdResumeI
 1851              	.LVL118:
 1852              	.L82:
 1853              		.loc 2 839 3 view .LVU607
 1854              	.LBE472:
 1855              	.LBE471:
 740:lib/chibios/os/hal/src/hal_usb.c ****         }
 741:lib/chibios/os/hal/src/hal_usb.c ****         osalSysUnlockFromISR();
 1856              		.loc 1 741 9 is_stmt 1 view .LVU608
 1857              	.LBB473:
 1858              	.LBI473:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 1859              		.loc 2 606 20 view .LVU609
 1860              	.LBB474:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 1861              		.loc 2 608 3 view .LVU610
 1862              	.LBB475:
 1863              	.LBI475:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 1864              		.loc 3 415 20 view .LVU611
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 1865              		.loc 3 417 31 view .LVU612
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 1866              		.loc 3 418 33 view .LVU613
 1867              		.loc 3 419 3 view .LVU614
 1868              	.LBB476:
 1869              	.LBI476:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1870              		.loc 4 719 27 view .LVU615
 1871              		.loc 4 721 3 view .LVU616
 1872              	.LBB477:
 1873              	.LBI477:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 1874              		.loc 4 693 27 view .LVU617
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 1875              		.loc 4 696 3 view .LVU618
 1876              	.LBB478:
 1877              	.LBI478:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 1878              		.loc 5 491 27 view .LVU619
 1879              	.LBB479:
 1880              		.loc 5 493 3 view .LVU620
 1881              		.syntax unified
 1882              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 1883 004e 86F31188 		MSR basepri, r6
 1884              	@ 0 "" 2
 1885              	.LVL119:
 1886              		.thumb
 1887              		.syntax unified
 1888              	.L80:
 1889              		.loc 5 493 3 is_stmt 0 view .LVU621
 1890              	.LBE479:
 1891              	.LBE478:
 1892              	.LBE477:
 1893              	.LBE476:
 1894              	.LBE475:
 1895              	.LBE474:
 1896              	.LBE473:
 732:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i] != NULL) {
 1897              		.loc 1 732 52 is_stmt 1 discriminator 2 view .LVU622
 732:lib/chibios/os/hal/src/hal_usb.c ****       if (usbp->epc[i] != NULL) {
 1898              		.loc 1 732 19 discriminator 2 view .LVU623
 1899 0052 A542     		cmp	r5, r4
 1900 0054 E6D1     		bne	.L83
 1901              	.LBE456:
 742:lib/chibios/os/hal/src/hal_usb.c ****       }
 743:lib/chibios/os/hal/src/hal_usb.c ****     }
 744:lib/chibios/os/hal/src/hal_usb.c ****   }
 745:lib/chibios/os/hal/src/hal_usb.c **** #endif
 746:lib/chibios/os/hal/src/hal_usb.c **** }
 1902              		.loc 1 746 1 is_stmt 0 view .LVU624
 1903 0056 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1904              		.loc 1 746 1 view .LVU625
 1905              		.cfi_endproc
 1906              	.LFE299:
 1908              		.section	.text._usb_wakeup,"ax",%progbits
 1909              		.align	1
 1910              		.global	_usb_wakeup
 1911              		.syntax unified
 1912              		.thumb
 1913              		.thumb_func
 1915              	_usb_wakeup:
 1916              	.LVL120:
 1917              	.LFB300:
 747:lib/chibios/os/hal/src/hal_usb.c **** 
 748:lib/chibios/os/hal/src/hal_usb.c **** /**
 749:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   USB wake-up routine.
 750:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function must be invoked when an USB bus wake-up condition is
 751:lib/chibios/os/hal/src/hal_usb.c ****  *          detected.
 752:lib/chibios/os/hal/src/hal_usb.c ****  *
 753:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 754:lib/chibios/os/hal/src/hal_usb.c ****  *
 755:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 756:lib/chibios/os/hal/src/hal_usb.c ****  */
 757:lib/chibios/os/hal/src/hal_usb.c **** void _usb_wakeup(USBDriver *usbp) {
 1918              		.loc 1 757 35 is_stmt 1 view -0
 1919              		.cfi_startproc
 1920              		@ args = 0, pretend = 0, frame = 0
 1921              		@ frame_needed = 0, uses_anonymous_args = 0
 1922              		@ link register save eliminated.
 758:lib/chibios/os/hal/src/hal_usb.c **** 
 759:lib/chibios/os/hal/src/hal_usb.c ****   /* State transition, returning to the previous state.*/
 760:lib/chibios/os/hal/src/hal_usb.c ****   usbp->state = usbp->saved_state;
 1923              		.loc 1 760 3 view .LVU627
 1924              		.loc 1 760 15 is_stmt 0 view .LVU628
 1925 0000 90F88020 		ldrb	r2, [r0, #128]	@ zero_extendqisi2
 761:lib/chibios/os/hal/src/hal_usb.c **** 
 762:lib/chibios/os/hal/src/hal_usb.c ****   /* Notification of suspend event.*/
 763:lib/chibios/os/hal/src/hal_usb.c ****   _usb_isr_invoke_event_cb(usbp, USB_EVENT_WAKEUP);
 1926              		.loc 1 763 3 view .LVU629
 1927 0004 4368     		ldr	r3, [r0, #4]
 760:lib/chibios/os/hal/src/hal_usb.c **** 
 1928              		.loc 1 760 15 view .LVU630
 1929 0006 0270     		strb	r2, [r0]
 1930              		.loc 1 763 3 is_stmt 1 view .LVU631
 1931 0008 1B68     		ldr	r3, [r3]
 1932 000a 0BB1     		cbz	r3, .L97
 1933              		.loc 1 763 3 discriminator 1 view .LVU632
 1934 000c 0521     		movs	r1, #5
 1935 000e 1847     		bx	r3	@ indirect register sibling call
 1936              	.LVL121:
 1937              	.L97:
 764:lib/chibios/os/hal/src/hal_usb.c **** }
 1938              		.loc 1 764 1 is_stmt 0 view .LVU633
 1939 0010 7047     		bx	lr
 1940              		.cfi_endproc
 1941              	.LFE300:
 1943              		.section	.text._usb_ep0setup,"ax",%progbits
 1944              		.align	1
 1945              		.global	_usb_ep0setup
 1946              		.syntax unified
 1947              		.thumb
 1948              		.thumb_func
 1950              	_usb_ep0setup:
 1951              	.LVL122:
 1952              	.LFB301:
 765:lib/chibios/os/hal/src/hal_usb.c **** 
 766:lib/chibios/os/hal/src/hal_usb.c **** /**
 767:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Default EP0 SETUP callback.
 768:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function is used by the low level driver as default handler
 769:lib/chibios/os/hal/src/hal_usb.c ****  *          for EP0 SETUP events.
 770:lib/chibios/os/hal/src/hal_usb.c ****  *
 771:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 772:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number, always zero
 773:lib/chibios/os/hal/src/hal_usb.c ****  *
 774:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 775:lib/chibios/os/hal/src/hal_usb.c ****  */
 776:lib/chibios/os/hal/src/hal_usb.c **** void _usb_ep0setup(USBDriver *usbp, usbep_t ep) {
 1953              		.loc 1 776 49 is_stmt 1 view -0
 1954              		.cfi_startproc
 1955              		@ args = 0, pretend = 0, frame = 0
 1956              		@ frame_needed = 0, uses_anonymous_args = 0
 777:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 1957              		.loc 1 777 3 view .LVU635
 778:lib/chibios/os/hal/src/hal_usb.c **** 
 779:lib/chibios/os/hal/src/hal_usb.c ****   /* Is the EP0 state machine in the correct state for handling setup
 780:lib/chibios/os/hal/src/hal_usb.c ****      packets?*/
 781:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->ep0state != USB_EP0_STP_WAITING) {
 1958              		.loc 1 781 3 view .LVU636
 776:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 1959              		.loc 1 776 49 is_stmt 0 view .LVU637
 1960 0000 70B5     		push	{r4, r5, r6, lr}
 1961              		.cfi_def_cfa_offset 16
 1962              		.cfi_offset 4, -16
 1963              		.cfi_offset 5, -12
 1964              		.cfi_offset 6, -8
 1965              		.cfi_offset 14, -4
 1966              		.loc 1 781 6 view .LVU638
 1967 0002 90F86430 		ldrb	r3, [r0, #100]	@ zero_extendqisi2
 776:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 1968              		.loc 1 776 49 view .LVU639
 1969 0006 0446     		mov	r4, r0
 1970              		.loc 1 781 6 view .LVU640
 1971 0008 13B1     		cbz	r3, .L100
 782:lib/chibios/os/hal/src/hal_usb.c ****     /* This is unexpected could require handling with a warning event.*/
 783:lib/chibios/os/hal/src/hal_usb.c ****     /* CHTODO: handling here.*/
 784:lib/chibios/os/hal/src/hal_usb.c **** 
 785:lib/chibios/os/hal/src/hal_usb.c ****     /* Resetting the EP0 state machine and going ahead.*/
 786:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_STP_WAITING;
 1972              		.loc 1 786 5 is_stmt 1 view .LVU641
 1973              		.loc 1 786 20 is_stmt 0 view .LVU642
 1974 000a 0023     		movs	r3, #0
 1975 000c 80F86430 		strb	r3, [r0, #100]
 1976              	.L100:
 787:lib/chibios/os/hal/src/hal_usb.c ****   }
 788:lib/chibios/os/hal/src/hal_usb.c **** 
 789:lib/chibios/os/hal/src/hal_usb.c ****   /* Reading the setup data into the driver buffer.*/
 790:lib/chibios/os/hal/src/hal_usb.c ****   usbReadSetup(usbp, ep, usbp->setup);
 1977              		.loc 1 790 3 is_stmt 1 view .LVU643
 1978 0010 04F17402 		add	r2, r4, #116
 1979 0014 2046     		mov	r0, r4
 1980              	.LVL123:
 1981              		.loc 1 790 3 is_stmt 0 view .LVU644
 1982 0016 FFF7FEFF 		bl	usb_lld_read_setup
 1983              	.LVL124:
 791:lib/chibios/os/hal/src/hal_usb.c **** 
 792:lib/chibios/os/hal/src/hal_usb.c ****   /* First verify if the application has an handler installed for this
 793:lib/chibios/os/hal/src/hal_usb.c ****      request.*/
 794:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -save -e9007 [13.5] No side effects, it is intentional.*/
 795:lib/chibios/os/hal/src/hal_usb.c ****   if ((usbp->config->requests_hook_cb == NULL) ||
 1984              		.loc 1 795 3 is_stmt 1 view .LVU645
 1985              		.loc 1 795 20 is_stmt 0 view .LVU646
 1986 001a 6368     		ldr	r3, [r4, #4]
 1987 001c 9B68     		ldr	r3, [r3, #8]
 1988              		.loc 1 795 6 view .LVU647
 1989 001e B3B9     		cbnz	r3, .L101
 1990              	.L105:
 796:lib/chibios/os/hal/src/hal_usb.c ****       !(usbp->config->requests_hook_cb(usbp))) {
 797:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 798:lib/chibios/os/hal/src/hal_usb.c ****     /* Invoking the default handler, if this fails then stalls the
 799:lib/chibios/os/hal/src/hal_usb.c ****        endpoint zero as error.*/
 800:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -save -e9007 [13.5] No side effects, it is intentional.*/
 801:lib/chibios/os/hal/src/hal_usb.c ****     if (((usbp->setup[0] & USB_RTYPE_TYPE_MASK) != USB_RTYPE_TYPE_STD) ||
 1991              		.loc 1 801 5 is_stmt 1 view .LVU648
 1992              		.loc 1 801 22 is_stmt 0 view .LVU649
 1993 0020 94F87430 		ldrb	r3, [r4, #116]	@ zero_extendqisi2
 1994              		.loc 1 801 8 view .LVU650
 1995 0024 13F06005 		ands	r5, r3, #96
 1996 0028 35D0     		beq	.L175
 1997              	.L121:
 802:lib/chibios/os/hal/src/hal_usb.c ****         !default_handler(usbp)) {
 803:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 804:lib/chibios/os/hal/src/hal_usb.c ****       /* Error response, the state machine goes into an error state, the low
 805:lib/chibios/os/hal/src/hal_usb.c ****          level layer will have to reset it to USB_EP0_WAITING_SETUP after
 806:lib/chibios/os/hal/src/hal_usb.c ****          receiving a SETUP packet.*/
 807:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_stall_in(usbp, 0);
 1998              		.loc 1 807 7 is_stmt 1 view .LVU651
 1999 002a 0021     		movs	r1, #0
 2000 002c 2046     		mov	r0, r4
 2001 002e FFF7FEFF 		bl	usb_lld_stall_in
 2002              	.LVL125:
 808:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_stall_out(usbp, 0);
 2003              		.loc 1 808 7 view .LVU652
 2004 0032 0021     		movs	r1, #0
 2005 0034 2046     		mov	r0, r4
 2006 0036 FFF7FEFF 		bl	usb_lld_stall_out
 2007              	.LVL126:
 809:lib/chibios/os/hal/src/hal_usb.c ****       _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 2008              		.loc 1 809 7 view .LVU653
 2009 003a 6368     		ldr	r3, [r4, #4]
 2010 003c 1B68     		ldr	r3, [r3]
 2011 003e 13B1     		cbz	r3, .L133
 2012              		.loc 1 809 7 discriminator 1 view .LVU654
 2013 0040 0621     		movs	r1, #6
 2014 0042 2046     		mov	r0, r4
 2015 0044 9847     		blx	r3
 2016              	.LVL127:
 2017              	.L133:
 2018              		.loc 1 809 56 discriminator 3 view .LVU655
 810:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_ERROR;
 2019              		.loc 1 810 7 discriminator 3 view .LVU656
 2020              		.loc 1 810 22 is_stmt 0 discriminator 3 view .LVU657
 2021 0046 0623     		movs	r3, #6
 2022 0048 84F86430 		strb	r3, [r4, #100]
 811:lib/chibios/os/hal/src/hal_usb.c ****       return;
 2023              		.loc 1 811 7 is_stmt 1 discriminator 3 view .LVU658
 2024              	.L99:
 812:lib/chibios/os/hal/src/hal_usb.c ****     }
 813:lib/chibios/os/hal/src/hal_usb.c ****   }
 814:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_SET_ADDRESS_ACK_HANDLING == USB_SET_ADDRESS_ACK_HW)
 815:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->setup[1] == USB_REQ_SET_ADDRESS) {
 816:lib/chibios/os/hal/src/hal_usb.c ****     /* Zero-length packet sent by hardware */
 817:lib/chibios/os/hal/src/hal_usb.c ****     return;
 818:lib/chibios/os/hal/src/hal_usb.c ****   }
 819:lib/chibios/os/hal/src/hal_usb.c **** #endif
 820:lib/chibios/os/hal/src/hal_usb.c ****   /* Transfer preparation. The request handler must have populated
 821:lib/chibios/os/hal/src/hal_usb.c ****      correctly the fields ep0next, ep0n and ep0endcb using the macro
 822:lib/chibios/os/hal/src/hal_usb.c ****      usbSetupTransfer().*/
 823:lib/chibios/os/hal/src/hal_usb.c ****   max = (size_t)get_hword(&usbp->setup[6]);
 824:lib/chibios/os/hal/src/hal_usb.c ****   /* The transfer size cannot exceed the specified amount.*/
 825:lib/chibios/os/hal/src/hal_usb.c ****   if (usbp->ep0n > max) {
 826:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0n = max;
 827:lib/chibios/os/hal/src/hal_usb.c ****   }
 828:lib/chibios/os/hal/src/hal_usb.c ****   if ((usbp->setup[0] & USB_RTYPE_DIR_MASK) == USB_RTYPE_DIR_DEV2HOST) {
 829:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 830:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0n != 0U) {
 831:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 832:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_IN_TX;
 833:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 834:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, usbp->ep0next, usbp->ep0n);
 835:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 836:lib/chibios/os/hal/src/hal_usb.c ****     }
 837:lib/chibios/os/hal/src/hal_usb.c ****     else {
 838:lib/chibios/os/hal/src/hal_usb.c ****       /* No transmission phase, directly receiving the zero sized status
 839:lib/chibios/os/hal/src/hal_usb.c ****          packet.*/
 840:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_OUT_WAITING_STS;
 841:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 842:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 843:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, NULL, 0);
 844:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 845:lib/chibios/os/hal/src/hal_usb.c **** #else
 846:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_end_setup(usbp, ep);
 847:lib/chibios/os/hal/src/hal_usb.c **** #endif
 848:lib/chibios/os/hal/src/hal_usb.c ****     }
 849:lib/chibios/os/hal/src/hal_usb.c ****   }
 850:lib/chibios/os/hal/src/hal_usb.c ****   else {
 851:lib/chibios/os/hal/src/hal_usb.c ****     /* OUT phase.*/
 852:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0n != 0U) {
 853:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the receive phase.*/
 854:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_OUT_RX;
 855:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 856:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, (uint8_t *)usbp->ep0next, usbp->ep0n);
 857:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 858:lib/chibios/os/hal/src/hal_usb.c ****     }
 859:lib/chibios/os/hal/src/hal_usb.c ****     else {
 860:lib/chibios/os/hal/src/hal_usb.c ****       /* No receive phase, directly sending the zero sized status
 861:lib/chibios/os/hal/src/hal_usb.c ****          packet.*/
 862:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_IN_SENDING_STS;
 863:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 864:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 865:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, NULL, 0);
 866:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 867:lib/chibios/os/hal/src/hal_usb.c **** #else
 868:lib/chibios/os/hal/src/hal_usb.c ****       usb_lld_end_setup(usbp, ep);
 869:lib/chibios/os/hal/src/hal_usb.c **** #endif
 870:lib/chibios/os/hal/src/hal_usb.c ****     }
 871:lib/chibios/os/hal/src/hal_usb.c ****   }
 872:lib/chibios/os/hal/src/hal_usb.c **** }
 2025              		.loc 1 872 1 is_stmt 0 view .LVU659
 2026 004c 70BD     		pop	{r4, r5, r6, pc}
 2027              	.LVL128:
 2028              	.L101:
 796:lib/chibios/os/hal/src/hal_usb.c ****   /*lint -restore*/
 2029              		.loc 1 796 9 discriminator 1 view .LVU660
 2030 004e 2046     		mov	r0, r4
 2031 0050 9847     		blx	r3
 2032              	.LVL129:
 795:lib/chibios/os/hal/src/hal_usb.c ****       !(usbp->config->requests_hook_cb(usbp))) {
 2033              		.loc 1 795 48 discriminator 1 view .LVU661
 2034 0052 0028     		cmp	r0, #0
 2035 0054 E4D0     		beq	.L105
 2036              	.L104:
 823:lib/chibios/os/hal/src/hal_usb.c ****   /* The transfer size cannot exceed the specified amount.*/
 2037              		.loc 1 823 3 is_stmt 1 view .LVU662
 823:lib/chibios/os/hal/src/hal_usb.c ****   /* The transfer size cannot exceed the specified amount.*/
 2038              		.loc 1 823 7 is_stmt 0 view .LVU663
 2039 0056 B4F87A30 		ldrh	r3, [r4, #122]	@ unaligned
 2040              	.LVL130:
 825:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0n = max;
 2041              		.loc 1 825 3 is_stmt 1 view .LVU664
 825:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0n = max;
 2042              		.loc 1 825 6 is_stmt 0 view .LVU665
 2043 005a E26E     		ldr	r2, [r4, #108]
 2044 005c 9A42     		cmp	r2, r3
 826:lib/chibios/os/hal/src/hal_usb.c ****   }
 2045              		.loc 1 826 5 is_stmt 1 view .LVU666
 826:lib/chibios/os/hal/src/hal_usb.c ****   }
 2046              		.loc 1 826 16 is_stmt 0 view .LVU667
 2047 005e 88BF     		it	hi
 2048 0060 E366     		strhi	r3, [r4, #108]
 828:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 2049              		.loc 1 828 3 is_stmt 1 view .LVU668
 828:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 2050              		.loc 1 828 6 is_stmt 0 view .LVU669
 2051 0062 94F97430 		ldrsb	r3, [r4, #116]
 2052              	.LVL131:
 830:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 2053              		.loc 1 830 13 view .LVU670
 2054 0066 E56E     		ldr	r5, [r4, #108]
 828:lib/chibios/os/hal/src/hal_usb.c ****     /* IN phase.*/
 2055              		.loc 1 828 6 view .LVU671
 2056 0068 002B     		cmp	r3, #0
 2057 006a 4FF02003 		mov	r3, #32
 2058 006e 80F2EF80 		bge	.L136
 830:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 2059              		.loc 1 830 5 is_stmt 1 view .LVU672
 830:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the transmit phase.*/
 2060              		.loc 1 830 8 is_stmt 0 view .LVU673
 2061 0072 002D     		cmp	r5, #0
 2062 0074 00F0DE80 		beq	.L137
 832:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2063              		.loc 1 832 7 is_stmt 1 view .LVU674
 832:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2064              		.loc 1 832 22 is_stmt 0 view .LVU675
 2065 0078 0922     		movs	r2, #9
 2066 007a 84F86420 		strb	r2, [r4, #100]
 833:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, usbp->ep0next, usbp->ep0n);
 2067              		.loc 1 833 7 is_stmt 1 view .LVU676
 2068              	.LBB550:
 2069              	.LBI550:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2070              		.loc 2 595 20 view .LVU677
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2071              		.loc 2 597 3 view .LVU678
 2072              	.LBB551:
 2073              	.LBI551:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2074              		.loc 3 395 20 view .LVU679
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2075              		.loc 3 397 3 view .LVU680
 2076              	.LBB552:
 2077              	.LBI552:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2078              		.loc 4 708 27 view .LVU681
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2079              		.loc 4 710 3 view .LVU682
 2080              	.LBB553:
 2081              	.LBI553:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2082              		.loc 4 669 27 view .LVU683
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2083              		.loc 4 677 3 view .LVU684
 2084              	.LVL132:
 2085              	.LBB554:
 2086              	.LBI554:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2087              		.loc 5 491 27 view .LVU685
 2088              	.LBB555:
 2089              		.loc 5 493 3 view .LVU686
 2090              		.syntax unified
 2091              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2092 007e 83F31188 		MSR basepri, r3
 2093              	@ 0 "" 2
 2094              	.LVL133:
 2095              		.loc 5 493 3 is_stmt 0 view .LVU687
 2096              		.thumb
 2097              		.syntax unified
 2098              	.LBE555:
 2099              	.LBE554:
 2100              	.LBE553:
 2101              	.LBE552:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2102              		.loc 3 398 34 is_stmt 1 view .LVU688
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2103              		.loc 3 399 29 view .LVU689
 2104              	.LBE551:
 2105              	.LBE550:
 834:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2106              		.loc 1 834 7 view .LVU690
 2107 0082 0021     		movs	r1, #0
 2108 0084 D4E91A23 		ldrd	r2, r3, [r4, #104]
 2109 0088 2046     		mov	r0, r4
 2110 008a FFF7FEFF 		bl	usbStartTransmitI
 2111              	.LVL134:
 835:lib/chibios/os/hal/src/hal_usb.c ****     }
 2112              		.loc 1 835 7 view .LVU691
 2113              	.LBB556:
 2114              	.LBI556:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2115              		.loc 2 606 20 view .LVU692
 2116              	.LBB557:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2117              		.loc 2 608 3 view .LVU693
 2118              	.LBB558:
 2119              	.LBI558:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2120              		.loc 3 415 20 view .LVU694
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2121              		.loc 3 417 31 view .LVU695
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2122              		.loc 3 418 33 view .LVU696
 2123              		.loc 3 419 3 view .LVU697
 2124              	.LBB559:
 2125              	.LBI559:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2126              		.loc 4 719 27 view .LVU698
 2127              		.loc 4 721 3 view .LVU699
 2128              	.LBB560:
 2129              	.LBI560:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2130              		.loc 4 693 27 view .LVU700
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2131              		.loc 4 696 3 view .LVU701
 2132              	.LBB561:
 2133              	.LBI561:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2134              		.loc 5 491 27 view .LVU702
 2135              	.LBB562:
 2136              		.loc 5 493 3 view .LVU703
 2137              	.L184:
 2138              		.loc 5 493 3 is_stmt 0 view .LVU704
 2139              	.LBE562:
 2140              	.LBE561:
 2141              	.LBE560:
 2142              	.LBE559:
 2143              	.LBE558:
 2144              	.LBE557:
 2145              	.LBE556:
 857:lib/chibios/os/hal/src/hal_usb.c ****     }
 2146              		.loc 1 857 7 is_stmt 1 view .LVU705
 2147              	.LBB563:
 2148              	.LBI563:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2149              		.loc 2 606 20 view .LVU706
 2150              	.LBB564:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2151              		.loc 2 608 3 view .LVU707
 2152              	.LBB565:
 2153              	.LBI565:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2154              		.loc 3 415 20 view .LVU708
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2155              		.loc 3 417 31 view .LVU709
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2156              		.loc 3 418 33 view .LVU710
 2157              		.loc 3 419 3 view .LVU711
 2158              	.LBB566:
 2159              	.LBI566:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2160              		.loc 4 719 27 view .LVU712
 2161              		.loc 4 721 3 view .LVU713
 2162              	.LBB567:
 2163              	.LBI567:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2164              		.loc 4 693 27 view .LVU714
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2165              		.loc 4 696 3 view .LVU715
 2166              	.LBB568:
 2167              	.LBI568:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2168              		.loc 5 491 27 view .LVU716
 2169              	.LBB569:
 2170              		.loc 5 493 3 view .LVU717
 2171 008e 0023     		movs	r3, #0
 2172              		.syntax unified
 2173              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2174 0090 83F31188 		MSR basepri, r3
 2175              	@ 0 "" 2
 2176              	.LVL135:
 2177              		.loc 5 493 3 is_stmt 0 view .LVU718
 2178              		.thumb
 2179              		.syntax unified
 2180              	.LBE569:
 2181              	.LBE568:
 2182              	.LBE567:
 2183              	.LBE566:
 2184              	.LBE565:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2185              		.loc 2 609 1 view .LVU719
 2186 0094 DAE7     		b	.L99
 2187              	.LVL136:
 2188              	.L175:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2189              		.loc 2 609 1 view .LVU720
 2190              	.LBE564:
 2191              	.LBE563:
 2192              	.LBB570:
 2193              	.LBI570:
  84:lib/chibios/os/hal/src/hal_usb.c ****   const USBDescriptor *dp;
 2194              		.loc 1 84 13 is_stmt 1 view .LVU721
 2195              	.LBB571:
  85:lib/chibios/os/hal/src/hal_usb.c **** 
 2196              		.loc 1 85 3 view .LVU722
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2197              		.loc 1 88 3 view .LVU723
  90:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_GET_STATUS << 8):
 2198              		.loc 1 90 13 is_stmt 0 view .LVU724
 2199 0096 94F87520 		ldrb	r2, [r4, #117]	@ zero_extendqisi2
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2200              		.loc 1 88 38 view .LVU725
 2201 009a 03F07F03 		and	r3, r3, #127
  89:lib/chibios/os/hal/src/hal_usb.c ****            ((uint32_t)usbp->setup[1] << 8U))) {
 2202              		.loc 1 89 63 view .LVU726
 2203 009e 43EA0223 		orr	r3, r3, r2, lsl #8
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2204              		.loc 1 88 3 view .LVU727
 2205 00a2 40F20232 		movw	r2, #770
 2206 00a6 9342     		cmp	r3, r2
 2207 00a8 00F0B180 		beq	.L106
 2208 00ac 20D8     		bhi	.L107
 2209 00ae B3F5807F 		cmp	r3, #256
 2210 00b2 47D0     		beq	.L108
 2211 00b4 0CD8     		bhi	.L109
 2212 00b6 012B     		cmp	r3, #1
 2213 00b8 3ED0     		beq	.L110
 2214 00ba 022B     		cmp	r3, #2
 2215 00bc 7FD0     		beq	.L111
 2216 00be 002B     		cmp	r3, #0
 2217 00c0 B3D1     		bne	.L121
  93:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2218              		.loc 1 93 5 is_stmt 1 view .LVU728
 2219 00c2 04F17C02 		add	r2, r4, #124
 2220 00c6 A266     		str	r2, [r4, #104]
  93:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2221              		.loc 1 93 5 view .LVU729
 2222 00c8 0222     		movs	r2, #2
 2223 00ca E266     		str	r2, [r4, #108]
  93:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2224              		.loc 1 93 5 view .LVU730
 2225              	.L180:
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2226              		.loc 1 190 9 is_stmt 0 view .LVU731
 2227 00cc 2367     		str	r3, [r4, #112]
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2228              		.loc 1 190 66 is_stmt 1 view .LVU732
 192:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 2229              		.loc 1 192 9 view .LVU733
 2230              	.LVL137:
 192:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_DISABLED:
 2231              		.loc 1 192 9 is_stmt 0 view .LVU734
 2232 00ce C2E7     		b	.L104
 2233              	.LVL138:
 2234              	.L109:
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2235              		.loc 1 88 3 view .LVU735
 2236 00d0 B3F5817F 		cmp	r3, #258
 2237 00d4 00F08880 		beq	.L114
 2238 00d8 B3F5407F 		cmp	r3, #768
 2239 00dc A5D1     		bne	.L121
 107:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status |= 2U;
 2240              		.loc 1 107 5 is_stmt 1 view .LVU736
 107:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status |= 2U;
 2241              		.loc 1 107 8 is_stmt 0 view .LVU737
 2242 00de 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2243 00e2 012B     		cmp	r3, #1
 2244 00e4 A1D1     		bne	.L121
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2245              		.loc 1 108 7 is_stmt 1 view .LVU738
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2246              		.loc 1 108 20 is_stmt 0 view .LVU739
 2247 00e6 B4F87C30 		ldrh	r3, [r4, #124]
 2248 00ea 43F00203 		orr	r3, r3, #2
 2249 00ee 32E0     		b	.L185
 2250              	.L107:
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2251              		.loc 1 88 3 view .LVU740
 2252 00f0 B3F5006F 		cmp	r3, #2048
 2253 00f4 39D0     		beq	.L116
 2254 00f6 17D8     		bhi	.L117
 2255 00f8 B3F5A06F 		cmp	r3, #1280
 2256 00fc 31D0     		beq	.L118
 2257 00fe A3F5C063 		sub	r3, r3, #1536
 2258 0102 012B     		cmp	r3, #1
 2259 0104 91D8     		bhi	.L121
 130:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 2260              		.loc 1 130 5 is_stmt 1 view .LVU741
 130:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 2261              		.loc 1 130 22 is_stmt 0 view .LVU742
 2262 0106 6368     		ldr	r3, [r4, #4]
 130:lib/chibios/os/hal/src/hal_usb.c ****                                          usbp->setup[2],
 2263              		.loc 1 130 10 view .LVU743
 2264 0108 94F87620 		ldrb	r2, [r4, #118]	@ zero_extendqisi2
 2265 010c 5E68     		ldr	r6, [r3, #4]
 2266 010e 94F87710 		ldrb	r1, [r4, #119]	@ zero_extendqisi2
 2267 0112 B4F87830 		ldrh	r3, [r4, #120]	@ unaligned
 2268 0116 2046     		mov	r0, r4
 2269 0118 B047     		blx	r6
 2270              	.LVL139:
 133:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2271              		.loc 1 133 5 is_stmt 1 view .LVU744
 133:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2272              		.loc 1 133 8 is_stmt 0 view .LVU745
 2273 011a 0028     		cmp	r0, #0
 2274 011c 85D0     		beq	.L121
 137:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 2275              		.loc 1 137 5 is_stmt 1 view .LVU746
 2276 011e 4368     		ldr	r3, [r0, #4]
 2277 0120 A366     		str	r3, [r4, #104]
 137:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 2278              		.loc 1 137 5 view .LVU747
 2279 0122 0368     		ldr	r3, [r0]
 2280              	.LVL140:
 2281              	.L182:
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2282              		.loc 1 142 5 is_stmt 0 view .LVU748
 2283 0124 E366     		str	r3, [r4, #108]
 2284 0126 1AE0     		b	.L181
 2285              	.L117:
  88:lib/chibios/os/hal/src/hal_usb.c ****                                         USB_RTYPE_TYPE_MASK)) |
 2286              		.loc 1 88 3 view .LVU749
 2287 0128 B3F5106F 		cmp	r3, #2304
 2288 012c 22D0     		beq	.L120
 2289 012e 40F60242 		movw	r2, #3074
 2290 0132 9342     		cmp	r3, r2
 2291 0134 7FF479AF 		bne	.L121
 2292              	.L110:
 176:lib/chibios/os/hal/src/hal_usb.c ****     /*lint -restore*/
 2293              		.loc 1 176 5 is_stmt 1 view .LVU750
 2294 0138 524B     		ldr	r3, .L188
 2295              	.L179:
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2296              		.loc 1 190 9 is_stmt 0 view .LVU751
 2297 013a A366     		str	r3, [r4, #104]
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2298              		.loc 1 190 9 is_stmt 1 view .LVU752
 2299 013c 0223     		movs	r3, #2
 2300 013e E366     		str	r3, [r4, #108]
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2301              		.loc 1 190 9 view .LVU753
 2302 0140 0023     		movs	r3, #0
 2303 0142 C3E7     		b	.L180
 2304              	.L108:
  98:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status &= ~2U;
 2305              		.loc 1 98 5 view .LVU754
  98:lib/chibios/os/hal/src/hal_usb.c ****       usbp->status &= ~2U;
 2306              		.loc 1 98 8 is_stmt 0 view .LVU755
 2307 0144 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2308 0148 012B     		cmp	r3, #1
 2309 014a 7FF46EAF 		bne	.L121
  99:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2310              		.loc 1 99 7 is_stmt 1 view .LVU756
  99:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2311              		.loc 1 99 20 is_stmt 0 view .LVU757
 2312 014e B4F87C30 		ldrh	r3, [r4, #124]
 2313 0152 23F00203 		bic	r3, r3, #2
 2314              	.L185:
 109:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 2315              		.loc 1 109 7 view .LVU758
 2316 0156 C4E91A55 		strd	r5, r5, [r4, #104]
 108:lib/chibios/os/hal/src/hal_usb.c ****       usbSetupTransfer(usbp, NULL, 0, NULL);
 2317              		.loc 1 108 20 view .LVU759
 2318 015a A4F87C30 		strh	r3, [r4, #124]	@ movhi
 109:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 2319              		.loc 1 109 7 is_stmt 1 view .LVU760
 109:lib/chibios/os/hal/src/hal_usb.c ****       return true;
 2320              		.loc 1 109 7 view .LVU761
 2321              	.L181:
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2322              		.loc 1 142 5 view .LVU762
 2323 015e 2567     		str	r5, [r4, #112]
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2324              		.loc 1 142 58 view .LVU763
 143:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_CONFIGURATION << 8):
 2325              		.loc 1 143 5 view .LVU764
 2326              	.LVL141:
 143:lib/chibios/os/hal/src/hal_usb.c ****   case (uint32_t)USB_RTYPE_RECIPIENT_DEVICE | ((uint32_t)USB_REQ_SET_CONFIGURATION << 8):
 2327              		.loc 1 143 5 is_stmt 0 view .LVU765
 2328 0160 79E7     		b	.L104
 2329              	.LVL142:
 2330              	.L118:
 124:lib/chibios/os/hal/src/hal_usb.c **** #endif
 2331              		.loc 1 124 5 is_stmt 1 view .LVU766
 2332 0162 C4E91A55 		strd	r5, r5, [r4, #104]
 124:lib/chibios/os/hal/src/hal_usb.c **** #endif
 2333              		.loc 1 124 5 view .LVU767
 2334 0166 484B     		ldr	r3, .L188+4
 2335 0168 B0E7     		b	.L180
 2336              	.L116:
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2337              		.loc 1 142 5 view .LVU768
 2338 016a 04F17F03 		add	r3, r4, #127
 2339 016e A366     		str	r3, [r4, #104]
 142:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2340              		.loc 1 142 5 view .LVU769
 2341 0170 0123     		movs	r3, #1
 2342 0172 D7E7     		b	.L182
 2343              	.L120:
 153:lib/chibios/os/hal/src/hal_usb.c ****         /* Current configuration cleared.*/
 2344              		.loc 1 153 7 view .LVU770
 153:lib/chibios/os/hal/src/hal_usb.c ****         /* Current configuration cleared.*/
 2345              		.loc 1 153 10 is_stmt 0 view .LVU771
 2346 0174 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2347 0176 042B     		cmp	r3, #4
 2348 0178 10D1     		bne	.L123
 155:lib/chibios/os/hal/src/hal_usb.c ****         usbDisableEndpointsI(usbp);
 2349              		.loc 1 155 9 is_stmt 1 view .LVU772
 2350              	.LBB572:
 2351              	.LBI572:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2352              		.loc 2 595 20 view .LVU773
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2353              		.loc 2 597 3 view .LVU774
 2354              	.LBB573:
 2355              	.LBI573:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2356              		.loc 3 395 20 view .LVU775
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2357              		.loc 3 397 3 view .LVU776
 2358              	.LBB574:
 2359              	.LBI574:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2360              		.loc 4 708 27 view .LVU777
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2361              		.loc 4 710 3 view .LVU778
 2362              	.LBB575:
 2363              	.LBI575:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2364              		.loc 4 669 27 view .LVU779
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2365              		.loc 4 677 3 view .LVU780
 2366              	.LVL143:
 2367              	.LBB576:
 2368              	.LBI576:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2369              		.loc 5 491 27 view .LVU781
 2370              	.LBB577:
 2371              		.loc 5 493 3 view .LVU782
 2372 017a 2023     		movs	r3, #32
 2373              		.syntax unified
 2374              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2375 017c 83F31188 		MSR basepri, r3
 2376              	@ 0 "" 2
 2377              	.LVL144:
 2378              		.loc 5 493 3 is_stmt 0 view .LVU783
 2379              		.thumb
 2380              		.syntax unified
 2381              	.LBE577:
 2382              	.LBE576:
 2383              	.LBE575:
 2384              	.LBE574:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2385              		.loc 3 398 34 is_stmt 1 view .LVU784
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2386              		.loc 3 399 29 view .LVU785
 2387              	.LBE573:
 2388              	.LBE572:
 156:lib/chibios/os/hal/src/hal_usb.c ****         osalSysUnlockFromISR ();
 2389              		.loc 1 156 9 view .LVU786
 2390 0180 2046     		mov	r0, r4
 2391 0182 FFF7FEFF 		bl	usbDisableEndpointsI
 2392              	.LVL145:
 157:lib/chibios/os/hal/src/hal_usb.c ****         usbp->configuration = 0U;
 2393              		.loc 1 157 9 view .LVU787
 2394              	.LBB578:
 2395              	.LBI578:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2396              		.loc 2 606 20 view .LVU788
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2397              		.loc 2 608 3 view .LVU789
 2398              	.LBB579:
 2399              	.LBI579:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2400              		.loc 3 415 20 view .LVU790
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2401              		.loc 3 417 31 view .LVU791
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2402              		.loc 3 418 33 view .LVU792
 2403              		.loc 3 419 3 view .LVU793
 2404              	.LBB580:
 2405              	.LBI580:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2406              		.loc 4 719 27 view .LVU794
 2407              		.loc 4 721 3 view .LVU795
 2408              	.LBB581:
 2409              	.LBI581:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2410              		.loc 4 693 27 view .LVU796
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2411              		.loc 4 696 3 view .LVU797
 2412              	.LBB582:
 2413              	.LBI582:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2414              		.loc 5 491 27 view .LVU798
 2415              	.LBB583:
 2416              		.loc 5 493 3 view .LVU799
 2417              		.syntax unified
 2418              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2419 0186 85F31188 		MSR basepri, r5
 2420              	@ 0 "" 2
 2421              	.LVL146:
 2422              		.loc 5 493 3 is_stmt 0 view .LVU800
 2423              		.thumb
 2424              		.syntax unified
 2425              	.LBE583:
 2426              	.LBE582:
 2427              	.LBE581:
 2428              	.LBE580:
 2429              	.LBE579:
 2430              	.LBE578:
 158:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_SELECTED;
 2431              		.loc 1 158 9 is_stmt 1 view .LVU801
 159:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 2432              		.loc 1 159 21 is_stmt 0 view .LVU802
 2433 018a 0321     		movs	r1, #3
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2434              		.loc 1 160 9 view .LVU803
 2435 018c 6368     		ldr	r3, [r4, #4]
 158:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_SELECTED;
 2436              		.loc 1 158 29 view .LVU804
 2437 018e 84F87F50 		strb	r5, [r4, #127]
 159:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 2438              		.loc 1 159 9 is_stmt 1 view .LVU805
 159:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_UNCONFIGURED);
 2439              		.loc 1 159 21 is_stmt 0 view .LVU806
 2440 0192 2170     		strb	r1, [r4]
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2441              		.loc 1 160 9 is_stmt 1 view .LVU807
 2442 0194 1B68     		ldr	r3, [r3]
 2443 0196 0BB1     		cbz	r3, .L123
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2444              		.loc 1 160 9 view .LVU808
 2445 0198 2046     		mov	r0, r4
 2446 019a 9847     		blx	r3
 2447              	.LVL147:
 2448              	.L123:
 160:lib/chibios/os/hal/src/hal_usb.c ****       }
 2449              		.loc 1 160 63 view .LVU809
 162:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 2450              		.loc 1 162 7 view .LVU810
 162:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 2451              		.loc 1 162 22 is_stmt 0 view .LVU811
 2452 019c 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 162:lib/chibios/os/hal/src/hal_usb.c ****         /* New configuration.*/
 2453              		.loc 1 162 10 view .LVU812
 2454 01a0 4BB1     		cbz	r3, .L126
 164:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_ACTIVE;
 2455              		.loc 1 164 9 is_stmt 1 view .LVU813
 164:lib/chibios/os/hal/src/hal_usb.c ****         usbp->state = USB_ACTIVE;
 2456              		.loc 1 164 29 is_stmt 0 view .LVU814
 2457 01a2 84F87F30 		strb	r3, [r4, #127]
 165:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_CONFIGURED);
 2458              		.loc 1 165 9 is_stmt 1 view .LVU815
 165:lib/chibios/os/hal/src/hal_usb.c ****         _usb_isr_invoke_event_cb(usbp, USB_EVENT_CONFIGURED);
 2459              		.loc 1 165 21 is_stmt 0 view .LVU816
 2460 01a6 0423     		movs	r3, #4
 2461 01a8 2370     		strb	r3, [r4]
 166:lib/chibios/os/hal/src/hal_usb.c ****       }
 2462              		.loc 1 166 9 is_stmt 1 view .LVU817
 2463 01aa 6368     		ldr	r3, [r4, #4]
 2464 01ac 1B68     		ldr	r3, [r3]
 2465 01ae 13B1     		cbz	r3, .L126
 166:lib/chibios/os/hal/src/hal_usb.c ****       }
 2466              		.loc 1 166 9 view .LVU818
 2467 01b0 0221     		movs	r1, #2
 2468 01b2 2046     		mov	r0, r4
 2469 01b4 9847     		blx	r3
 2470              	.LVL148:
 2471              	.L126:
 166:lib/chibios/os/hal/src/hal_usb.c ****       }
 2472              		.loc 1 166 61 view .LVU819
 169:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2473              		.loc 1 169 5 view .LVU820
 2474 01b6 0023     		movs	r3, #0
 2475 01b8 C4E91A33 		strd	r3, r3, [r4, #104]
 169:lib/chibios/os/hal/src/hal_usb.c ****     return true;
 2476              		.loc 1 169 5 view .LVU821
 2477 01bc 86E7     		b	.L180
 2478              	.L111:
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2479              		.loc 1 181 5 view .LVU822
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2480              		.loc 1 181 21 is_stmt 0 view .LVU823
 2481 01be 94F87830 		ldrb	r3, [r4, #120]	@ zero_extendqisi2
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2482              		.loc 1 181 8 view .LVU824
 2483 01c2 1D06     		lsls	r5, r3, #24
 182:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2484              		.loc 1 182 15 view .LVU825
 2485 01c4 03F00F01 		and	r1, r3, #15
 2486 01c8 2046     		mov	r0, r4
 181:lib/chibios/os/hal/src/hal_usb.c ****       switch (usb_lld_get_status_in(usbp, usbp->setup[4] & 0x0FU)) {
 2487              		.loc 1 181 8 view .LVU826
 2488 01ca 0AD5     		bpl	.L128
 2489              	.LVL149:
 182:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2490              		.loc 1 182 7 is_stmt 1 view .LVU827
 182:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2491              		.loc 1 182 15 is_stmt 0 view .LVU828
 2492 01cc FFF7FEFF 		bl	usb_lld_get_status_in
 2493              	.LVL150:
 2494              	.L187:
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2495              		.loc 1 199 7 view .LVU829
 2496 01d0 0128     		cmp	r0, #1
 2497 01d2 04D0     		beq	.L129
 2498 01d4 0228     		cmp	r0, #2
 2499 01d6 7FF428AF 		bne	.L121
 190:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2500              		.loc 1 190 9 is_stmt 1 view .LVU830
 2501 01da 2C4B     		ldr	r3, .L188+8
 2502 01dc ADE7     		b	.L179
 2503              	.L129:
 185:lib/chibios/os/hal/src/hal_usb.c ****         /*lint -restore*/
 2504              		.loc 1 185 9 view .LVU831
 2505 01de 2C4B     		ldr	r3, .L188+12
 2506 01e0 ABE7     		b	.L179
 2507              	.LVL151:
 2508              	.L128:
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2509              		.loc 1 199 7 view .LVU832
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2510              		.loc 1 199 15 is_stmt 0 view .LVU833
 2511 01e2 FFF7FEFF 		bl	usb_lld_get_status_out
 2512              	.LVL152:
 199:lib/chibios/os/hal/src/hal_usb.c ****       case EP_STATUS_STALLED:
 2513              		.loc 1 199 15 view .LVU834
 2514 01e6 F3E7     		b	.L187
 2515              	.L114:
 217:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2516              		.loc 1 217 5 is_stmt 1 view .LVU835
 217:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2517              		.loc 1 217 8 is_stmt 0 view .LVU836
 2518 01e8 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2519 01ec 002B     		cmp	r3, #0
 2520 01ee 7FF41CAF 		bne	.L121
 221:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2521              		.loc 1 221 5 is_stmt 1 view .LVU837
 221:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2522              		.loc 1 221 21 is_stmt 0 view .LVU838
 2523 01f2 94F87830 		ldrb	r3, [r4, #120]	@ zero_extendqisi2
 221:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2524              		.loc 1 221 8 view .LVU839
 2525 01f6 13F00F01 		ands	r1, r3, #15
 2526 01fa DCD0     		beq	.L126
 222:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 2527              		.loc 1 222 7 is_stmt 1 view .LVU840
 222:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 2528              		.loc 1 222 10 is_stmt 0 view .LVU841
 2529 01fc 1A06     		lsls	r2, r3, #24
 223:lib/chibios/os/hal/src/hal_usb.c ****       }
 2530              		.loc 1 223 9 view .LVU842
 2531 01fe 2046     		mov	r0, r4
 222:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_clear_in(usbp, usbp->setup[4] & 0x0FU);
 2532              		.loc 1 222 10 view .LVU843
 2533 0200 02D5     		bpl	.L131
 2534              	.LVL153:
 223:lib/chibios/os/hal/src/hal_usb.c ****       }
 2535              		.loc 1 223 9 is_stmt 1 view .LVU844
 2536 0202 FFF7FEFF 		bl	usb_lld_clear_in
 2537              	.LVL154:
 223:lib/chibios/os/hal/src/hal_usb.c ****       }
 2538              		.loc 1 223 9 is_stmt 0 view .LVU845
 2539 0206 D6E7     		b	.L126
 2540              	.LVL155:
 2541              	.L131:
 226:lib/chibios/os/hal/src/hal_usb.c ****       }
 2542              		.loc 1 226 9 is_stmt 1 view .LVU846
 2543 0208 FFF7FEFF 		bl	usb_lld_clear_out
 2544              	.LVL156:
 226:lib/chibios/os/hal/src/hal_usb.c ****       }
 2545              		.loc 1 226 9 is_stmt 0 view .LVU847
 2546 020c D3E7     		b	.L126
 2547              	.L106:
 233:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2548              		.loc 1 233 5 is_stmt 1 view .LVU848
 233:lib/chibios/os/hal/src/hal_usb.c ****       return false;
 2549              		.loc 1 233 8 is_stmt 0 view .LVU849
 2550 020e 94F87630 		ldrb	r3, [r4, #118]	@ zero_extendqisi2
 2551 0212 002B     		cmp	r3, #0
 2552 0214 7FF409AF 		bne	.L121
 237:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2553              		.loc 1 237 5 is_stmt 1 view .LVU850
 237:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2554              		.loc 1 237 21 is_stmt 0 view .LVU851
 2555 0218 94F87830 		ldrb	r3, [r4, #120]	@ zero_extendqisi2
 237:lib/chibios/os/hal/src/hal_usb.c ****       if ((usbp->setup[4] & 0x80U) != 0U) {
 2556              		.loc 1 237 8 view .LVU852
 2557 021c 13F00F01 		ands	r1, r3, #15
 2558 0220 C9D0     		beq	.L126
 238:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 2559              		.loc 1 238 7 is_stmt 1 view .LVU853
 238:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 2560              		.loc 1 238 10 is_stmt 0 view .LVU854
 2561 0222 1B06     		lsls	r3, r3, #24
 239:lib/chibios/os/hal/src/hal_usb.c ****       }
 2562              		.loc 1 239 9 view .LVU855
 2563 0224 2046     		mov	r0, r4
 238:lib/chibios/os/hal/src/hal_usb.c ****         usb_lld_stall_in(usbp, usbp->setup[4] & 0x0FU);
 2564              		.loc 1 238 10 view .LVU856
 2565 0226 02D5     		bpl	.L132
 2566              	.LVL157:
 239:lib/chibios/os/hal/src/hal_usb.c ****       }
 2567              		.loc 1 239 9 is_stmt 1 view .LVU857
 2568 0228 FFF7FEFF 		bl	usb_lld_stall_in
 2569              	.LVL158:
 239:lib/chibios/os/hal/src/hal_usb.c ****       }
 2570              		.loc 1 239 9 is_stmt 0 view .LVU858
 2571 022c C3E7     		b	.L126
 2572              	.LVL159:
 2573              	.L132:
 242:lib/chibios/os/hal/src/hal_usb.c ****       }
 2574              		.loc 1 242 9 is_stmt 1 view .LVU859
 2575 022e FFF7FEFF 		bl	usb_lld_stall_out
 2576              	.LVL160:
 242:lib/chibios/os/hal/src/hal_usb.c ****       }
 2577              		.loc 1 242 9 is_stmt 0 view .LVU860
 2578 0232 C0E7     		b	.L126
 2579              	.LVL161:
 2580              	.L137:
 242:lib/chibios/os/hal/src/hal_usb.c ****       }
 2581              		.loc 1 242 9 view .LVU861
 2582              	.LBE571:
 2583              	.LBE570:
 840:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2584              		.loc 1 840 7 is_stmt 1 view .LVU862
 840:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2585              		.loc 1 840 22 is_stmt 0 view .LVU863
 2586 0234 1422     		movs	r2, #20
 2587 0236 84F86420 		strb	r2, [r4, #100]
 842:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, NULL, 0);
 2588              		.loc 1 842 7 is_stmt 1 view .LVU864
 2589              	.LBB584:
 2590              	.LBI584:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2591              		.loc 2 595 20 view .LVU865
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2592              		.loc 2 597 3 view .LVU866
 2593              	.LBB585:
 2594              	.LBI585:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2595              		.loc 3 395 20 view .LVU867
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2596              		.loc 3 397 3 view .LVU868
 2597              	.LBB586:
 2598              	.LBI586:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2599              		.loc 4 708 27 view .LVU869
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2600              		.loc 4 710 3 view .LVU870
 2601              	.LBB587:
 2602              	.LBI587:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2603              		.loc 4 669 27 view .LVU871
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2604              		.loc 4 677 3 view .LVU872
 2605              	.LVL162:
 2606              	.LBB588:
 2607              	.LBI588:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2608              		.loc 5 491 27 view .LVU873
 2609              	.LBB589:
 2610              		.loc 5 493 3 view .LVU874
 2611              		.syntax unified
 2612              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2613 023a 83F31188 		MSR basepri, r3
 2614              	@ 0 "" 2
 2615              	.LVL163:
 2616              		.loc 5 493 3 is_stmt 0 view .LVU875
 2617              		.thumb
 2618              		.syntax unified
 2619              	.LBE589:
 2620              	.LBE588:
 2621              	.LBE587:
 2622              	.LBE586:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2623              		.loc 3 398 34 is_stmt 1 view .LVU876
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2624              		.loc 3 399 29 view .LVU877
 2625              	.LBE585:
 2626              	.LBE584:
 843:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2627              		.loc 1 843 7 view .LVU878
 2628 023e 2B46     		mov	r3, r5
 2629 0240 2A46     		mov	r2, r5
 2630 0242 2946     		mov	r1, r5
 2631 0244 2046     		mov	r0, r4
 2632 0246 FFF7FEFF 		bl	usbStartReceiveI
 2633              	.LVL164:
 844:lib/chibios/os/hal/src/hal_usb.c **** #else
 2634              		.loc 1 844 7 view .LVU879
 2635              	.LBB590:
 2636              	.LBI590:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2637              		.loc 2 606 20 view .LVU880
 2638              	.LBB591:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2639              		.loc 2 608 3 view .LVU881
 2640              	.LBB592:
 2641              	.LBI592:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2642              		.loc 3 415 20 view .LVU882
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2643              		.loc 3 417 31 view .LVU883
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2644              		.loc 3 418 33 view .LVU884
 2645              		.loc 3 419 3 view .LVU885
 2646              	.LBB593:
 2647              	.LBI593:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2648              		.loc 4 719 27 view .LVU886
 2649              		.loc 4 721 3 view .LVU887
 2650              	.LBB594:
 2651              	.LBI594:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2652              		.loc 4 693 27 view .LVU888
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2653              		.loc 4 696 3 view .LVU889
 2654              	.LBB595:
 2655              	.LBI595:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2656              		.loc 5 491 27 view .LVU890
 2657              	.LBB596:
 2658              		.loc 5 493 3 view .LVU891
 2659              	.L183:
 2660              		.loc 5 493 3 is_stmt 0 view .LVU892
 2661              	.LBE596:
 2662              	.LBE595:
 2663              	.LBE594:
 2664              	.LBE593:
 2665              	.LBE592:
 2666              	.LBE591:
 2667              	.LBE590:
 866:lib/chibios/os/hal/src/hal_usb.c **** #else
 2668              		.loc 1 866 7 is_stmt 1 view .LVU893
 2669              	.LBB597:
 2670              	.LBI597:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2671              		.loc 2 606 20 view .LVU894
 2672              	.LBB598:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2673              		.loc 2 608 3 view .LVU895
 2674              	.LBB599:
 2675              	.LBI599:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2676              		.loc 3 415 20 view .LVU896
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2677              		.loc 3 417 31 view .LVU897
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2678              		.loc 3 418 33 view .LVU898
 2679              		.loc 3 419 3 view .LVU899
 2680              	.LBB600:
 2681              	.LBI600:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2682              		.loc 4 719 27 view .LVU900
 2683              		.loc 4 721 3 view .LVU901
 2684              	.LBB601:
 2685              	.LBI601:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2686              		.loc 4 693 27 view .LVU902
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2687              		.loc 4 696 3 view .LVU903
 2688              	.LBB602:
 2689              	.LBI602:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2690              		.loc 5 491 27 view .LVU904
 2691              	.LBB603:
 2692              		.loc 5 493 3 view .LVU905
 2693              		.syntax unified
 2694              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2695 024a 85F31188 		MSR basepri, r5
 2696              	@ 0 "" 2
 2697              	.LVL165:
 2698              		.loc 5 493 3 is_stmt 0 view .LVU906
 2699              		.thumb
 2700              		.syntax unified
 2701              	.LBE603:
 2702              	.LBE602:
 2703              	.LBE601:
 2704              	.LBE600:
 2705              	.LBE599:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2706              		.loc 2 609 1 view .LVU907
 2707 024e FDE6     		b	.L99
 2708              	.LVL166:
 2709              	.L136:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2710              		.loc 2 609 1 view .LVU908
 2711              	.LBE598:
 2712              	.LBE597:
 852:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the receive phase.*/
 2713              		.loc 1 852 5 is_stmt 1 view .LVU909
 852:lib/chibios/os/hal/src/hal_usb.c ****       /* Starts the receive phase.*/
 2714              		.loc 1 852 8 is_stmt 0 view .LVU910
 2715 0250 5DB1     		cbz	r5, .L138
 854:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2716              		.loc 1 854 7 is_stmt 1 view .LVU911
 854:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2717              		.loc 1 854 22 is_stmt 0 view .LVU912
 2718 0252 1522     		movs	r2, #21
 2719 0254 84F86420 		strb	r2, [r4, #100]
 855:lib/chibios/os/hal/src/hal_usb.c ****       usbStartReceiveI(usbp, 0, (uint8_t *)usbp->ep0next, usbp->ep0n);
 2720              		.loc 1 855 7 is_stmt 1 view .LVU913
 2721              	.LBB604:
 2722              	.LBI604:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2723              		.loc 2 595 20 view .LVU914
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2724              		.loc 2 597 3 view .LVU915
 2725              	.LBB605:
 2726              	.LBI605:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2727              		.loc 3 395 20 view .LVU916
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2728              		.loc 3 397 3 view .LVU917
 2729              	.LBB606:
 2730              	.LBI606:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2731              		.loc 4 708 27 view .LVU918
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2732              		.loc 4 710 3 view .LVU919
 2733              	.LBB607:
 2734              	.LBI607:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2735              		.loc 4 669 27 view .LVU920
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2736              		.loc 4 677 3 view .LVU921
 2737              	.LVL167:
 2738              	.LBB608:
 2739              	.LBI608:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2740              		.loc 5 491 27 view .LVU922
 2741              	.LBB609:
 2742              		.loc 5 493 3 view .LVU923
 2743              		.syntax unified
 2744              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2745 0258 83F31188 		MSR basepri, r3
 2746              	@ 0 "" 2
 2747              	.LVL168:
 2748              		.loc 5 493 3 is_stmt 0 view .LVU924
 2749              		.thumb
 2750              		.syntax unified
 2751              	.LBE609:
 2752              	.LBE608:
 2753              	.LBE607:
 2754              	.LBE606:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2755              		.loc 3 398 34 is_stmt 1 view .LVU925
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2756              		.loc 3 399 29 view .LVU926
 2757              	.LBE605:
 2758              	.LBE604:
 856:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2759              		.loc 1 856 7 view .LVU927
 2760 025c 0021     		movs	r1, #0
 2761 025e D4E91A23 		ldrd	r2, r3, [r4, #104]
 2762 0262 2046     		mov	r0, r4
 2763 0264 FFF7FEFF 		bl	usbStartReceiveI
 2764              	.LVL169:
 856:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2765              		.loc 1 856 7 is_stmt 0 view .LVU928
 2766 0268 11E7     		b	.L184
 2767              	.LVL170:
 2768              	.L138:
 862:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2769              		.loc 1 862 7 is_stmt 1 view .LVU929
 862:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 2770              		.loc 1 862 22 is_stmt 0 view .LVU930
 2771 026a 0B22     		movs	r2, #11
 2772 026c 84F86420 		strb	r2, [r4, #100]
 864:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, NULL, 0);
 2773              		.loc 1 864 7 is_stmt 1 view .LVU931
 2774              	.LBB610:
 2775              	.LBI610:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2776              		.loc 2 595 20 view .LVU932
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2777              		.loc 2 597 3 view .LVU933
 2778              	.LBB611:
 2779              	.LBI611:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2780              		.loc 3 395 20 view .LVU934
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2781              		.loc 3 397 3 view .LVU935
 2782              	.LBB612:
 2783              	.LBI612:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2784              		.loc 4 708 27 view .LVU936
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2785              		.loc 4 710 3 view .LVU937
 2786              	.LBB613:
 2787              	.LBI613:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2788              		.loc 4 669 27 view .LVU938
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2789              		.loc 4 677 3 view .LVU939
 2790              	.LVL171:
 2791              	.LBB614:
 2792              	.LBI614:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2793              		.loc 5 491 27 view .LVU940
 2794              	.LBB615:
 2795              		.loc 5 493 3 view .LVU941
 2796              		.syntax unified
 2797              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2798 0270 83F31188 		MSR basepri, r3
 2799              	@ 0 "" 2
 2800              	.LVL172:
 2801              		.loc 5 493 3 is_stmt 0 view .LVU942
 2802              		.thumb
 2803              		.syntax unified
 2804              	.LBE615:
 2805              	.LBE614:
 2806              	.LBE613:
 2807              	.LBE612:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2808              		.loc 3 398 34 is_stmt 1 view .LVU943
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2809              		.loc 3 399 29 view .LVU944
 2810              	.LBE611:
 2811              	.LBE610:
 865:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2812              		.loc 1 865 7 view .LVU945
 2813 0274 2B46     		mov	r3, r5
 2814 0276 2A46     		mov	r2, r5
 2815 0278 2946     		mov	r1, r5
 2816 027a 2046     		mov	r0, r4
 2817 027c FFF7FEFF 		bl	usbStartTransmitI
 2818              	.LVL173:
 865:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2819              		.loc 1 865 7 is_stmt 0 view .LVU946
 2820 0280 E3E7     		b	.L183
 2821              	.L189:
 2822 0282 00BF     		.align	2
 2823              	.L188:
 2824 0284 00000000 		.word	zero_status
 2825 0288 00000000 		.word	set_address
 2826 028c 00000000 		.word	active_status
 2827 0290 00000000 		.word	halted_status
 2828              		.cfi_endproc
 2829              	.LFE301:
 2831              		.section	.text._usb_ep0in,"ax",%progbits
 2832              		.align	1
 2833              		.global	_usb_ep0in
 2834              		.syntax unified
 2835              		.thumb
 2836              		.thumb_func
 2838              	_usb_ep0in:
 2839              	.LVL174:
 2840              	.LFB302:
 873:lib/chibios/os/hal/src/hal_usb.c **** 
 874:lib/chibios/os/hal/src/hal_usb.c **** /**
 875:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Default EP0 IN callback.
 876:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function is used by the low level driver as default handler
 877:lib/chibios/os/hal/src/hal_usb.c ****  *          for EP0 IN events.
 878:lib/chibios/os/hal/src/hal_usb.c ****  *
 879:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 880:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number, always zero
 881:lib/chibios/os/hal/src/hal_usb.c ****  *
 882:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 883:lib/chibios/os/hal/src/hal_usb.c ****  */
 884:lib/chibios/os/hal/src/hal_usb.c **** void _usb_ep0in(USBDriver *usbp, usbep_t ep) {
 2841              		.loc 1 884 46 is_stmt 1 view -0
 2842              		.cfi_startproc
 2843              		@ args = 0, pretend = 0, frame = 0
 2844              		@ frame_needed = 0, uses_anonymous_args = 0
 885:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 2845              		.loc 1 885 3 view .LVU948
 886:lib/chibios/os/hal/src/hal_usb.c **** 
 887:lib/chibios/os/hal/src/hal_usb.c ****   (void)ep;
 2846              		.loc 1 887 3 view .LVU949
 888:lib/chibios/os/hal/src/hal_usb.c ****   switch (usbp->ep0state) {
 2847              		.loc 1 888 3 view .LVU950
 884:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 2848              		.loc 1 884 46 is_stmt 0 view .LVU951
 2849 0000 38B5     		push	{r3, r4, r5, lr}
 2850              		.cfi_def_cfa_offset 16
 2851              		.cfi_offset 3, -16
 2852              		.cfi_offset 4, -12
 2853              		.cfi_offset 5, -8
 2854              		.cfi_offset 14, -4
 2855              		.loc 1 888 15 view .LVU952
 2856 0002 90F86430 		ldrb	r3, [r0, #100]	@ zero_extendqisi2
 884:lib/chibios/os/hal/src/hal_usb.c ****   size_t max;
 2857              		.loc 1 884 46 view .LVU953
 2858 0006 0446     		mov	r4, r0
 2859              		.loc 1 888 3 view .LVU954
 2860 0008 002B     		cmp	r3, #0
 2861 000a 3ED0     		beq	.L191
 2862 000c 063B     		subs	r3, r3, #6
 2863 000e DAB2     		uxtb	r2, r3
 2864 0010 0F2A     		cmp	r2, #15
 2865 0012 34D8     		bhi	.L190
 2866 0014 0F2B     		cmp	r3, #15
 2867 0016 32D8     		bhi	.L190
 2868 0018 DFE803F0 		tbb	[pc, r3]
 2869              	.L193:
 2870 001c 37       		.byte	(.L191-.L193)/2
 2871 001d 31       		.byte	(.L190-.L193)/2
 2872 001e 31       		.byte	(.L190-.L193)/2
 2873 001f 08       		.byte	(.L196-.L193)/2
 2874 0020 22       		.byte	(.L195-.L193)/2
 2875 0021 32       		.byte	(.L194-.L193)/2
 2876 0022 31       		.byte	(.L190-.L193)/2
 2877 0023 31       		.byte	(.L190-.L193)/2
 2878 0024 31       		.byte	(.L190-.L193)/2
 2879 0025 31       		.byte	(.L190-.L193)/2
 2880 0026 31       		.byte	(.L190-.L193)/2
 2881 0027 31       		.byte	(.L190-.L193)/2
 2882 0028 31       		.byte	(.L190-.L193)/2
 2883 0029 31       		.byte	(.L190-.L193)/2
 2884 002a 37       		.byte	(.L191-.L193)/2
 2885 002b 37       		.byte	(.L191-.L193)/2
 2886              		.p2align 1
 2887              	.L196:
 889:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_TX:
 890:lib/chibios/os/hal/src/hal_usb.c ****     max = (size_t)get_hword(&usbp->setup[6]);
 2888              		.loc 1 890 5 is_stmt 1 view .LVU955
 2889              	.LVL175:
 891:lib/chibios/os/hal/src/hal_usb.c ****     /* If the transmitted size is less than the requested size and it is a
 892:lib/chibios/os/hal/src/hal_usb.c ****        multiple of the maximum packet size then a zero size packet must be
 893:lib/chibios/os/hal/src/hal_usb.c ****        transmitted.*/
 894:lib/chibios/os/hal/src/hal_usb.c ****     if ((usbp->ep0n < max) &&
 2890              		.loc 1 894 5 view .LVU956
 2891              		.loc 1 894 14 is_stmt 0 view .LVU957
 2892 002c C56E     		ldr	r5, [r0, #108]
 890:lib/chibios/os/hal/src/hal_usb.c ****     /* If the transmitted size is less than the requested size and it is a
 2893              		.loc 1 890 9 view .LVU958
 2894 002e B0F87A30 		ldrh	r3, [r0, #122]	@ unaligned
 2895              		.loc 1 894 8 view .LVU959
 2896 0032 9D42     		cmp	r5, r3
 2897 0034 14D2     		bcs	.L195
 895:lib/chibios/os/hal/src/hal_usb.c ****         ((usbp->ep0n % usbp->epc[0]->in_maxsize) == 0U)) {
 2898              		.loc 1 895 36 discriminator 1 view .LVU960
 2899 0036 C368     		ldr	r3, [r0, #12]
 2900 0038 1B8A     		ldrh	r3, [r3, #16]
 2901              		.loc 1 895 22 discriminator 1 view .LVU961
 2902 003a B5FBF3F2 		udiv	r2, r5, r3
 2903 003e 03FB1255 		mls	r5, r3, r2, r5
 894:lib/chibios/os/hal/src/hal_usb.c ****         ((usbp->ep0n % usbp->epc[0]->in_maxsize) == 0U)) {
 2904              		.loc 1 894 28 discriminator 1 view .LVU962
 2905 0042 6DB9     		cbnz	r5, .L195
 896:lib/chibios/os/hal/src/hal_usb.c ****       osalSysLockFromISR();
 2906              		.loc 1 896 7 is_stmt 1 view .LVU963
 2907              	.LBB616:
 2908              	.LBI616:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2909              		.loc 2 595 20 view .LVU964
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2910              		.loc 2 597 3 view .LVU965
 2911              	.LBB617:
 2912              	.LBI617:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 2913              		.loc 3 395 20 view .LVU966
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 2914              		.loc 3 397 3 view .LVU967
 2915              	.LBB618:
 2916              	.LBI618:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2917              		.loc 4 708 27 view .LVU968
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 2918              		.loc 4 710 3 view .LVU969
 2919              	.LBB619:
 2920              	.LBI619:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2921              		.loc 4 669 27 view .LVU970
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 2922              		.loc 4 677 3 view .LVU971
 2923              	.LVL176:
 2924              	.LBB620:
 2925              	.LBI620:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2926              		.loc 5 491 27 view .LVU972
 2927              	.LBB621:
 2928              		.loc 5 493 3 view .LVU973
 2929 0044 2023     		movs	r3, #32
 2930              		.syntax unified
 2931              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2932 0046 83F31188 		MSR basepri, r3
 2933              	@ 0 "" 2
 2934              	.LVL177:
 2935              		.loc 5 493 3 is_stmt 0 view .LVU974
 2936              		.thumb
 2937              		.syntax unified
 2938              	.LBE621:
 2939              	.LBE620:
 2940              	.LBE619:
 2941              	.LBE618:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 2942              		.loc 3 398 34 is_stmt 1 view .LVU975
 399:./lib/chibios/os/rt/include/chsys.h **** }
 2943              		.loc 3 399 29 view .LVU976
 2944              	.LBE617:
 2945              	.LBE616:
 897:lib/chibios/os/hal/src/hal_usb.c ****       usbStartTransmitI(usbp, 0, NULL, 0);
 2946              		.loc 1 897 7 view .LVU977
 2947 004a 2B46     		mov	r3, r5
 2948 004c 2A46     		mov	r2, r5
 2949 004e 2946     		mov	r1, r5
 2950              	.LVL178:
 2951              		.loc 1 897 7 is_stmt 0 view .LVU978
 2952 0050 FFF7FEFF 		bl	usbStartTransmitI
 2953              	.LVL179:
 898:lib/chibios/os/hal/src/hal_usb.c ****       osalSysUnlockFromISR();
 2954              		.loc 1 898 7 is_stmt 1 view .LVU979
 2955              	.LBB622:
 2956              	.LBI622:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 2957              		.loc 2 606 20 view .LVU980
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 2958              		.loc 2 608 3 view .LVU981
 2959              	.LBB623:
 2960              	.LBI623:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 2961              		.loc 3 415 20 view .LVU982
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 2962              		.loc 3 417 31 view .LVU983
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 2963              		.loc 3 418 33 view .LVU984
 2964              		.loc 3 419 3 view .LVU985
 2965              	.LBB624:
 2966              	.LBI624:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2967              		.loc 4 719 27 view .LVU986
 2968              		.loc 4 721 3 view .LVU987
 2969              	.LBB625:
 2970              	.LBI625:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 2971              		.loc 4 693 27 view .LVU988
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 2972              		.loc 4 696 3 view .LVU989
 2973              	.LBB626:
 2974              	.LBI626:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 2975              		.loc 5 491 27 view .LVU990
 2976              	.LBB627:
 2977              		.loc 5 493 3 view .LVU991
 2978              		.syntax unified
 2979              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 2980 0054 85F31188 		MSR basepri, r5
 2981              	@ 0 "" 2
 2982              	.LVL180:
 2983              		.loc 5 493 3 is_stmt 0 view .LVU992
 2984              		.thumb
 2985              		.syntax unified
 2986              	.LBE627:
 2987              	.LBE626:
 2988              	.LBE625:
 2989              	.LBE624:
 2990              	.LBE623:
 2991              	.LBE622:
 899:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0state = USB_EP0_IN_WAITING_TX0;
 2992              		.loc 1 899 7 is_stmt 1 view .LVU993
 2993              		.loc 1 899 22 is_stmt 0 view .LVU994
 2994 0058 0A23     		movs	r3, #10
 2995              	.LVL181:
 2996              	.L211:
 900:lib/chibios/os/hal/src/hal_usb.c ****       return;
 901:lib/chibios/os/hal/src/hal_usb.c ****     }
 902:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 903:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_WAITING_TX0:
 904:lib/chibios/os/hal/src/hal_usb.c ****     /* Transmit phase over, receiving the zero sized status packet.*/
 905:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_OUT_WAITING_STS;
 906:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 907:lib/chibios/os/hal/src/hal_usb.c ****     osalSysLockFromISR();
 908:lib/chibios/os/hal/src/hal_usb.c ****     usbStartReceiveI(usbp, 0, NULL, 0);
 909:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 910:lib/chibios/os/hal/src/hal_usb.c **** #else
 911:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_end_setup(usbp, ep);
 912:lib/chibios/os/hal/src/hal_usb.c **** #endif
 913:lib/chibios/os/hal/src/hal_usb.c ****     return;
 914:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_SENDING_STS:
 915:lib/chibios/os/hal/src/hal_usb.c ****     /* Status packet sent, invoking the callback if defined.*/
 916:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0endcb != NULL) {
 917:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 918:lib/chibios/os/hal/src/hal_usb.c ****     }
 919:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_STP_WAITING;
 920:lib/chibios/os/hal/src/hal_usb.c ****     return;
 921:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_STP_WAITING:
 922:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_WAITING_STS:
 923:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 924:lib/chibios/os/hal/src/hal_usb.c ****     /* All the above are invalid states in the IN phase.*/
 925:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine error");
 926:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 927:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_ERROR:
 928:lib/chibios/os/hal/src/hal_usb.c ****     /* Error response, the state machine goes into an error state, the low
 929:lib/chibios/os/hal/src/hal_usb.c ****        level layer will have to reset it to USB_EP0_WAITING_SETUP after
 930:lib/chibios/os/hal/src/hal_usb.c ****        receiving a SETUP packet.*/
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_in(usbp, 0);
 932:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 933:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 934:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 2997              		.loc 1 934 20 discriminator 3 view .LVU995
 2998 005a 84F86430 		strb	r3, [r4, #100]
 935:lib/chibios/os/hal/src/hal_usb.c ****     return;
 2999              		.loc 1 935 5 is_stmt 1 discriminator 3 view .LVU996
 936:lib/chibios/os/hal/src/hal_usb.c ****   default:
 937:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine invalid state");
 3000              		.loc 1 937 5 discriminator 3 view .LVU997
 935:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3001              		.loc 1 935 5 is_stmt 0 discriminator 3 view .LVU998
 3002 005e 0EE0     		b	.L190
 3003              	.LVL182:
 3004              	.L195:
 905:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3005              		.loc 1 905 5 is_stmt 1 view .LVU999
 905:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3006              		.loc 1 905 20 is_stmt 0 view .LVU1000
 3007 0060 1423     		movs	r3, #20
 3008 0062 84F86430 		strb	r3, [r4, #100]
 907:lib/chibios/os/hal/src/hal_usb.c ****     usbStartReceiveI(usbp, 0, NULL, 0);
 3009              		.loc 1 907 5 is_stmt 1 view .LVU1001
 3010              	.LBB628:
 3011              	.LBI628:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3012              		.loc 2 595 20 view .LVU1002
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3013              		.loc 2 597 3 view .LVU1003
 3014              	.LBB629:
 3015              	.LBI629:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 3016              		.loc 3 395 20 view .LVU1004
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 3017              		.loc 3 397 3 view .LVU1005
 3018              	.LBB630:
 3019              	.LBI630:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3020              		.loc 4 708 27 view .LVU1006
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 3021              		.loc 4 710 3 view .LVU1007
 3022              	.LBB631:
 3023              	.LBI631:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3024              		.loc 4 669 27 view .LVU1008
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 3025              		.loc 4 677 3 view .LVU1009
 3026              	.LVL183:
 3027              	.LBB632:
 3028              	.LBI632:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3029              		.loc 5 491 27 view .LVU1010
 3030              	.LBB633:
 3031              		.loc 5 493 3 view .LVU1011
 3032 0066 2023     		movs	r3, #32
 3033              		.syntax unified
 3034              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3035 0068 83F31188 		MSR basepri, r3
 3036              	@ 0 "" 2
 3037              	.LVL184:
 3038              		.loc 5 493 3 is_stmt 0 view .LVU1012
 3039              		.thumb
 3040              		.syntax unified
 3041              	.LBE633:
 3042              	.LBE632:
 3043              	.LBE631:
 3044              	.LBE630:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 3045              		.loc 3 398 34 is_stmt 1 view .LVU1013
 399:./lib/chibios/os/rt/include/chsys.h **** }
 3046              		.loc 3 399 29 view .LVU1014
 3047              	.LBE629:
 3048              	.LBE628:
 908:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3049              		.loc 1 908 5 view .LVU1015
 3050 006c 0023     		movs	r3, #0
 3051 006e 1A46     		mov	r2, r3
 3052 0070 1946     		mov	r1, r3
 3053              	.LVL185:
 908:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3054              		.loc 1 908 5 is_stmt 0 view .LVU1016
 3055 0072 2046     		mov	r0, r4
 3056              	.LVL186:
 908:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3057              		.loc 1 908 5 view .LVU1017
 3058 0074 FFF7FEFF 		bl	usbStartReceiveI
 3059              	.LVL187:
 909:lib/chibios/os/hal/src/hal_usb.c **** #else
 3060              		.loc 1 909 5 is_stmt 1 view .LVU1018
 3061              	.LBB634:
 3062              	.LBI634:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3063              		.loc 2 606 20 view .LVU1019
 3064              	.LBB635:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3065              		.loc 2 608 3 view .LVU1020
 3066              	.LBB636:
 3067              	.LBI636:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 3068              		.loc 3 415 20 view .LVU1021
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 3069              		.loc 3 417 31 view .LVU1022
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 3070              		.loc 3 418 33 view .LVU1023
 3071              		.loc 3 419 3 view .LVU1024
 3072              	.LBB637:
 3073              	.LBI637:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3074              		.loc 4 719 27 view .LVU1025
 3075              		.loc 4 721 3 view .LVU1026
 3076              	.LBB638:
 3077              	.LBI638:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3078              		.loc 4 693 27 view .LVU1027
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 3079              		.loc 4 696 3 view .LVU1028
 3080              	.LBB639:
 3081              	.LBI639:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3082              		.loc 5 491 27 view .LVU1029
 3083              	.LBB640:
 3084              		.loc 5 493 3 view .LVU1030
 3085 0078 0023     		movs	r3, #0
 3086              		.syntax unified
 3087              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3088 007a 83F31188 		MSR basepri, r3
 3089              	@ 0 "" 2
 3090              	.LVL188:
 3091              		.thumb
 3092              		.syntax unified
 3093              	.L190:
 3094              		.loc 5 493 3 is_stmt 0 view .LVU1031
 3095              	.LBE640:
 3096              	.LBE639:
 3097              	.LBE638:
 3098              	.LBE637:
 3099              	.LBE636:
 3100              	.LBE635:
 3101              	.LBE634:
 938:lib/chibios/os/hal/src/hal_usb.c ****   }
 939:lib/chibios/os/hal/src/hal_usb.c **** }
 3102              		.loc 1 939 1 view .LVU1032
 3103 007e 38BD     		pop	{r3, r4, r5, pc}
 3104              	.LVL189:
 3105              	.L194:
 916:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3106              		.loc 1 916 5 is_stmt 1 view .LVU1033
 916:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3107              		.loc 1 916 13 is_stmt 0 view .LVU1034
 3108 0080 036F     		ldr	r3, [r0, #112]
 916:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3109              		.loc 1 916 8 view .LVU1035
 3110 0082 03B1     		cbz	r3, .L197
 917:lib/chibios/os/hal/src/hal_usb.c ****     }
 3111              		.loc 1 917 7 is_stmt 1 view .LVU1036
 3112 0084 9847     		blx	r3
 3113              	.LVL190:
 3114              	.L197:
 919:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3115              		.loc 1 919 5 view .LVU1037
 919:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3116              		.loc 1 919 20 is_stmt 0 view .LVU1038
 3117 0086 0023     		movs	r3, #0
 3118 0088 E7E7     		b	.L211
 3119              	.LVL191:
 3120              	.L191:
 925:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 3121              		.loc 1 925 5 is_stmt 1 discriminator 5 view .LVU1039
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3122              		.loc 1 931 5 discriminator 5 view .LVU1040
 3123 008a 0021     		movs	r1, #0
 3124              	.LVL192:
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3125              		.loc 1 931 5 is_stmt 0 discriminator 5 view .LVU1041
 3126 008c 2046     		mov	r0, r4
 3127              	.LVL193:
 931:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3128              		.loc 1 931 5 discriminator 5 view .LVU1042
 3129 008e FFF7FEFF 		bl	usb_lld_stall_in
 3130              	.LVL194:
 932:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 3131              		.loc 1 932 5 is_stmt 1 discriminator 5 view .LVU1043
 3132 0092 0021     		movs	r1, #0
 3133 0094 2046     		mov	r0, r4
 3134 0096 FFF7FEFF 		bl	usb_lld_stall_out
 3135              	.LVL195:
 933:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3136              		.loc 1 933 5 discriminator 5 view .LVU1044
 3137 009a 6368     		ldr	r3, [r4, #4]
 3138 009c 1B68     		ldr	r3, [r3]
 3139 009e 13B1     		cbz	r3, .L198
 933:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3140              		.loc 1 933 5 discriminator 1 view .LVU1045
 3141 00a0 0621     		movs	r1, #6
 3142 00a2 2046     		mov	r0, r4
 3143 00a4 9847     		blx	r3
 3144              	.LVL196:
 3145              	.L198:
 933:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3146              		.loc 1 933 54 discriminator 3 view .LVU1046
 934:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3147              		.loc 1 934 5 discriminator 3 view .LVU1047
 934:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3148              		.loc 1 934 20 is_stmt 0 discriminator 3 view .LVU1048
 3149 00a6 0623     		movs	r3, #6
 3150 00a8 D7E7     		b	.L211
 3151              		.cfi_endproc
 3152              	.LFE302:
 3154              		.section	.text._usb_ep0out,"ax",%progbits
 3155              		.align	1
 3156              		.global	_usb_ep0out
 3157              		.syntax unified
 3158              		.thumb
 3159              		.thumb_func
 3161              	_usb_ep0out:
 3162              	.LVL197:
 3163              	.LFB303:
 940:lib/chibios/os/hal/src/hal_usb.c **** 
 941:lib/chibios/os/hal/src/hal_usb.c **** /**
 942:lib/chibios/os/hal/src/hal_usb.c ****  * @brief   Default EP0 OUT callback.
 943:lib/chibios/os/hal/src/hal_usb.c ****  * @details This function is used by the low level driver as default handler
 944:lib/chibios/os/hal/src/hal_usb.c ****  *          for EP0 OUT events.
 945:lib/chibios/os/hal/src/hal_usb.c ****  *
 946:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 947:lib/chibios/os/hal/src/hal_usb.c ****  * @param[in] ep        endpoint number, always zero
 948:lib/chibios/os/hal/src/hal_usb.c ****  *
 949:lib/chibios/os/hal/src/hal_usb.c ****  * @notapi
 950:lib/chibios/os/hal/src/hal_usb.c ****  */
 951:lib/chibios/os/hal/src/hal_usb.c **** void _usb_ep0out(USBDriver *usbp, usbep_t ep) {
 3164              		.loc 1 951 47 is_stmt 1 view -0
 3165              		.cfi_startproc
 3166              		@ args = 0, pretend = 0, frame = 0
 3167              		@ frame_needed = 0, uses_anonymous_args = 0
 952:lib/chibios/os/hal/src/hal_usb.c **** 
 953:lib/chibios/os/hal/src/hal_usb.c ****   (void)ep;
 3168              		.loc 1 953 3 view .LVU1050
 954:lib/chibios/os/hal/src/hal_usb.c ****   switch (usbp->ep0state) {
 3169              		.loc 1 954 3 view .LVU1051
 951:lib/chibios/os/hal/src/hal_usb.c **** 
 3170              		.loc 1 951 47 is_stmt 0 view .LVU1052
 3171 0000 10B5     		push	{r4, lr}
 3172              		.cfi_def_cfa_offset 8
 3173              		.cfi_offset 4, -8
 3174              		.cfi_offset 14, -4
 3175              		.loc 1 954 15 view .LVU1053
 3176 0002 90F86430 		ldrb	r3, [r0, #100]	@ zero_extendqisi2
 3177              		.loc 1 954 3 view .LVU1054
 3178 0006 142B     		cmp	r3, #20
 951:lib/chibios/os/hal/src/hal_usb.c **** 
 3179              		.loc 1 951 47 view .LVU1055
 3180 0008 0446     		mov	r4, r0
 3181              		.loc 1 954 3 view .LVU1056
 3182 000a 29D0     		beq	.L213
 3183 000c 17D8     		bhi	.L214
 3184 000e 062B     		cmp	r3, #6
 3185 0010 05D0     		beq	.L215
 3186 0012 01D8     		bhi	.L216
 3187 0014 1BB1     		cbz	r3, .L215
 3188              	.LVL198:
 3189              	.L212:
 955:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 956:lib/chibios/os/hal/src/hal_usb.c ****     /* Receive phase over, sending the zero sized status packet.*/
 957:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_IN_SENDING_STS;
 958:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 959:lib/chibios/os/hal/src/hal_usb.c ****     osalSysLockFromISR();
 960:lib/chibios/os/hal/src/hal_usb.c ****     usbStartTransmitI(usbp, 0, NULL, 0);
 961:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 962:lib/chibios/os/hal/src/hal_usb.c **** #else
 963:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_end_setup(usbp, ep);
 964:lib/chibios/os/hal/src/hal_usb.c **** #endif
 965:lib/chibios/os/hal/src/hal_usb.c ****     return;
 966:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_WAITING_STS:
 967:lib/chibios/os/hal/src/hal_usb.c ****     /* Status packet received, it must be zero sized, invoking the callback
 968:lib/chibios/os/hal/src/hal_usb.c ****        if defined.*/
 969:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 970:lib/chibios/os/hal/src/hal_usb.c ****     if (usbGetReceiveTransactionSizeX(usbp, 0) != 0U) {
 971:lib/chibios/os/hal/src/hal_usb.c ****       break;
 972:lib/chibios/os/hal/src/hal_usb.c ****     }
 973:lib/chibios/os/hal/src/hal_usb.c **** #endif
 974:lib/chibios/os/hal/src/hal_usb.c ****     if (usbp->ep0endcb != NULL) {
 975:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 976:lib/chibios/os/hal/src/hal_usb.c ****     }
 977:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_STP_WAITING;
 978:lib/chibios/os/hal/src/hal_usb.c ****     return;
 979:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_STP_WAITING:
 980:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_TX:
 981:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_WAITING_TX0:
 982:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_IN_SENDING_STS:
 983:lib/chibios/os/hal/src/hal_usb.c ****     /* All the above are invalid states in the IN phase.*/
 984:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine error");
 985:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 986:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_ERROR:
 987:lib/chibios/os/hal/src/hal_usb.c ****     /* Error response, the state machine goes into an error state, the low
 988:lib/chibios/os/hal/src/hal_usb.c ****        level layer will have to reset it to USB_EP0_WAITING_SETUP after
 989:lib/chibios/os/hal/src/hal_usb.c ****        receiving a SETUP packet.*/
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_in(usbp, 0);
 991:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 992:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 993:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 994:lib/chibios/os/hal/src/hal_usb.c ****     return;
 995:lib/chibios/os/hal/src/hal_usb.c ****   default:
 996:lib/chibios/os/hal/src/hal_usb.c ****     osalDbgAssert(false, "EP0 state machine invalid state");
 997:lib/chibios/os/hal/src/hal_usb.c ****   }
 998:lib/chibios/os/hal/src/hal_usb.c **** }
 3190              		.loc 1 998 1 view .LVU1057
 3191 0016 10BD     		pop	{r4, pc}
 3192              	.LVL199:
 3193              	.L216:
 954:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 3194              		.loc 1 954 3 view .LVU1058
 3195 0018 093B     		subs	r3, r3, #9
 3196 001a 022B     		cmp	r3, #2
 3197 001c FBD8     		bhi	.L212
 3198              	.L215:
 984:lib/chibios/os/hal/src/hal_usb.c ****     /* Falls through.*/
 3199              		.loc 1 984 5 is_stmt 1 discriminator 5 view .LVU1059
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3200              		.loc 1 990 5 discriminator 5 view .LVU1060
 3201 001e 0021     		movs	r1, #0
 3202              	.LVL200:
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3203              		.loc 1 990 5 is_stmt 0 discriminator 5 view .LVU1061
 3204 0020 2046     		mov	r0, r4
 3205              	.LVL201:
 990:lib/chibios/os/hal/src/hal_usb.c ****     usb_lld_stall_out(usbp, 0);
 3206              		.loc 1 990 5 discriminator 5 view .LVU1062
 3207 0022 FFF7FEFF 		bl	usb_lld_stall_in
 3208              	.LVL202:
 991:lib/chibios/os/hal/src/hal_usb.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_STALLED);
 3209              		.loc 1 991 5 is_stmt 1 discriminator 5 view .LVU1063
 3210 0026 0021     		movs	r1, #0
 3211 0028 2046     		mov	r0, r4
 3212 002a FFF7FEFF 		bl	usb_lld_stall_out
 3213              	.LVL203:
 992:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3214              		.loc 1 992 5 discriminator 5 view .LVU1064
 3215 002e 6368     		ldr	r3, [r4, #4]
 3216 0030 1B68     		ldr	r3, [r3]
 3217 0032 13B1     		cbz	r3, .L219
 992:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3218              		.loc 1 992 5 discriminator 1 view .LVU1065
 3219 0034 0621     		movs	r1, #6
 3220 0036 2046     		mov	r0, r4
 3221 0038 9847     		blx	r3
 3222              	.LVL204:
 3223              	.L219:
 992:lib/chibios/os/hal/src/hal_usb.c ****     usbp->ep0state = USB_EP0_ERROR;
 3224              		.loc 1 992 54 discriminator 3 view .LVU1066
 993:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3225              		.loc 1 993 5 discriminator 3 view .LVU1067
 993:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3226              		.loc 1 993 20 is_stmt 0 discriminator 3 view .LVU1068
 3227 003a 0623     		movs	r3, #6
 3228 003c 19E0     		b	.L232
 3229              	.LVL205:
 3230              	.L214:
 954:lib/chibios/os/hal/src/hal_usb.c ****   case USB_EP0_OUT_RX:
 3231              		.loc 1 954 3 view .LVU1069
 3232 003e 152B     		cmp	r3, #21
 3233 0040 E9D1     		bne	.L212
 957:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3234              		.loc 1 957 5 is_stmt 1 view .LVU1070
 957:lib/chibios/os/hal/src/hal_usb.c **** #if (USB_EP0_STATUS_STAGE == USB_EP0_STATUS_STAGE_SW)
 3235              		.loc 1 957 20 is_stmt 0 view .LVU1071
 3236 0042 0B23     		movs	r3, #11
 3237 0044 80F86430 		strb	r3, [r0, #100]
 959:lib/chibios/os/hal/src/hal_usb.c ****     usbStartTransmitI(usbp, 0, NULL, 0);
 3238              		.loc 1 959 5 is_stmt 1 view .LVU1072
 3239              	.LBB641:
 3240              	.LBI641:
 595:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3241              		.loc 2 595 20 view .LVU1073
 597:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3242              		.loc 2 597 3 view .LVU1074
 3243              	.LBB642:
 3244              	.LBI642:
 395:./lib/chibios/os/rt/include/chsys.h **** 
 3245              		.loc 3 395 20 view .LVU1075
 397:./lib/chibios/os/rt/include/chsys.h ****   _stats_start_measure_crit_isr();
 3246              		.loc 3 397 3 view .LVU1076
 3247              	.LBB643:
 3248              	.LBI643:
 708:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3249              		.loc 4 708 27 view .LVU1077
 710:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** }
 3250              		.loc 4 710 3 view .LVU1078
 3251              	.LBB644:
 3252              	.LBI644:
 669:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3253              		.loc 4 669 27 view .LVU1079
 677:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #if defined(__CM7_REV)
 3254              		.loc 4 677 3 view .LVU1080
 3255              	.LVL206:
 3256              	.LBB645:
 3257              	.LBI645:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3258              		.loc 5 491 27 view .LVU1081
 3259              	.LBB646:
 3260              		.loc 5 493 3 view .LVU1082
 3261 0048 2023     		movs	r3, #32
 3262              		.syntax unified
 3263              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3264 004a 83F31188 		MSR basepri, r3
 3265              	@ 0 "" 2
 3266              	.LVL207:
 3267              		.loc 5 493 3 is_stmt 0 view .LVU1083
 3268              		.thumb
 3269              		.syntax unified
 3270              	.LBE646:
 3271              	.LBE645:
 3272              	.LBE644:
 3273              	.LBE643:
 398:./lib/chibios/os/rt/include/chsys.h ****   _dbg_check_lock_from_isr();
 3274              		.loc 3 398 34 is_stmt 1 view .LVU1084
 399:./lib/chibios/os/rt/include/chsys.h **** }
 3275              		.loc 3 399 29 view .LVU1085
 3276              	.LBE642:
 3277              	.LBE641:
 960:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3278              		.loc 1 960 5 view .LVU1086
 3279 004e 0023     		movs	r3, #0
 3280 0050 1A46     		mov	r2, r3
 3281 0052 1946     		mov	r1, r3
 3282              	.LVL208:
 960:lib/chibios/os/hal/src/hal_usb.c ****     osalSysUnlockFromISR();
 3283              		.loc 1 960 5 is_stmt 0 view .LVU1087
 3284 0054 FFF7FEFF 		bl	usbStartTransmitI
 3285              	.LVL209:
 961:lib/chibios/os/hal/src/hal_usb.c **** #else
 3286              		.loc 1 961 5 is_stmt 1 view .LVU1088
 3287              	.LBB647:
 3288              	.LBI647:
 606:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3289              		.loc 2 606 20 view .LVU1089
 3290              	.LBB648:
 608:./lib/chibios/os/hal/osal/rt-nil/osal.h **** }
 3291              		.loc 2 608 3 view .LVU1090
 3292              	.LBB649:
 3293              	.LBI649:
 415:./lib/chibios/os/rt/include/chsys.h **** 
 3294              		.loc 3 415 20 view .LVU1091
 417:./lib/chibios/os/rt/include/chsys.h ****   _stats_stop_measure_crit_isr();
 3295              		.loc 3 417 31 view .LVU1092
 418:./lib/chibios/os/rt/include/chsys.h ****   port_unlock_from_isr();
 3296              		.loc 3 418 33 view .LVU1093
 3297              		.loc 3 419 3 view .LVU1094
 3298              	.LBB650:
 3299              	.LBI650:
 719:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3300              		.loc 4 719 27 view .LVU1095
 3301              		.loc 4 721 3 view .LVU1096
 3302              	.LBB651:
 3303              	.LBI651:
 693:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** 
 3304              		.loc 4 693 27 view .LVU1097
 696:./lib/chibios/os/common/ports/ARMCMx/chcore_v7m.h **** #else /* CORTEX_SIMPLIFIED_PRIORITY */
 3305              		.loc 4 696 3 view .LVU1098
 3306              	.LBB652:
 3307              	.LBI652:
 491:./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h **** {
 3308              		.loc 5 491 27 view .LVU1099
 3309              	.LBB653:
 3310              		.loc 5 493 3 view .LVU1100
 3311 0058 0023     		movs	r3, #0
 3312              		.syntax unified
 3313              	@ 493 "./lib/chibios/os/common/ext/ARM/CMSIS/Core/Include/cmsis_gcc.h" 1
 3314 005a 83F31188 		MSR basepri, r3
 3315              	@ 0 "" 2
 3316              	.LVL210:
 3317              		.loc 5 493 3 is_stmt 0 view .LVU1101
 3318              		.thumb
 3319              		.syntax unified
 3320              	.LBE653:
 3321              	.LBE652:
 3322              	.LBE651:
 3323              	.LBE650:
 3324              	.LBE649:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3325              		.loc 2 609 1 view .LVU1102
 3326 005e DAE7     		b	.L212
 3327              	.LVL211:
 3328              	.L213:
 609:./lib/chibios/os/hal/osal/rt-nil/osal.h **** 
 3329              		.loc 2 609 1 view .LVU1103
 3330              	.LBE648:
 3331              	.LBE647:
 970:lib/chibios/os/hal/src/hal_usb.c ****       break;
 3332              		.loc 1 970 5 is_stmt 1 view .LVU1104
 970:lib/chibios/os/hal/src/hal_usb.c ****       break;
 3333              		.loc 1 970 9 is_stmt 0 view .LVU1105
 3334 0060 C368     		ldr	r3, [r0, #12]
 3335 0062 9B69     		ldr	r3, [r3, #24]
 970:lib/chibios/os/hal/src/hal_usb.c ****       break;
 3336              		.loc 1 970 8 view .LVU1106
 3337 0064 5B68     		ldr	r3, [r3, #4]
 3338 0066 002B     		cmp	r3, #0
 3339 0068 D5D1     		bne	.L212
 974:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3340              		.loc 1 974 5 is_stmt 1 view .LVU1107
 974:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3341              		.loc 1 974 13 is_stmt 0 view .LVU1108
 3342 006a 036F     		ldr	r3, [r0, #112]
 974:lib/chibios/os/hal/src/hal_usb.c ****       usbp->ep0endcb(usbp);
 3343              		.loc 1 974 8 view .LVU1109
 3344 006c 03B1     		cbz	r3, .L218
 975:lib/chibios/os/hal/src/hal_usb.c ****     }
 3345              		.loc 1 975 7 is_stmt 1 view .LVU1110
 3346 006e 9847     		blx	r3
 3347              	.LVL212:
 3348              	.L218:
 977:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3349              		.loc 1 977 5 view .LVU1111
 977:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3350              		.loc 1 977 20 is_stmt 0 view .LVU1112
 3351 0070 0023     		movs	r3, #0
 3352              	.L232:
 993:lib/chibios/os/hal/src/hal_usb.c ****     return;
 3353              		.loc 1 993 20 discriminator 3 view .LVU1113
 3354 0072 84F86430 		strb	r3, [r4, #100]
 994:lib/chibios/os/hal/src/hal_usb.c ****   default:
 3355              		.loc 1 994 5 is_stmt 1 discriminator 3 view .LVU1114
 996:lib/chibios/os/hal/src/hal_usb.c ****   }
 3356              		.loc 1 996 5 discriminator 3 view .LVU1115
 994:lib/chibios/os/hal/src/hal_usb.c ****   default:
 3357              		.loc 1 994 5 is_stmt 0 discriminator 3 view .LVU1116
 3358 0076 CEE7     		b	.L212
 3359              		.cfi_endproc
 3360              	.LFE303:
 3362              		.section	.rodata.halted_status,"a"
 3365              	halted_status:
 3366 0000 0100     		.ascii	"\001\000"
 3367              		.section	.rodata.active_status,"a"
 3370              	active_status:
 3371 0000 0000     		.space	2
 3372              		.section	.rodata.zero_status,"a"
 3375              	zero_status:
 3376 0000 0000     		.space	2
 3377              		.text
 3378              	.Letext0:
 3379              		.file 6 "/usr/lib/gcc/arm-none-eabi/12.2.0/include/stddef.h"
 3380              		.file 7 "/usr/arm-none-eabi/include/machine/_default_types.h"
 3381              		.file 8 "/usr/arm-none-eabi/include/sys/_stdint.h"
 3382              		.file 9 "./lib/chibios/os/common/ports/ARMCMx/compilers/GCC/chtypes.h"
 3383              		.file 10 "./lib/chibios/os/rt/include/chsystypes.h"
 3384              		.file 11 "./lib/chibios/os/rt/include/chschd.h"
 3385              		.file 12 "./lib/chibios/os/rt/include/chlists.h"
 3386              		.file 13 "./lib/chibios/os/rt/include/chtime.h"
 3387              		.file 14 "./lib/chibios/os/rt/include/chsem.h"
 3388              		.file 15 "./lib/chibios/os/rt/include/chmtx.h"
 3389              		.file 16 "./lib/chibios/os/hal/include/hal_usb.h"
 3390              		.file 17 "./lib/chibios/os/hal/ports/STM32/LLD/USBv1/hal_usb_lld.h"
 3391              		.file 18 "./lib/chibios/os/hal/ports/STM32/LLD/USBv1/stm32_usb.h"
 3392              		.file 19 "./lib/chibios/os/rt/include/chthreads.h"
 3393              		.file 20 "/usr/arm-none-eabi/include/string.h"
 3394              		.file 21 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 hal_usb.c
     /tmp/ccRj8UNh.s:21     .text.set_address:0000000000000000 $t
     /tmp/ccRj8UNh.s:26     .text.set_address:0000000000000000 set_address
     /tmp/ccRj8UNh.s:69     .text.usbInit:0000000000000000 $t
     /tmp/ccRj8UNh.s:75     .text.usbInit:0000000000000000 usbInit
     /tmp/ccRj8UNh.s:89     .text.usbObjectInit:0000000000000000 $t
     /tmp/ccRj8UNh.s:95     .text.usbObjectInit:0000000000000000 usbObjectInit
     /tmp/ccRj8UNh.s:138    .text.usbStart:0000000000000000 $t
     /tmp/ccRj8UNh.s:144    .text.usbStart:0000000000000000 usbStart
     /tmp/ccRj8UNh.s:295    .text.usbStop:0000000000000000 $t
     /tmp/ccRj8UNh.s:301    .text.usbStop:0000000000000000 usbStop
     /tmp/ccRj8UNh.s:509    .text.usbInitEndpointI:0000000000000000 $t
     /tmp/ccRj8UNh.s:515    .text.usbInitEndpointI:0000000000000000 usbInitEndpointI
     /tmp/ccRj8UNh.s:595    .text.usbDisableEndpointsI:0000000000000000 $t
     /tmp/ccRj8UNh.s:601    .text.usbDisableEndpointsI:0000000000000000 usbDisableEndpointsI
     /tmp/ccRj8UNh.s:721    .text.usbStartReceiveI:0000000000000000 $t
     /tmp/ccRj8UNh.s:727    .text.usbStartReceiveI:0000000000000000 usbStartReceiveI
     /tmp/ccRj8UNh.s:800    .text.usbStartTransmitI:0000000000000000 $t
     /tmp/ccRj8UNh.s:806    .text.usbStartTransmitI:0000000000000000 usbStartTransmitI
     /tmp/ccRj8UNh.s:879    .text.usbReceive:0000000000000000 $t
     /tmp/ccRj8UNh.s:885    .text.usbReceive:0000000000000000 usbReceive
     /tmp/ccRj8UNh.s:1078   .text.usbTransmit:0000000000000000 $t
     /tmp/ccRj8UNh.s:1084   .text.usbTransmit:0000000000000000 usbTransmit
     /tmp/ccRj8UNh.s:1277   .text.usbStallReceiveI:0000000000000000 $t
     /tmp/ccRj8UNh.s:1283   .text.usbStallReceiveI:0000000000000000 usbStallReceiveI
     /tmp/ccRj8UNh.s:1327   .text.usbStallTransmitI:0000000000000000 $t
     /tmp/ccRj8UNh.s:1333   .text.usbStallTransmitI:0000000000000000 usbStallTransmitI
     /tmp/ccRj8UNh.s:1377   .text.usbWakeupHost:0000000000000000 $t
     /tmp/ccRj8UNh.s:1383   .text.usbWakeupHost:0000000000000000 usbWakeupHost
     /tmp/ccRj8UNh.s:1432   .text.usbWakeupHost:0000000000000024 $d
     /tmp/ccRj8UNh.s:1437   .text._usb_reset:0000000000000000 $t
     /tmp/ccRj8UNh.s:1443   .text._usb_reset:0000000000000000 _usb_reset
     /tmp/ccRj8UNh.s:1694   .text._usb_suspend:0000000000000000 $t
     /tmp/ccRj8UNh.s:1700   .text._usb_suspend:0000000000000000 _usb_suspend
     /tmp/ccRj8UNh.s:1909   .text._usb_wakeup:0000000000000000 $t
     /tmp/ccRj8UNh.s:1915   .text._usb_wakeup:0000000000000000 _usb_wakeup
     /tmp/ccRj8UNh.s:1944   .text._usb_ep0setup:0000000000000000 $t
     /tmp/ccRj8UNh.s:1950   .text._usb_ep0setup:0000000000000000 _usb_ep0setup
     /tmp/ccRj8UNh.s:2824   .text._usb_ep0setup:0000000000000284 $d
     /tmp/ccRj8UNh.s:3375   .rodata.zero_status:0000000000000000 zero_status
     /tmp/ccRj8UNh.s:3370   .rodata.active_status:0000000000000000 active_status
     /tmp/ccRj8UNh.s:3365   .rodata.halted_status:0000000000000000 halted_status
     /tmp/ccRj8UNh.s:2832   .text._usb_ep0in:0000000000000000 $t
     /tmp/ccRj8UNh.s:2838   .text._usb_ep0in:0000000000000000 _usb_ep0in
     /tmp/ccRj8UNh.s:2870   .text._usb_ep0in:000000000000001c $d
     /tmp/ccRj8UNh.s:2886   .text._usb_ep0in:000000000000002c $t
     /tmp/ccRj8UNh.s:3155   .text._usb_ep0out:0000000000000000 $t
     /tmp/ccRj8UNh.s:3161   .text._usb_ep0out:0000000000000000 _usb_ep0out
     /tmp/ccRj8UNh.s:3371   .rodata.active_status:0000000000000000 $d
     /tmp/ccRj8UNh.s:3376   .rodata.zero_status:0000000000000000 $d

UNDEFINED SYMBOLS
usb_lld_set_address
usb_lld_init
memset
usb_lld_start
usb_lld_stop
chThdResumeI
chSchRescheduleS
usb_lld_init_endpoint
usb_lld_disable_endpoints
usb_lld_start_out
usb_lld_start_in
chThdSuspendTimeoutS
usb_lld_stall_out
usb_lld_stall_in
chThdSleep
usb_lld_reset
usb_lld_read_setup
usb_lld_get_status_in
usb_lld_get_status_out
usb_lld_clear_in
usb_lld_clear_out
