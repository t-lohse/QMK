   1               		.file	"serial.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.sync_recv,"ax",@progbits
  12               	sync_recv:
  13               	.LFB40:
  14               		.file 1 "platforms/avr/drivers/serial.c"
   1:platforms/avr/drivers/serial.c **** /*
   2:platforms/avr/drivers/serial.c ****  * WARNING: be careful changing this code, it is very timing dependent
   3:platforms/avr/drivers/serial.c ****  *
   4:platforms/avr/drivers/serial.c ****  * 2018-10-28 checked
   5:platforms/avr/drivers/serial.c ****  *  avr-gcc 4.9.2
   6:platforms/avr/drivers/serial.c ****  *  avr-gcc 5.4.0
   7:platforms/avr/drivers/serial.c ****  *  avr-gcc 7.3.0
   8:platforms/avr/drivers/serial.c ****  */
   9:platforms/avr/drivers/serial.c **** 
  10:platforms/avr/drivers/serial.c **** #ifndef F_CPU
  11:platforms/avr/drivers/serial.c **** #    define F_CPU 16000000
  12:platforms/avr/drivers/serial.c **** #endif
  13:platforms/avr/drivers/serial.c **** 
  14:platforms/avr/drivers/serial.c **** #include <avr/io.h>
  15:platforms/avr/drivers/serial.c **** #include <avr/interrupt.h>
  16:platforms/avr/drivers/serial.c **** #include <util/delay.h>
  17:platforms/avr/drivers/serial.c **** #include <stddef.h>
  18:platforms/avr/drivers/serial.c **** #include <stdbool.h>
  19:platforms/avr/drivers/serial.c **** #include "serial.h"
  20:platforms/avr/drivers/serial.c **** 
  21:platforms/avr/drivers/serial.c **** #ifdef SOFT_SERIAL_PIN
  22:platforms/avr/drivers/serial.c **** 
  23:platforms/avr/drivers/serial.c **** #    if !(defined(__AVR_AT90USB646__) || defined(__AVR_AT90USB647__) || defined(__AVR_AT90USB1286__
  24:platforms/avr/drivers/serial.c **** #        error serial.c is not supported for the currently selected MCU
  25:platforms/avr/drivers/serial.c **** #    endif
  26:platforms/avr/drivers/serial.c **** // if using ATmega32U4/2, AT90USBxxx I2C, can not use PD0 and PD1 in soft serial.
  27:platforms/avr/drivers/serial.c **** #    if defined(__AVR_ATmega16U4__) || defined(__AVR_ATmega32U4__) || defined(__AVR_AT90USB646__) |
  28:platforms/avr/drivers/serial.c **** #        if defined(USE_AVR_I2C) && (SOFT_SERIAL_PIN == D0 || SOFT_SERIAL_PIN == D1)
  29:platforms/avr/drivers/serial.c **** #            error Using I2C, so can not use PD0, PD1
  30:platforms/avr/drivers/serial.c **** #        endif
  31:platforms/avr/drivers/serial.c **** #    endif
  32:platforms/avr/drivers/serial.c **** // PD0..PD3, common config
  33:platforms/avr/drivers/serial.c **** #    if SOFT_SERIAL_PIN == D0
  34:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT0)
  35:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC00) | _BV(ISC01)))
  36:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT0_vect
  37:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  38:platforms/avr/drivers/serial.c **** #    elif SOFT_SERIAL_PIN == D1
  39:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT1)
  40:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC10) | _BV(ISC11)))
  41:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT1_vect
  42:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  43:platforms/avr/drivers/serial.c **** #    elif SOFT_SERIAL_PIN == D2
  44:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT2)
  45:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC20) | _BV(ISC21)))
  46:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT2_vect
  47:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  48:platforms/avr/drivers/serial.c **** #    elif SOFT_SERIAL_PIN == D3
  49:platforms/avr/drivers/serial.c **** #        define EIMSK_BIT _BV(INT3)
  50:platforms/avr/drivers/serial.c **** #        define EICRx_BIT (~(_BV(ISC30) | _BV(ISC31)))
  51:platforms/avr/drivers/serial.c **** #        define SERIAL_PIN_INTERRUPT INT3_vect
  52:platforms/avr/drivers/serial.c **** #        define EICRx EICRA
  53:platforms/avr/drivers/serial.c **** #    endif
  54:platforms/avr/drivers/serial.c **** 
  55:platforms/avr/drivers/serial.c **** // ATmegaxxU2/AT90USB162 specific config
  56:platforms/avr/drivers/serial.c **** #    if defined(__AVR_ATmega16U2__) || defined(__AVR_ATmega32U2__) || defined(__AVR_AT90USB162__)
  57:platforms/avr/drivers/serial.c **** // PD4(INT5), PD6(INT6), PD7(INT7), PC7(INT4)
  58:platforms/avr/drivers/serial.c **** #        if SOFT_SERIAL_PIN == D4
  59:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT5)
  60:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC50) | _BV(ISC51)))
  61:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT5_vect
  62:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  63:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == D6
  64:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT6)
  65:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC60) | _BV(ISC61)))
  66:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT6_vect
  67:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  68:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == D7
  69:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT7)
  70:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC70) | _BV(ISC71)))
  71:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT7_vect
  72:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  73:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == C7
  74:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT4)
  75:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC40) | _BV(ISC41)))
  76:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT4_vect
  77:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  78:platforms/avr/drivers/serial.c **** #        endif
  79:platforms/avr/drivers/serial.c **** #    endif
  80:platforms/avr/drivers/serial.c **** 
  81:platforms/avr/drivers/serial.c **** // ATmegaxxU4 specific config
  82:platforms/avr/drivers/serial.c **** #    if defined(__AVR_ATmega16U4__) || defined(__AVR_ATmega32U4__)
  83:platforms/avr/drivers/serial.c **** // PE6(INT6)
  84:platforms/avr/drivers/serial.c **** #        if SOFT_SERIAL_PIN == E6
  85:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT6)
  86:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC60) | _BV(ISC61)))
  87:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT6_vect
  88:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
  89:platforms/avr/drivers/serial.c **** #        endif
  90:platforms/avr/drivers/serial.c **** #    endif
  91:platforms/avr/drivers/serial.c **** 
  92:platforms/avr/drivers/serial.c **** // AT90USBxxx specific config
  93:platforms/avr/drivers/serial.c **** #    if defined(__AVR_AT90USB646__) || defined(__AVR_AT90USB647__) || defined(__AVR_AT90USB1286__) 
  94:platforms/avr/drivers/serial.c **** // PE4..PE7(INT4..INT7)
  95:platforms/avr/drivers/serial.c **** #        if SOFT_SERIAL_PIN == E4
  96:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT4)
  97:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC40) | _BV(ISC41)))
  98:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT4_vect
  99:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 100:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == E5
 101:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT5)
 102:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC50) | _BV(ISC51)))
 103:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT5_vect
 104:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 105:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == E6
 106:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT6)
 107:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC60) | _BV(ISC61)))
 108:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT6_vect
 109:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 110:platforms/avr/drivers/serial.c **** #        elif SOFT_SERIAL_PIN == E7
 111:platforms/avr/drivers/serial.c **** #            define EIMSK_BIT _BV(INT7)
 112:platforms/avr/drivers/serial.c **** #            define EICRx_BIT (~(_BV(ISC70) | _BV(ISC71)))
 113:platforms/avr/drivers/serial.c **** #            define SERIAL_PIN_INTERRUPT INT7_vect
 114:platforms/avr/drivers/serial.c **** #            define EICRx EICRB
 115:platforms/avr/drivers/serial.c **** #        endif
 116:platforms/avr/drivers/serial.c **** #    endif
 117:platforms/avr/drivers/serial.c **** 
 118:platforms/avr/drivers/serial.c **** #    ifndef SERIAL_PIN_INTERRUPT
 119:platforms/avr/drivers/serial.c **** #        error invalid SOFT_SERIAL_PIN value
 120:platforms/avr/drivers/serial.c **** #    endif
 121:platforms/avr/drivers/serial.c **** 
 122:platforms/avr/drivers/serial.c **** #    define setPinInputHigh(pin) (DDRx_ADDRESS(pin) &= ~_BV((pin)&0xF), PORTx_ADDRESS(pin) |= _BV((
 123:platforms/avr/drivers/serial.c **** #    define setPinOutput(pin) (DDRx_ADDRESS(pin) |= _BV((pin)&0xF))
 124:platforms/avr/drivers/serial.c **** #    define writePinHigh(pin) (PORTx_ADDRESS(pin) |= _BV((pin)&0xF))
 125:platforms/avr/drivers/serial.c **** #    define writePinLow(pin) (PORTx_ADDRESS(pin) &= ~_BV((pin)&0xF))
 126:platforms/avr/drivers/serial.c **** #    define readPin(pin) ((bool)(PINx_ADDRESS(pin) & _BV((pin)&0xF)))
 127:platforms/avr/drivers/serial.c **** 
 128:platforms/avr/drivers/serial.c **** #    define ALWAYS_INLINE __attribute__((always_inline))
 129:platforms/avr/drivers/serial.c **** #    define NO_INLINE __attribute__((noinline))
 130:platforms/avr/drivers/serial.c **** #    define _delay_sub_us(x) __builtin_avr_delay_cycles(x)
 131:platforms/avr/drivers/serial.c **** 
 132:platforms/avr/drivers/serial.c **** // parity check
 133:platforms/avr/drivers/serial.c **** #    define ODD_PARITY 1
 134:platforms/avr/drivers/serial.c **** #    define EVEN_PARITY 0
 135:platforms/avr/drivers/serial.c **** #    define PARITY EVEN_PARITY
 136:platforms/avr/drivers/serial.c **** 
 137:platforms/avr/drivers/serial.c **** #    ifdef SERIAL_DELAY
 138:platforms/avr/drivers/serial.c **** // custom setup in config.h
 139:platforms/avr/drivers/serial.c **** // #define TID_SEND_ADJUST 2
 140:platforms/avr/drivers/serial.c **** // #define SERIAL_DELAY 6             // micro sec
 141:platforms/avr/drivers/serial.c **** // #define READ_WRITE_START_ADJUST 30 // cycles
 142:platforms/avr/drivers/serial.c **** // #define READ_WRITE_WIDTH_ADJUST 8 // cycles
 143:platforms/avr/drivers/serial.c **** #    else
 144:platforms/avr/drivers/serial.c **** // ============ Standard setups ============
 145:platforms/avr/drivers/serial.c **** 
 146:platforms/avr/drivers/serial.c **** #        ifndef SELECT_SOFT_SERIAL_SPEED
 147:platforms/avr/drivers/serial.c **** #            define SELECT_SOFT_SERIAL_SPEED 1
 148:platforms/avr/drivers/serial.c **** //  0: about 189kbps (Experimental only)
 149:platforms/avr/drivers/serial.c **** //  1: about 137kbps (default)
 150:platforms/avr/drivers/serial.c **** //  2: about 75kbps
 151:platforms/avr/drivers/serial.c **** //  3: about 39kbps
 152:platforms/avr/drivers/serial.c **** //  4: about 26kbps
 153:platforms/avr/drivers/serial.c **** //  5: about 20kbps
 154:platforms/avr/drivers/serial.c **** #        endif
 155:platforms/avr/drivers/serial.c **** 
 156:platforms/avr/drivers/serial.c **** #        if __GNUC__ < 6
 157:platforms/avr/drivers/serial.c **** #            define TID_SEND_ADJUST 14
 158:platforms/avr/drivers/serial.c **** #        else
 159:platforms/avr/drivers/serial.c **** #            define TID_SEND_ADJUST 2
 160:platforms/avr/drivers/serial.c **** #        endif
 161:platforms/avr/drivers/serial.c **** 
 162:platforms/avr/drivers/serial.c **** #        if SELECT_SOFT_SERIAL_SPEED == 0
 163:platforms/avr/drivers/serial.c **** // Very High speed
 164:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 4  // micro sec
 165:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 166:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 33  // cycles
 167:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3   // cycles
 168:platforms/avr/drivers/serial.c **** #            else
 169:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 34  // cycles
 170:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7   // cycles
 171:platforms/avr/drivers/serial.c **** #            endif
 172:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 1
 173:platforms/avr/drivers/serial.c **** // High speed
 174:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 6  // micro sec
 175:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 176:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 30  // cycles
 177:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3   // cycles
 178:platforms/avr/drivers/serial.c **** #            else
 179:platforms/avr/drivers/serial.c **** #                define READ_WRITE_START_ADJUST 33  // cycles
 180:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7   // cycles
 181:platforms/avr/drivers/serial.c **** #            endif
 182:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 2
 183:platforms/avr/drivers/serial.c **** // Middle speed
 184:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 12             // micro sec
 185:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 186:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 187:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 188:platforms/avr/drivers/serial.c **** #            else
 189:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 190:platforms/avr/drivers/serial.c **** #            endif
 191:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 3
 192:platforms/avr/drivers/serial.c **** // Low speed
 193:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 24             // micro sec
 194:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 195:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 196:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 197:platforms/avr/drivers/serial.c **** #            else
 198:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 199:platforms/avr/drivers/serial.c **** #            endif
 200:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 4
 201:platforms/avr/drivers/serial.c **** // Very Low speed
 202:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 36             // micro sec
 203:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 204:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 205:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 206:platforms/avr/drivers/serial.c **** #            else
 207:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 208:platforms/avr/drivers/serial.c **** #            endif
 209:platforms/avr/drivers/serial.c **** #        elif SELECT_SOFT_SERIAL_SPEED == 5
 210:platforms/avr/drivers/serial.c **** // Ultra Low speed
 211:platforms/avr/drivers/serial.c **** #            define SERIAL_DELAY 48             // micro sec
 212:platforms/avr/drivers/serial.c **** #            define READ_WRITE_START_ADJUST 30  // cycles
 213:platforms/avr/drivers/serial.c **** #            if __GNUC__ < 6
 214:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 3  // cycles
 215:platforms/avr/drivers/serial.c **** #            else
 216:platforms/avr/drivers/serial.c **** #                define READ_WRITE_WIDTH_ADJUST 7  // cycles
 217:platforms/avr/drivers/serial.c **** #            endif
 218:platforms/avr/drivers/serial.c **** #        else
 219:platforms/avr/drivers/serial.c **** #            error invalid SELECT_SOFT_SERIAL_SPEED value
 220:platforms/avr/drivers/serial.c **** #        endif /* SELECT_SOFT_SERIAL_SPEED */
 221:platforms/avr/drivers/serial.c **** #    endif     /* SERIAL_DELAY */
 222:platforms/avr/drivers/serial.c **** 
 223:platforms/avr/drivers/serial.c **** #    define SERIAL_DELAY_HALF1 (SERIAL_DELAY / 2)
 224:platforms/avr/drivers/serial.c **** #    define SERIAL_DELAY_HALF2 (SERIAL_DELAY - SERIAL_DELAY / 2)
 225:platforms/avr/drivers/serial.c **** 
 226:platforms/avr/drivers/serial.c **** #    define SLAVE_INT_WIDTH_US 1
 227:platforms/avr/drivers/serial.c **** #    define SLAVE_INT_ACK_WIDTH_UNIT 2
 228:platforms/avr/drivers/serial.c **** #    define SLAVE_INT_ACK_WIDTH 4
 229:platforms/avr/drivers/serial.c **** 
 230:platforms/avr/drivers/serial.c **** inline static void serial_delay(void) ALWAYS_INLINE;
 231:platforms/avr/drivers/serial.c **** inline static void serial_delay(void) { _delay_us(SERIAL_DELAY); }
 232:platforms/avr/drivers/serial.c **** 
 233:platforms/avr/drivers/serial.c **** inline static void serial_delay_half1(void) ALWAYS_INLINE;
 234:platforms/avr/drivers/serial.c **** inline static void serial_delay_half1(void) { _delay_us(SERIAL_DELAY_HALF1); }
 235:platforms/avr/drivers/serial.c **** 
 236:platforms/avr/drivers/serial.c **** inline static void serial_delay_half2(void) ALWAYS_INLINE;
 237:platforms/avr/drivers/serial.c **** inline static void serial_delay_half2(void) { _delay_us(SERIAL_DELAY_HALF2); }
 238:platforms/avr/drivers/serial.c **** 
 239:platforms/avr/drivers/serial.c **** inline static void serial_output(void) ALWAYS_INLINE;
 240:platforms/avr/drivers/serial.c **** inline static void serial_output(void) { setPinOutput(SOFT_SERIAL_PIN); }
 241:platforms/avr/drivers/serial.c **** 
 242:platforms/avr/drivers/serial.c **** // make the serial pin an input with pull-up resistor
 243:platforms/avr/drivers/serial.c **** inline static void serial_input_with_pullup(void) ALWAYS_INLINE;
 244:platforms/avr/drivers/serial.c **** inline static void serial_input_with_pullup(void) { setPinInputHigh(SOFT_SERIAL_PIN); }
 245:platforms/avr/drivers/serial.c **** 
 246:platforms/avr/drivers/serial.c **** inline static uint8_t serial_read_pin(void) ALWAYS_INLINE;
 247:platforms/avr/drivers/serial.c **** inline static uint8_t serial_read_pin(void) { return !!readPin(SOFT_SERIAL_PIN); }
 248:platforms/avr/drivers/serial.c **** 
 249:platforms/avr/drivers/serial.c **** inline static void serial_low(void) ALWAYS_INLINE;
 250:platforms/avr/drivers/serial.c **** inline static void serial_low(void) { writePinLow(SOFT_SERIAL_PIN); }
 251:platforms/avr/drivers/serial.c **** 
 252:platforms/avr/drivers/serial.c **** inline static void serial_high(void) ALWAYS_INLINE;
 253:platforms/avr/drivers/serial.c **** inline static void serial_high(void) { writePinHigh(SOFT_SERIAL_PIN); }
 254:platforms/avr/drivers/serial.c **** 
 255:platforms/avr/drivers/serial.c **** void soft_serial_initiator_init(void) {
 256:platforms/avr/drivers/serial.c ****     serial_output();
 257:platforms/avr/drivers/serial.c ****     serial_high();
 258:platforms/avr/drivers/serial.c **** }
 259:platforms/avr/drivers/serial.c **** 
 260:platforms/avr/drivers/serial.c **** void soft_serial_target_init(void) {
 261:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();
 262:platforms/avr/drivers/serial.c **** 
 263:platforms/avr/drivers/serial.c ****     // Enable INT0-INT7
 264:platforms/avr/drivers/serial.c ****     EIMSK |= EIMSK_BIT;
 265:platforms/avr/drivers/serial.c ****     EICRx &= EICRx_BIT;
 266:platforms/avr/drivers/serial.c **** }
 267:platforms/avr/drivers/serial.c **** 
 268:platforms/avr/drivers/serial.c **** // Used by the sender to synchronize timing with the reciver.
 269:platforms/avr/drivers/serial.c **** static void sync_recv(void) NO_INLINE;
 270:platforms/avr/drivers/serial.c **** static void sync_recv(void) {
  15               		.loc 1 270 29 view -0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
 271:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < SERIAL_DELAY * 5 && serial_read_pin(); i++) {
  21               		.loc 1 271 5 view .LVU1
  22               	.LBB257:
  23               		.loc 1 271 10 view .LVU2
  24               	.LVL0:
  25               		.loc 1 271 46 view .LVU3
  26               	.LBE257:
 270:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < SERIAL_DELAY * 5 && serial_read_pin(); i++) {
  27               		.loc 1 270 29 is_stmt 0 view .LVU4
  28 0000 8EE1      		ldi r24,lo8(30)
  29               	.LVL1:
  30               	.L2:
  31               	.LBB260:
  32               	.LBB258:
  33               	.LBI258:
 247:platforms/avr/drivers/serial.c **** 
  34               		.loc 1 247 23 is_stmt 1 view .LVU5
  35               	.LBB259:
 247:platforms/avr/drivers/serial.c **** 
  36               		.loc 1 247 47 view .LVU6
  37               	.LBE259:
  38               	.LBE258:
  39               		.loc 1 271 46 is_stmt 0 view .LVU7
  40 0002 4A9B      		sbis 0x9,2
  41 0004 00C0      		rjmp .L7
 272:platforms/avr/drivers/serial.c ****     }
  42               		.loc 1 272 5 is_stmt 1 discriminator 4 view .LVU8
 271:platforms/avr/drivers/serial.c ****     }
  43               		.loc 1 271 69 discriminator 4 view .LVU9
  44               	.LVL2:
 271:platforms/avr/drivers/serial.c ****     }
  45               		.loc 1 271 46 discriminator 4 view .LVU10
  46 0006 8150      		subi r24,lo8(-(-1))
  47               	.LVL3:
 271:platforms/avr/drivers/serial.c ****     }
  48               		.loc 1 271 46 is_stmt 0 discriminator 4 view .LVU11
  49 0008 01F4      		brne .L2
  50               	.LVL4:
  51               	.L7:
 271:platforms/avr/drivers/serial.c ****     }
  52               		.loc 1 271 46 discriminator 4 view .LVU12
  53               	.LBE260:
 273:platforms/avr/drivers/serial.c ****     // This shouldn't hang if the target disconnects because the
 274:platforms/avr/drivers/serial.c ****     // serial line will float to high if the target does disconnect.
 275:platforms/avr/drivers/serial.c ****     while (!serial_read_pin())
  54               		.loc 1 275 12 is_stmt 1 discriminator 1 view .LVU13
  55               	.LBB261:
  56               	.LBI261:
 247:platforms/avr/drivers/serial.c **** 
  57               		.loc 1 247 23 discriminator 1 view .LVU14
  58               	.LBB262:
 247:platforms/avr/drivers/serial.c **** 
  59               		.loc 1 247 47 discriminator 1 view .LVU15
  60               	.LBE262:
  61               	.LBE261:
  62               		.loc 1 275 12 is_stmt 0 discriminator 1 view .LVU16
  63 000a 4A9B      		sbis 0x9,2
  64 000c 00C0      		rjmp .L7
  65               	/* epilogue start */
 276:platforms/avr/drivers/serial.c ****         ;
 277:platforms/avr/drivers/serial.c **** }
  66               		.loc 1 277 1 view .LVU17
  67 000e 0895      		ret
  68               		.cfi_endproc
  69               	.LFE40:
  71               		.section	.text.sync_send,"ax",@progbits
  73               	sync_send:
  74               	.LFB41:
 278:platforms/avr/drivers/serial.c **** 
 279:platforms/avr/drivers/serial.c **** // Used by the reciver to send a synchronization signal to the sender.
 280:platforms/avr/drivers/serial.c **** static void sync_send(void) NO_INLINE;
 281:platforms/avr/drivers/serial.c **** static void sync_send(void) {
  75               		.loc 1 281 29 is_stmt 1 view -0
  76               		.cfi_startproc
  77               	/* prologue: function */
  78               	/* frame size = 0 */
  79               	/* stack size = 0 */
  80               	.L__stack_usage = 0
 282:platforms/avr/drivers/serial.c ****     serial_low();
  81               		.loc 1 282 5 view .LVU19
  82               	.LBB263:
  83               	.LBI263:
 250:platforms/avr/drivers/serial.c **** 
  84               		.loc 1 250 20 view .LVU20
  85               	.LBB264:
 250:platforms/avr/drivers/serial.c **** 
  86               		.loc 1 250 39 view .LVU21
  87 0000 5A98      		cbi 0xb,2
  88               	.LBE264:
  89               	.LBE263:
 283:platforms/avr/drivers/serial.c ****     serial_delay();
  90               		.loc 1 283 5 view .LVU22
  91               	.LBB265:
  92               	.LBI265:
 231:platforms/avr/drivers/serial.c **** 
  93               		.loc 1 231 20 view .LVU23
 231:platforms/avr/drivers/serial.c **** 
  94               		.loc 1 231 41 view .LVU24
  95               	.LVL5:
  96               	.LBB266:
  97               	.LBI266:
  98               		.file 2 "/usr/avr/include/util/delay.h"
   1:/usr/avr/include/util/delay.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/usr/avr/include/util/delay.h ****    Copyright (c) 2004,2005,2007 Joerg Wunsch
   3:/usr/avr/include/util/delay.h ****    Copyright (c) 2007  Florin-Viorel Petrov
   4:/usr/avr/include/util/delay.h ****    All rights reserved.
   5:/usr/avr/include/util/delay.h **** 
   6:/usr/avr/include/util/delay.h ****    Redistribution and use in source and binary forms, with or without
   7:/usr/avr/include/util/delay.h ****    modification, are permitted provided that the following conditions are met:
   8:/usr/avr/include/util/delay.h **** 
   9:/usr/avr/include/util/delay.h ****    * Redistributions of source code must retain the above copyright
  10:/usr/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer.
  11:/usr/avr/include/util/delay.h **** 
  12:/usr/avr/include/util/delay.h ****    * Redistributions in binary form must reproduce the above copyright
  13:/usr/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer in
  14:/usr/avr/include/util/delay.h ****      the documentation and/or other materials provided with the
  15:/usr/avr/include/util/delay.h ****      distribution.
  16:/usr/avr/include/util/delay.h **** 
  17:/usr/avr/include/util/delay.h ****    * Neither the name of the copyright holders nor the names of
  18:/usr/avr/include/util/delay.h ****      contributors may be used to endorse or promote products derived
  19:/usr/avr/include/util/delay.h ****      from this software without specific prior written permission.
  20:/usr/avr/include/util/delay.h **** 
  21:/usr/avr/include/util/delay.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:/usr/avr/include/util/delay.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:/usr/avr/include/util/delay.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:/usr/avr/include/util/delay.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  25:/usr/avr/include/util/delay.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:/usr/avr/include/util/delay.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:/usr/avr/include/util/delay.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:/usr/avr/include/util/delay.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:/usr/avr/include/util/delay.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:/usr/avr/include/util/delay.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:/usr/avr/include/util/delay.h ****   POSSIBILITY OF SUCH DAMAGE. */
  32:/usr/avr/include/util/delay.h **** 
  33:/usr/avr/include/util/delay.h **** /* $Id: delay.h.in 2551 2020-10-10 20:33:35Z joerg_wunsch $ */
  34:/usr/avr/include/util/delay.h **** 
  35:/usr/avr/include/util/delay.h **** #ifndef _UTIL_DELAY_H_
  36:/usr/avr/include/util/delay.h **** #define _UTIL_DELAY_H_ 1
  37:/usr/avr/include/util/delay.h **** 
  38:/usr/avr/include/util/delay.h **** #ifndef __DOXYGEN__
  39:/usr/avr/include/util/delay.h **** #  ifndef __HAS_DELAY_CYCLES
  40:/usr/avr/include/util/delay.h **** #    define __HAS_DELAY_CYCLES 1
  41:/usr/avr/include/util/delay.h **** #  endif
  42:/usr/avr/include/util/delay.h **** #endif  /* __DOXYGEN__ */
  43:/usr/avr/include/util/delay.h **** 
  44:/usr/avr/include/util/delay.h **** #include <inttypes.h>
  45:/usr/avr/include/util/delay.h **** #include <util/delay_basic.h>
  46:/usr/avr/include/util/delay.h **** #include <math.h>
  47:/usr/avr/include/util/delay.h **** 
  48:/usr/avr/include/util/delay.h **** /** \file */
  49:/usr/avr/include/util/delay.h **** /** \defgroup util_delay <util/delay.h>: Convenience functions for busy-wait delay loops
  50:/usr/avr/include/util/delay.h ****     \code
  51:/usr/avr/include/util/delay.h ****     #define F_CPU 1000000UL  // 1 MHz
  52:/usr/avr/include/util/delay.h ****     //#define F_CPU 14.7456E6
  53:/usr/avr/include/util/delay.h ****     #include <util/delay.h>
  54:/usr/avr/include/util/delay.h ****     \endcode
  55:/usr/avr/include/util/delay.h **** 
  56:/usr/avr/include/util/delay.h ****     \note As an alternative method, it is possible to pass the
  57:/usr/avr/include/util/delay.h ****     F_CPU macro down to the compiler from the Makefile.
  58:/usr/avr/include/util/delay.h ****     Obviously, in that case, no \c \#define statement should be
  59:/usr/avr/include/util/delay.h ****     used.
  60:/usr/avr/include/util/delay.h **** 
  61:/usr/avr/include/util/delay.h ****     The functions in this header file are wrappers around the basic
  62:/usr/avr/include/util/delay.h ****     busy-wait functions from <util/delay_basic.h>.  They are meant as
  63:/usr/avr/include/util/delay.h ****     convenience functions where actual time values can be specified
  64:/usr/avr/include/util/delay.h ****     rather than a number of cycles to wait for.  The idea behind is
  65:/usr/avr/include/util/delay.h ****     that compile-time constant expressions will be eliminated by
  66:/usr/avr/include/util/delay.h ****     compiler optimization so floating-point expressions can be used
  67:/usr/avr/include/util/delay.h ****     to calculate the number of delay cycles needed based on the CPU
  68:/usr/avr/include/util/delay.h ****     frequency passed by the macro F_CPU.
  69:/usr/avr/include/util/delay.h **** 
  70:/usr/avr/include/util/delay.h ****     \note In order for these functions to work as intended, compiler
  71:/usr/avr/include/util/delay.h ****     optimizations <em>must</em> be enabled, and the delay time
  72:/usr/avr/include/util/delay.h ****     <em>must</em> be an expression that is a known constant at
  73:/usr/avr/include/util/delay.h ****     compile-time.  If these requirements are not met, the resulting
  74:/usr/avr/include/util/delay.h ****     delay will be much longer (and basically unpredictable), and
  75:/usr/avr/include/util/delay.h ****     applications that otherwise do not use floating-point calculations
  76:/usr/avr/include/util/delay.h ****     will experience severe code bloat by the floating-point library
  77:/usr/avr/include/util/delay.h ****     routines linked into the application.
  78:/usr/avr/include/util/delay.h **** 
  79:/usr/avr/include/util/delay.h ****     The functions available allow the specification of microsecond, and
  80:/usr/avr/include/util/delay.h ****     millisecond delays directly, using the application-supplied macro
  81:/usr/avr/include/util/delay.h ****     F_CPU as the CPU clock frequency (in Hertz).
  82:/usr/avr/include/util/delay.h **** 
  83:/usr/avr/include/util/delay.h **** */
  84:/usr/avr/include/util/delay.h **** 
  85:/usr/avr/include/util/delay.h **** #if !defined(__DOXYGEN__)
  86:/usr/avr/include/util/delay.h **** static __inline__ void _delay_us(double __us) __attribute__((__always_inline__));
  87:/usr/avr/include/util/delay.h **** static __inline__ void _delay_ms(double __ms) __attribute__((__always_inline__));
  88:/usr/avr/include/util/delay.h **** #endif
  89:/usr/avr/include/util/delay.h **** 
  90:/usr/avr/include/util/delay.h **** #ifndef F_CPU
  91:/usr/avr/include/util/delay.h **** /* prevent compiler error by supplying a default */
  92:/usr/avr/include/util/delay.h **** # warning "F_CPU not defined for <util/delay.h>"
  93:/usr/avr/include/util/delay.h **** /** \ingroup util_delay
  94:/usr/avr/include/util/delay.h ****     \def F_CPU
  95:/usr/avr/include/util/delay.h ****     \brief CPU frequency in Hz
  96:/usr/avr/include/util/delay.h **** 
  97:/usr/avr/include/util/delay.h ****     The macro F_CPU specifies the CPU frequency to be considered by
  98:/usr/avr/include/util/delay.h ****     the delay macros.  This macro is normally supplied by the
  99:/usr/avr/include/util/delay.h ****     environment (e.g. from within a project header, or the project's
 100:/usr/avr/include/util/delay.h ****     Makefile).  The value 1 MHz here is only provided as a "vanilla"
 101:/usr/avr/include/util/delay.h ****     fallback if no such user-provided definition could be found.
 102:/usr/avr/include/util/delay.h **** 
 103:/usr/avr/include/util/delay.h ****     In terms of the delay functions, the CPU frequency can be given as
 104:/usr/avr/include/util/delay.h ****     a floating-point constant (e.g. 3.6864E6 for 3.6864 MHz).
 105:/usr/avr/include/util/delay.h ****     However, the macros in <util/setbaud.h> require it to be an
 106:/usr/avr/include/util/delay.h ****     integer value.
 107:/usr/avr/include/util/delay.h ****  */
 108:/usr/avr/include/util/delay.h **** # define F_CPU 1000000UL
 109:/usr/avr/include/util/delay.h **** #endif
 110:/usr/avr/include/util/delay.h **** 
 111:/usr/avr/include/util/delay.h **** #ifndef __OPTIMIZE__
 112:/usr/avr/include/util/delay.h **** # warning "Compiler optimizations disabled; functions from <util/delay.h> won't work as designed"
 113:/usr/avr/include/util/delay.h **** #endif
 114:/usr/avr/include/util/delay.h **** 
 115:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 116:/usr/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 117:/usr/avr/include/util/delay.h ****   __STDC_HOSTED__
 118:/usr/avr/include/util/delay.h **** #  include <math.h>
 119:/usr/avr/include/util/delay.h **** #endif
 120:/usr/avr/include/util/delay.h **** 
 121:/usr/avr/include/util/delay.h **** /**
 122:/usr/avr/include/util/delay.h ****    \ingroup util_delay
 123:/usr/avr/include/util/delay.h **** 
 124:/usr/avr/include/util/delay.h ****    Perform a delay of \c __ms milliseconds, using _delay_loop_2().
 125:/usr/avr/include/util/delay.h **** 
 126:/usr/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 127:/usr/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 128:/usr/avr/include/util/delay.h **** 
 129:/usr/avr/include/util/delay.h ****    The maximal possible delay is 262.14 ms / F_CPU in MHz.
 130:/usr/avr/include/util/delay.h **** 
 131:/usr/avr/include/util/delay.h ****    When the user request delay which exceed the maximum possible one,
 132:/usr/avr/include/util/delay.h ****    _delay_ms() provides a decreased resolution functionality. In this
 133:/usr/avr/include/util/delay.h ****    mode _delay_ms() will work with a resolution of 1/10 ms, providing
 134:/usr/avr/include/util/delay.h ****    delays up to 6.5535 seconds (independent from CPU frequency).  The
 135:/usr/avr/include/util/delay.h ****    user will not be informed about decreased resolution.
 136:/usr/avr/include/util/delay.h **** 
 137:/usr/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles()
 138:/usr/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For
 139:/usr/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflows results in
 140:/usr/avr/include/util/delay.h ****    no delay i.e., 0ms.
 141:/usr/avr/include/util/delay.h **** 
 142:/usr/avr/include/util/delay.h ****    Conversion of \c __ms into clock cycles may not always result in
 143:/usr/avr/include/util/delay.h ****    integer.  By default, the clock cycles rounded up to next
 144:/usr/avr/include/util/delay.h ****    integer. This ensures that the user gets at least \c __ms
 145:/usr/avr/include/util/delay.h ****    microseconds of delay.
 146:/usr/avr/include/util/delay.h **** 
 147:/usr/avr/include/util/delay.h ****    Alternatively, by defining the macro \c __DELAY_ROUND_DOWN__, or
 148:/usr/avr/include/util/delay.h ****    \c __DELAY_ROUND_CLOSEST__, before including this header file, the
 149:/usr/avr/include/util/delay.h ****    algorithm can be made to round down, or round to closest integer,
 150:/usr/avr/include/util/delay.h ****    respectively.
 151:/usr/avr/include/util/delay.h **** 
 152:/usr/avr/include/util/delay.h ****    \note
 153:/usr/avr/include/util/delay.h **** 
 154:/usr/avr/include/util/delay.h ****    The implementation of _delay_ms() based on
 155:/usr/avr/include/util/delay.h ****    __builtin_avr_delay_cycles() is not backward compatible with older
 156:/usr/avr/include/util/delay.h ****    implementations.  In order to get functionality backward compatible
 157:/usr/avr/include/util/delay.h ****    with previous versions, the macro \c "__DELAY_BACKWARD_COMPATIBLE__"
 158:/usr/avr/include/util/delay.h ****    must be defined before including this header file. Also, the
 159:/usr/avr/include/util/delay.h ****    backward compatible algorithm will be chosen if the code is
 160:/usr/avr/include/util/delay.h ****    compiled in a <em>freestanding environment</em> (GCC option
 161:/usr/avr/include/util/delay.h ****    \c -ffreestanding), as the math functions required for rounding are
 162:/usr/avr/include/util/delay.h ****    not available to the compiler then.
 163:/usr/avr/include/util/delay.h **** 
 164:/usr/avr/include/util/delay.h ****  */
 165:/usr/avr/include/util/delay.h **** void
 166:/usr/avr/include/util/delay.h **** _delay_ms(double __ms)
 167:/usr/avr/include/util/delay.h **** {
 168:/usr/avr/include/util/delay.h **** 	double __tmp ;
 169:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 170:/usr/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 171:/usr/avr/include/util/delay.h ****   __STDC_HOSTED__
 172:/usr/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 173:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 174:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e3) * __ms;
 175:/usr/avr/include/util/delay.h **** 
 176:/usr/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 177:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 178:/usr/avr/include/util/delay.h **** 
 179:/usr/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 180:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 181:/usr/avr/include/util/delay.h **** 
 182:/usr/avr/include/util/delay.h **** 	#else
 183:/usr/avr/include/util/delay.h **** 		//round up by default
 184:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 185:/usr/avr/include/util/delay.h **** 	#endif
 186:/usr/avr/include/util/delay.h **** 
 187:/usr/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 188:/usr/avr/include/util/delay.h **** 
 189:/usr/avr/include/util/delay.h **** #else
 190:/usr/avr/include/util/delay.h **** 	uint16_t __ticks;
 191:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 4e3) * __ms;
 192:/usr/avr/include/util/delay.h **** 	if (__tmp < 1.0)
 193:/usr/avr/include/util/delay.h **** 		__ticks = 1;
 194:/usr/avr/include/util/delay.h **** 	else if (__tmp > 65535)
 195:/usr/avr/include/util/delay.h **** 	{
 196:/usr/avr/include/util/delay.h **** 		//	__ticks = requested delay in 1/10 ms
 197:/usr/avr/include/util/delay.h **** 		__ticks = (uint16_t) (__ms * 10.0);
 198:/usr/avr/include/util/delay.h **** 		while(__ticks)
 199:/usr/avr/include/util/delay.h **** 		{
 200:/usr/avr/include/util/delay.h **** 			// wait 1/10 ms
 201:/usr/avr/include/util/delay.h **** 			_delay_loop_2(((F_CPU) / 4e3) / 10);
 202:/usr/avr/include/util/delay.h **** 			__ticks --;
 203:/usr/avr/include/util/delay.h **** 		}
 204:/usr/avr/include/util/delay.h **** 		return;
 205:/usr/avr/include/util/delay.h **** 	}
 206:/usr/avr/include/util/delay.h **** 	else
 207:/usr/avr/include/util/delay.h **** 		__ticks = (uint16_t)__tmp;
 208:/usr/avr/include/util/delay.h **** 	_delay_loop_2(__ticks);
 209:/usr/avr/include/util/delay.h **** #endif
 210:/usr/avr/include/util/delay.h **** }
 211:/usr/avr/include/util/delay.h **** 
 212:/usr/avr/include/util/delay.h **** /**
 213:/usr/avr/include/util/delay.h ****    \ingroup util_delay
 214:/usr/avr/include/util/delay.h **** 
 215:/usr/avr/include/util/delay.h ****    Perform a delay of \c __us microseconds, using _delay_loop_1().
 216:/usr/avr/include/util/delay.h **** 
 217:/usr/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 218:/usr/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 219:/usr/avr/include/util/delay.h **** 
 220:/usr/avr/include/util/delay.h ****    The maximal possible delay is 768 us / F_CPU in MHz.
 221:/usr/avr/include/util/delay.h **** 
 222:/usr/avr/include/util/delay.h ****    If the user requests a delay greater than the maximal possible one,
 223:/usr/avr/include/util/delay.h ****    _delay_us() will automatically call _delay_ms() instead.  The user
 224:/usr/avr/include/util/delay.h ****    will not be informed about this case.
 225:/usr/avr/include/util/delay.h **** 
 226:/usr/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles()
 227:/usr/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 us/ F_CPU in MHz. For
 228:/usr/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflow results in
 229:/usr/avr/include/util/delay.h ****    no delay i.e., 0us.
 230:/usr/avr/include/util/delay.h **** 
 231:/usr/avr/include/util/delay.h ****    Conversion of \c __us into clock cycles may not always result in
 232:/usr/avr/include/util/delay.h ****    integer.  By default, the clock cycles rounded up to next
 233:/usr/avr/include/util/delay.h ****    integer. This ensures that the user gets at least \c __us
 234:/usr/avr/include/util/delay.h ****    microseconds of delay.
 235:/usr/avr/include/util/delay.h **** 
 236:/usr/avr/include/util/delay.h ****    Alternatively, by defining the macro \c __DELAY_ROUND_DOWN__, or
 237:/usr/avr/include/util/delay.h ****    \c __DELAY_ROUND_CLOSEST__, before including this header file, the
 238:/usr/avr/include/util/delay.h ****    algorithm can be made to round down, or round to closest integer,
 239:/usr/avr/include/util/delay.h ****    respectively.
 240:/usr/avr/include/util/delay.h **** 
 241:/usr/avr/include/util/delay.h ****    \note
 242:/usr/avr/include/util/delay.h **** 
 243:/usr/avr/include/util/delay.h ****    The implementation of _delay_ms() based on
 244:/usr/avr/include/util/delay.h ****    __builtin_avr_delay_cycles() is not backward compatible with older
 245:/usr/avr/include/util/delay.h ****    implementations.  In order to get functionality backward compatible
 246:/usr/avr/include/util/delay.h ****    with previous versions, the macro \c __DELAY_BACKWARD_COMPATIBLE__
 247:/usr/avr/include/util/delay.h ****    must be defined before including this header file. Also, the
 248:/usr/avr/include/util/delay.h ****    backward compatible algorithm will be chosen if the code is
 249:/usr/avr/include/util/delay.h ****    compiled in a <em>freestanding environment</em> (GCC option
 250:/usr/avr/include/util/delay.h ****    \c -ffreestanding), as the math functions required for rounding are
 251:/usr/avr/include/util/delay.h ****    not available to the compiler then.
 252:/usr/avr/include/util/delay.h **** 
 253:/usr/avr/include/util/delay.h ****  */
 254:/usr/avr/include/util/delay.h **** void
 255:/usr/avr/include/util/delay.h **** _delay_us(double __us)
  99               		.loc 2 255 1 view .LVU25
 100               	.LBB267:
 256:/usr/avr/include/util/delay.h **** {
 257:/usr/avr/include/util/delay.h **** 	double __tmp ;
 101               		.loc 2 257 2 view .LVU26
 258:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 259:/usr/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 260:/usr/avr/include/util/delay.h ****   __STDC_HOSTED__
 261:/usr/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 102               		.loc 2 261 2 view .LVU27
 262:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 103               		.loc 2 262 2 view .LVU28
 263:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 104               		.loc 2 263 2 view .LVU29
 264:/usr/avr/include/util/delay.h **** 
 265:/usr/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 266:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 267:/usr/avr/include/util/delay.h **** 
 268:/usr/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 269:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 270:/usr/avr/include/util/delay.h **** 
 271:/usr/avr/include/util/delay.h **** 	#else
 272:/usr/avr/include/util/delay.h **** 		//round up by default
 273:/usr/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 105               		.loc 2 273 3 view .LVU30
 274:/usr/avr/include/util/delay.h **** 	#endif
 275:/usr/avr/include/util/delay.h **** 
 276:/usr/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 106               		.loc 2 276 2 view .LVU31
 107 0002 80E2      		ldi r24,lo8(32)
 108 0004 8A95      	1:	dec r24
 109 0006 01F4      		brne 1b
 110               	.LVL6:
 111               		.loc 2 276 2 is_stmt 0 view .LVU32
 112               	.LBE267:
 113               	.LBE266:
 114               	.LBE265:
 284:platforms/avr/drivers/serial.c ****     serial_high();
 115               		.loc 1 284 5 is_stmt 1 view .LVU33
 116               	.LBB268:
 117               	.LBI268:
 253:platforms/avr/drivers/serial.c **** 
 118               		.loc 1 253 20 view .LVU34
 119               	.LBB269:
 253:platforms/avr/drivers/serial.c **** 
 120               		.loc 1 253 40 view .LVU35
 121 0008 5A9A      		sbi 0xb,2
 122               	/* epilogue start */
 123               	.LBE269:
 124               	.LBE268:
 285:platforms/avr/drivers/serial.c **** }
 125               		.loc 1 285 1 is_stmt 0 view .LVU36
 126 000a 0895      		ret
 127               		.cfi_endproc
 128               	.LFE41:
 130               		.section	.text.serial_read_chunk.constprop.0,"ax",@progbits
 132               	serial_read_chunk.constprop.0:
 133               	.LVL7:
 134               	.LFB52:
 286:platforms/avr/drivers/serial.c **** 
 287:platforms/avr/drivers/serial.c **** // Reads a byte from the serial line
 288:platforms/avr/drivers/serial.c **** static uint8_t serial_read_chunk(uint8_t *pterrcount, uint8_t bit) NO_INLINE;
 289:platforms/avr/drivers/serial.c **** static uint8_t serial_read_chunk(uint8_t *pterrcount, uint8_t bit) {
 135               		.loc 1 289 16 is_stmt 1 view -0
 136               		.cfi_startproc
 137               	/* prologue: function */
 138               	/* frame size = 0 */
 139               	/* stack size = 0 */
 140               	.L__stack_usage = 0
 141               		.loc 1 289 16 is_stmt 0 view .LVU38
 142 0000 FC01      		movw r30,r24
 143               	.LVL8:
 290:platforms/avr/drivers/serial.c ****     uint8_t byte, i, p, pb;
 144               		.loc 1 290 5 is_stmt 1 view .LVU39
 291:platforms/avr/drivers/serial.c **** 
 292:platforms/avr/drivers/serial.c ****     _delay_sub_us(READ_WRITE_START_ADJUST);
 145               		.loc 1 292 5 view .LVU40
 146 0002 3BE0      		ldi r19,lo8(11)
 147 0004 3A95      	1:	dec r19
 148 0006 01F4      		brne 1b
 293:platforms/avr/drivers/serial.c ****     for (i = 0, byte = 0, p = PARITY; i < bit; i++) {
 149               		.loc 1 293 5 view .LVU41
 150               	.LVL9:
 151               		.loc 1 293 41 view .LVU42
 292:platforms/avr/drivers/serial.c ****     for (i = 0, byte = 0, p = PARITY; i < bit; i++) {
 152               		.loc 1 292 5 is_stmt 0 view .LVU43
 153 0008 98E0      		ldi r25,lo8(8)
 154               		.loc 1 293 29 view .LVU44
 155 000a 20E0      		ldi r18,0
 156               		.loc 1 293 22 view .LVU45
 157 000c 80E0      		ldi r24,0
 158               	.LVL10:
 294:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 295:platforms/avr/drivers/serial.c ****         if (serial_read_pin()) {
 296:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 1;
 297:platforms/avr/drivers/serial.c ****             p ^= 1;
 159               		.loc 1 297 15 view .LVU46
 160 000e 31E0      		ldi r19,lo8(1)
 161               	.LVL11:
 162               	.L14:
 294:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 163               		.loc 1 294 9 is_stmt 1 view .LVU47
 164               	.LBB286:
 165               	.LBI286:
 234:platforms/avr/drivers/serial.c **** 
 166               		.loc 1 234 20 view .LVU48
 234:platforms/avr/drivers/serial.c **** 
 167               		.loc 1 234 47 view .LVU49
 168               	.LBB287:
 169               	.LBI287:
 255:/usr/avr/include/util/delay.h **** {
 170               		.loc 2 255 1 view .LVU50
 171               	.LBB288:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 172               		.loc 2 257 2 view .LVU51
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 173               		.loc 2 261 2 view .LVU52
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 174               		.loc 2 262 2 view .LVU53
 263:/usr/avr/include/util/delay.h **** 
 175               		.loc 2 263 2 view .LVU54
 273:/usr/avr/include/util/delay.h **** 	#endif
 176               		.loc 2 273 3 view .LVU55
 177               		.loc 2 276 2 view .LVU56
 178 0010 40E1      		ldi r20,lo8(16)
 179 0012 4A95      	1:	dec r20
 180 0014 01F4      		brne 1b
 181               	.LVL12:
 182               		.loc 2 276 2 is_stmt 0 view .LVU57
 183               	.LBE288:
 184               	.LBE287:
 185               	.LBE286:
 295:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 1;
 186               		.loc 1 295 9 is_stmt 1 view .LVU58
 187               	.LBB289:
 188               	.LBI289:
 247:platforms/avr/drivers/serial.c **** 
 189               		.loc 1 247 23 view .LVU59
 190               	.LBB290:
 247:platforms/avr/drivers/serial.c **** 
 191               		.loc 1 247 47 view .LVU60
 192               	.LBE290:
 193               	.LBE289:
 296:platforms/avr/drivers/serial.c ****             p ^= 1;
 194               		.loc 1 296 26 is_stmt 0 view .LVU61
 195 0016 880F      		lsl r24
 196               	.LVL13:
 295:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 1;
 197               		.loc 1 295 12 view .LVU62
 198 0018 4A9B      		sbis 0x9,2
 199 001a 00C0      		rjmp .L13
 296:platforms/avr/drivers/serial.c ****             p ^= 1;
 200               		.loc 1 296 13 is_stmt 1 view .LVU63
 296:platforms/avr/drivers/serial.c ****             p ^= 1;
 201               		.loc 1 296 32 is_stmt 0 view .LVU64
 202 001c 8160      		ori r24,lo8(1)
 203               	.LVL14:
 204               		.loc 1 297 13 is_stmt 1 view .LVU65
 205               		.loc 1 297 15 is_stmt 0 view .LVU66
 206 001e 2327      		eor r18,r19
 207               	.LVL15:
 208               	.L13:
 298:platforms/avr/drivers/serial.c ****         } else {
 299:platforms/avr/drivers/serial.c ****             byte = (byte << 1) | 0;
 300:platforms/avr/drivers/serial.c ****             p ^= 0;
 301:platforms/avr/drivers/serial.c ****         }
 302:platforms/avr/drivers/serial.c ****         _delay_sub_us(READ_WRITE_WIDTH_ADJUST);
 209               		.loc 1 302 9 is_stmt 1 view .LVU67
 210 0020 42E0      		ldi r20,lo8(2)
 211 0022 4A95      	1:	dec r20
 212 0024 01F4      		brne 1b
 213 0026 0000      		nop
 303:platforms/avr/drivers/serial.c ****         serial_delay_half2();
 214               		.loc 1 303 9 view .LVU68
 215               	.LBB291:
 216               	.LBI291:
 237:platforms/avr/drivers/serial.c **** 
 217               		.loc 1 237 20 view .LVU69
 237:platforms/avr/drivers/serial.c **** 
 218               		.loc 1 237 47 view .LVU70
 219               	.LVL16:
 220               	.LBB292:
 221               	.LBI292:
 255:/usr/avr/include/util/delay.h **** {
 222               		.loc 2 255 1 view .LVU71
 223               	.LBB293:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 224               		.loc 2 257 2 view .LVU72
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 225               		.loc 2 261 2 view .LVU73
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 226               		.loc 2 262 2 view .LVU74
 263:/usr/avr/include/util/delay.h **** 
 227               		.loc 2 263 2 view .LVU75
 273:/usr/avr/include/util/delay.h **** 	#endif
 228               		.loc 2 273 3 view .LVU76
 229               		.loc 2 276 2 view .LVU77
 230 0028 40E1      		ldi r20,lo8(16)
 231 002a 4A95      	1:	dec r20
 232 002c 01F4      		brne 1b
 233               	.LVL17:
 234               		.loc 2 276 2 is_stmt 0 view .LVU78
 235               	.LBE293:
 236               	.LBE292:
 237               	.LBE291:
 293:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 238               		.loc 1 293 49 is_stmt 1 view .LVU79
 293:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 239               		.loc 1 293 41 view .LVU80
 240 002e 9150      		subi r25,lo8(-(-1))
 241               	.LVL18:
 293:platforms/avr/drivers/serial.c ****         serial_delay_half1();  // read the middle of pulses
 242               		.loc 1 293 41 is_stmt 0 view .LVU81
 243 0030 01F4      		brne .L14
 304:platforms/avr/drivers/serial.c ****     }
 305:platforms/avr/drivers/serial.c ****     /* recive parity bit */
 306:platforms/avr/drivers/serial.c ****     serial_delay_half1();  // read the middle of pulses
 244               		.loc 1 306 5 is_stmt 1 view .LVU82
 245               	.LBB294:
 246               	.LBI294:
 234:platforms/avr/drivers/serial.c **** 
 247               		.loc 1 234 20 view .LVU83
 234:platforms/avr/drivers/serial.c **** 
 248               		.loc 1 234 47 view .LVU84
 249               	.LVL19:
 250               	.LBB295:
 251               	.LBI295:
 255:/usr/avr/include/util/delay.h **** {
 252               		.loc 2 255 1 view .LVU85
 253               	.LBB296:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 254               		.loc 2 257 2 view .LVU86
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 255               		.loc 2 261 2 view .LVU87
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 256               		.loc 2 262 2 view .LVU88
 263:/usr/avr/include/util/delay.h **** 
 257               		.loc 2 263 2 view .LVU89
 273:/usr/avr/include/util/delay.h **** 	#endif
 258               		.loc 2 273 3 view .LVU90
 259               		.loc 2 276 2 view .LVU91
 260 0032 90E1      		ldi r25,lo8(16)
 261 0034 9A95      	1:	dec r25
 262 0036 01F4      		brne 1b
 263               	.LVL20:
 264               		.loc 2 276 2 is_stmt 0 view .LVU92
 265               	.LBE296:
 266               	.LBE295:
 267               	.LBE294:
 307:platforms/avr/drivers/serial.c ****     pb = serial_read_pin();
 268               		.loc 1 307 5 is_stmt 1 view .LVU93
 269               	.LBB297:
 270               	.LBI297:
 247:platforms/avr/drivers/serial.c **** 
 271               		.loc 1 247 23 view .LVU94
 272               	.LBB298:
 247:platforms/avr/drivers/serial.c **** 
 273               		.loc 1 247 47 view .LVU95
 247:platforms/avr/drivers/serial.c **** 
 274               		.loc 1 247 56 is_stmt 0 view .LVU96
 275 0038 99B1      		in r25,0x9
 276               	.LVL21:
 247:platforms/avr/drivers/serial.c **** 
 277               		.loc 1 247 56 view .LVU97
 278               	.LBE298:
 279               	.LBE297:
 308:platforms/avr/drivers/serial.c ****     _delay_sub_us(READ_WRITE_WIDTH_ADJUST);
 280               		.loc 1 308 5 is_stmt 1 view .LVU98
 281 003a 32E0      		ldi r19,lo8(2)
 282 003c 3A95      	1:	dec r19
 283 003e 01F4      		brne 1b
 284 0040 0000      		nop
 309:platforms/avr/drivers/serial.c ****     serial_delay_half2();
 285               		.loc 1 309 5 view .LVU99
 286               	.LBB300:
 287               	.LBI300:
 237:platforms/avr/drivers/serial.c **** 
 288               		.loc 1 237 20 view .LVU100
 237:platforms/avr/drivers/serial.c **** 
 289               		.loc 1 237 47 view .LVU101
 290               	.LVL22:
 291               	.LBB301:
 292               	.LBI301:
 255:/usr/avr/include/util/delay.h **** {
 293               		.loc 2 255 1 view .LVU102
 294               	.LBB302:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 295               		.loc 2 257 2 view .LVU103
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 296               		.loc 2 261 2 view .LVU104
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 297               		.loc 2 262 2 view .LVU105
 263:/usr/avr/include/util/delay.h **** 
 298               		.loc 2 263 2 view .LVU106
 273:/usr/avr/include/util/delay.h **** 	#endif
 299               		.loc 2 273 3 view .LVU107
 300               		.loc 2 276 2 view .LVU108
 301 0042 40E1      		ldi r20,lo8(16)
 302 0044 4A95      	1:	dec r20
 303 0046 01F4      		brne 1b
 304               	.LVL23:
 305               		.loc 2 276 2 is_stmt 0 view .LVU109
 306               	.LBE302:
 307               	.LBE301:
 308               	.LBE300:
 310:platforms/avr/drivers/serial.c **** 
 311:platforms/avr/drivers/serial.c ****     *pterrcount += (p != pb) ? 1 : 0;
 309               		.loc 1 311 5 is_stmt 1 view .LVU110
 310               	.LBB303:
 311               	.LBB299:
 247:platforms/avr/drivers/serial.c **** 
 312               		.loc 1 247 54 is_stmt 0 view .LVU111
 313 0048 92FB      		bst r25,2
 314 004a 9927      		clr r25
 315 004c 90F9      		bld r25,0
 316               	.LVL24:
 247:platforms/avr/drivers/serial.c **** 
 317               		.loc 1 247 54 view .LVU112
 318               	.LBE299:
 319               	.LBE303:
 320               		.loc 1 311 17 view .LVU113
 321 004e 9227      		eor r25,r18
 322 0050 2081      		ld r18,Z
 323               	.LVL25:
 324               		.loc 1 311 17 view .LVU114
 325 0052 920F      		add r25,r18
 326 0054 9083      		st Z,r25
 312:platforms/avr/drivers/serial.c **** 
 313:platforms/avr/drivers/serial.c ****     return byte;
 327               		.loc 1 313 5 is_stmt 1 view .LVU115
 328               	/* epilogue start */
 314:platforms/avr/drivers/serial.c **** }
 329               		.loc 1 314 1 is_stmt 0 view .LVU116
 330 0056 0895      		ret
 331               		.cfi_endproc
 332               	.LFE52:
 334               		.section	.text.serial_recive_packet,"ax",@progbits
 336               	serial_recive_packet:
 337               	.LVL26:
 338               	.LFB45:
 315:platforms/avr/drivers/serial.c **** 
 316:platforms/avr/drivers/serial.c **** // Sends a byte with MSB ordering
 317:platforms/avr/drivers/serial.c **** void serial_write_chunk(uint8_t data, uint8_t bit) NO_INLINE;
 318:platforms/avr/drivers/serial.c **** void serial_write_chunk(uint8_t data, uint8_t bit) {
 319:platforms/avr/drivers/serial.c ****     uint8_t b, p;
 320:platforms/avr/drivers/serial.c ****     for (p = PARITY, b = 1 << (bit - 1); b; b >>= 1) {
 321:platforms/avr/drivers/serial.c ****         if (data & b) {
 322:platforms/avr/drivers/serial.c ****             serial_high();
 323:platforms/avr/drivers/serial.c ****             p ^= 1;
 324:platforms/avr/drivers/serial.c ****         } else {
 325:platforms/avr/drivers/serial.c ****             serial_low();
 326:platforms/avr/drivers/serial.c ****             p ^= 0;
 327:platforms/avr/drivers/serial.c ****         }
 328:platforms/avr/drivers/serial.c ****         serial_delay();
 329:platforms/avr/drivers/serial.c ****     }
 330:platforms/avr/drivers/serial.c ****     /* send parity bit */
 331:platforms/avr/drivers/serial.c ****     if (p & 1) {
 332:platforms/avr/drivers/serial.c ****         serial_high();
 333:platforms/avr/drivers/serial.c ****     } else {
 334:platforms/avr/drivers/serial.c ****         serial_low();
 335:platforms/avr/drivers/serial.c ****     }
 336:platforms/avr/drivers/serial.c ****     serial_delay();
 337:platforms/avr/drivers/serial.c **** 
 338:platforms/avr/drivers/serial.c ****     serial_low();  // sync_send() / senc_recv() need raise edge
 339:platforms/avr/drivers/serial.c **** }
 340:platforms/avr/drivers/serial.c **** 
 341:platforms/avr/drivers/serial.c **** static void serial_send_packet(uint8_t *buffer, uint8_t size) NO_INLINE;
 342:platforms/avr/drivers/serial.c **** static void serial_send_packet(uint8_t *buffer, uint8_t size) {
 343:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 344:platforms/avr/drivers/serial.c ****         uint8_t data;
 345:platforms/avr/drivers/serial.c ****         data = buffer[i];
 346:platforms/avr/drivers/serial.c ****         sync_send();
 347:platforms/avr/drivers/serial.c ****         serial_write_chunk(data, 8);
 348:platforms/avr/drivers/serial.c ****     }
 349:platforms/avr/drivers/serial.c **** }
 350:platforms/avr/drivers/serial.c **** 
 351:platforms/avr/drivers/serial.c **** static uint8_t serial_recive_packet(uint8_t *buffer, uint8_t size) NO_INLINE;
 352:platforms/avr/drivers/serial.c **** static uint8_t serial_recive_packet(uint8_t *buffer, uint8_t size) {
 339               		.loc 1 352 68 is_stmt 1 view -0
 340               		.cfi_startproc
 341               		.loc 1 352 68 is_stmt 0 view .LVU118
 342 0000 EF92      		push r14
 343               	.LCFI0:
 344               		.cfi_def_cfa_offset 3
 345               		.cfi_offset 14, -2
 346 0002 FF92      		push r15
 347               	.LCFI1:
 348               		.cfi_def_cfa_offset 4
 349               		.cfi_offset 15, -3
 350 0004 0F93      		push r16
 351               	.LCFI2:
 352               		.cfi_def_cfa_offset 5
 353               		.cfi_offset 16, -4
 354 0006 1F93      		push r17
 355               	.LCFI3:
 356               		.cfi_def_cfa_offset 6
 357               		.cfi_offset 17, -5
 358 0008 CF93      		push r28
 359               	.LCFI4:
 360               		.cfi_def_cfa_offset 7
 361               		.cfi_offset 28, -6
 362 000a DF93      		push r29
 363               	.LCFI5:
 364               		.cfi_def_cfa_offset 8
 365               		.cfi_offset 29, -7
 366 000c 0F92      		push __tmp_reg__
 367               	.LCFI6:
 368               		.cfi_def_cfa_offset 9
 369 000e CDB7      		in r28,__SP_L__
 370 0010 DEB7      		in r29,__SP_H__
 371               	.LCFI7:
 372               		.cfi_def_cfa_register 28
 373               	/* prologue: function */
 374               	/* frame size = 1 */
 375               	/* stack size = 7 */
 376               	.L__stack_usage = 7
 353:platforms/avr/drivers/serial.c ****     uint8_t pecount = 0;
 377               		.loc 1 353 5 is_stmt 1 view .LVU119
 378               		.loc 1 353 13 is_stmt 0 view .LVU120
 379 0012 1982      		std Y+1,__zero_reg__
 354:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 380               		.loc 1 354 5 is_stmt 1 view .LVU121
 381               	.LBB304:
 382               		.loc 1 354 10 view .LVU122
 383               	.LVL27:
 384               		.loc 1 354 10 is_stmt 0 view .LVU123
 385 0014 8C01      		movw r16,r24
 386 0016 7C01      		movw r14,r24
 387 0018 E60E      		add r14,r22
 388 001a F11C      		adc r15,__zero_reg__
 389               	.LVL28:
 390               	.L17:
 391               		.loc 1 354 27 is_stmt 1 discriminator 1 view .LVU124
 392 001c 0E15      		cp r16,r14
 393 001e 1F05      		cpc r17,r15
 394 0020 01F4      		brne .L18
 395               	.LBE304:
 355:platforms/avr/drivers/serial.c ****         uint8_t data;
 356:platforms/avr/drivers/serial.c ****         sync_recv();
 357:platforms/avr/drivers/serial.c ****         data      = serial_read_chunk(&pecount, 8);
 358:platforms/avr/drivers/serial.c ****         buffer[i] = data;
 359:platforms/avr/drivers/serial.c ****     }
 360:platforms/avr/drivers/serial.c ****     return pecount == 0;
 396               		.loc 1 360 5 view .LVU125
 397               		.loc 1 360 20 is_stmt 0 view .LVU126
 398 0022 81E0      		ldi r24,lo8(1)
 399 0024 9981      		ldd r25,Y+1
 400 0026 9111      		cpse r25,__zero_reg__
 401 0028 80E0      		ldi r24,0
 402               	.L16:
 403               	/* epilogue start */
 361:platforms/avr/drivers/serial.c **** }
 404               		.loc 1 361 1 view .LVU127
 405 002a 0F90      		pop __tmp_reg__
 406 002c DF91      		pop r29
 407 002e CF91      		pop r28
 408 0030 1F91      		pop r17
 409 0032 0F91      		pop r16
 410               	.LVL29:
 411               		.loc 1 361 1 view .LVU128
 412 0034 FF90      		pop r15
 413 0036 EF90      		pop r14
 414 0038 0895      		ret
 415               	.LVL30:
 416               	.L18:
 417               	.LBB306:
 418               	.LBB305:
 355:platforms/avr/drivers/serial.c ****         uint8_t data;
 419               		.loc 1 355 9 is_stmt 1 discriminator 3 view .LVU129
 356:platforms/avr/drivers/serial.c ****         data      = serial_read_chunk(&pecount, 8);
 420               		.loc 1 356 9 discriminator 3 view .LVU130
 421 003a 0E94 0000 		call sync_recv
 422               	.LVL31:
 357:platforms/avr/drivers/serial.c ****         buffer[i] = data;
 423               		.loc 1 357 9 discriminator 3 view .LVU131
 357:platforms/avr/drivers/serial.c ****         buffer[i] = data;
 424               		.loc 1 357 21 is_stmt 0 discriminator 3 view .LVU132
 425 003e CE01      		movw r24,r28
 426 0040 0196      		adiw r24,1
 427 0042 0E94 0000 		call serial_read_chunk.constprop.0
 428               	.LVL32:
 358:platforms/avr/drivers/serial.c ****     }
 429               		.loc 1 358 9 is_stmt 1 discriminator 3 view .LVU133
 358:platforms/avr/drivers/serial.c ****     }
 430               		.loc 1 358 19 is_stmt 0 discriminator 3 view .LVU134
 431 0046 F801      		movw r30,r16
 432 0048 8193      		st Z+,r24
 433 004a 8F01      		movw r16,r30
 434               	.LVL33:
 358:platforms/avr/drivers/serial.c ****     }
 435               		.loc 1 358 19 discriminator 3 view .LVU135
 436               	.LBE305:
 354:platforms/avr/drivers/serial.c ****         uint8_t data;
 437               		.loc 1 354 35 is_stmt 1 discriminator 3 view .LVU136
 354:platforms/avr/drivers/serial.c ****         uint8_t data;
 438               		.loc 1 354 35 is_stmt 0 discriminator 3 view .LVU137
 439 004c 00C0      		rjmp .L17
 440               	.LBE306:
 441               		.cfi_endproc
 442               	.LFE45:
 444               		.section	.text.soft_serial_initiator_init,"ax",@progbits
 445               	.global	soft_serial_initiator_init
 447               	soft_serial_initiator_init:
 448               	.LFB38:
 255:platforms/avr/drivers/serial.c ****     serial_output();
 449               		.loc 1 255 39 is_stmt 1 view -0
 450               		.cfi_startproc
 451               	/* prologue: function */
 452               	/* frame size = 0 */
 453               	/* stack size = 0 */
 454               	.L__stack_usage = 0
 256:platforms/avr/drivers/serial.c ****     serial_high();
 455               		.loc 1 256 5 view .LVU139
 456               	.LBB307:
 457               	.LBI307:
 240:platforms/avr/drivers/serial.c **** 
 458               		.loc 1 240 20 view .LVU140
 459               	.LBB308:
 240:platforms/avr/drivers/serial.c **** 
 460               		.loc 1 240 42 view .LVU141
 461 0000 529A      		sbi 0xa,2
 462               	.LBE308:
 463               	.LBE307:
 257:platforms/avr/drivers/serial.c **** }
 464               		.loc 1 257 5 view .LVU142
 465               	.LBB309:
 466               	.LBI309:
 253:platforms/avr/drivers/serial.c **** 
 467               		.loc 1 253 20 view .LVU143
 468               	.LBB310:
 253:platforms/avr/drivers/serial.c **** 
 469               		.loc 1 253 40 view .LVU144
 470 0002 5A9A      		sbi 0xb,2
 471               	/* epilogue start */
 472               	.LBE310:
 473               	.LBE309:
 258:platforms/avr/drivers/serial.c **** 
 474               		.loc 1 258 1 is_stmt 0 view .LVU145
 475 0004 0895      		ret
 476               		.cfi_endproc
 477               	.LFE38:
 479               		.section	.text.soft_serial_target_init,"ax",@progbits
 480               	.global	soft_serial_target_init
 482               	soft_serial_target_init:
 483               	.LFB39:
 260:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();
 484               		.loc 1 260 36 is_stmt 1 view -0
 485               		.cfi_startproc
 486               	/* prologue: function */
 487               	/* frame size = 0 */
 488               	/* stack size = 0 */
 489               	.L__stack_usage = 0
 261:platforms/avr/drivers/serial.c **** 
 490               		.loc 1 261 5 view .LVU147
 491               	.LBB311:
 492               	.LBI311:
 244:platforms/avr/drivers/serial.c **** 
 493               		.loc 1 244 20 view .LVU148
 494               	.LBB312:
 244:platforms/avr/drivers/serial.c **** 
 495               		.loc 1 244 53 view .LVU149
 496 0000 5298      		cbi 0xa,2
 497 0002 5A9A      		sbi 0xb,2
 498               	.LBE312:
 499               	.LBE311:
 264:platforms/avr/drivers/serial.c ****     EICRx &= EICRx_BIT;
 500               		.loc 1 264 5 view .LVU150
 264:platforms/avr/drivers/serial.c ****     EICRx &= EICRx_BIT;
 501               		.loc 1 264 11 is_stmt 0 view .LVU151
 502 0004 EA9A      		sbi 0x1d,2
 265:platforms/avr/drivers/serial.c **** }
 503               		.loc 1 265 5 is_stmt 1 view .LVU152
 265:platforms/avr/drivers/serial.c **** }
 504               		.loc 1 265 11 is_stmt 0 view .LVU153
 505 0006 E9E6      		ldi r30,lo8(105)
 506 0008 F0E0      		ldi r31,0
 507 000a 8081      		ld r24,Z
 508 000c 8F7C      		andi r24,lo8(-49)
 509 000e 8083      		st Z,r24
 510               	/* epilogue start */
 266:platforms/avr/drivers/serial.c **** 
 511               		.loc 1 266 1 view .LVU154
 512 0010 0895      		ret
 513               		.cfi_endproc
 514               	.LFE39:
 516               		.section	.text.serial_write_chunk,"ax",@progbits
 517               	.global	serial_write_chunk
 519               	serial_write_chunk:
 520               	.LVL34:
 521               	.LFB43:
 318:platforms/avr/drivers/serial.c ****     uint8_t b, p;
 522               		.loc 1 318 52 is_stmt 1 view -0
 523               		.cfi_startproc
 524               	/* prologue: function */
 525               	/* frame size = 0 */
 526               	/* stack size = 0 */
 527               	.L__stack_usage = 0
 319:platforms/avr/drivers/serial.c ****     for (p = PARITY, b = 1 << (bit - 1); b; b >>= 1) {
 528               		.loc 1 319 5 view .LVU156
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 529               		.loc 1 320 5 view .LVU157
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 530               		.loc 1 320 36 is_stmt 0 view .LVU158
 531 0000 6150      		subi r22,1
 532 0002 770B      		sbc r23,r23
 533               	.LVL35:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 534               		.loc 1 320 24 view .LVU159
 535 0004 91E0      		ldi r25,lo8(1)
 536 0006 00C0      		rjmp 2f
 537               		1:
 538 0008 990F      		lsl r25
 539               		2:
 540 000a 6A95      		dec r22
 541 000c 02F4      		brpl 1b
 542               	.LVL36:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 543               		.loc 1 320 12 view .LVU160
 544 000e 20E0      		ldi r18,0
 323:platforms/avr/drivers/serial.c ****         } else {
 545               		.loc 1 323 15 view .LVU161
 546 0010 31E0      		ldi r19,lo8(1)
 547               	.LVL37:
 548               	.L26:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 549               		.loc 1 320 42 is_stmt 1 discriminator 1 view .LVU162
 550 0012 9111      		cpse r25,__zero_reg__
 551 0014 00C0      		rjmp .L29
 331:platforms/avr/drivers/serial.c ****         serial_high();
 552               		.loc 1 331 5 view .LVU163
 331:platforms/avr/drivers/serial.c ****         serial_high();
 553               		.loc 1 331 8 is_stmt 0 view .LVU164
 554 0016 2223      		tst r18
 555 0018 01F0      		breq .L30
 332:platforms/avr/drivers/serial.c ****     } else {
 556               		.loc 1 332 9 is_stmt 1 view .LVU165
 557               	.LBB313:
 558               	.LBI313:
 253:platforms/avr/drivers/serial.c **** 
 559               		.loc 1 253 20 view .LVU166
 560               	.LBB314:
 253:platforms/avr/drivers/serial.c **** 
 561               		.loc 1 253 40 view .LVU167
 562 001a 5A9A      		sbi 0xb,2
 563               	.L31:
 564               	.LBE314:
 565               	.LBE313:
 336:platforms/avr/drivers/serial.c **** 
 566               		.loc 1 336 5 view .LVU168
 567               	.LBB315:
 568               	.LBI315:
 231:platforms/avr/drivers/serial.c **** 
 569               		.loc 1 231 20 view .LVU169
 231:platforms/avr/drivers/serial.c **** 
 570               		.loc 1 231 41 view .LVU170
 571               	.LVL38:
 572               	.LBB316:
 573               	.LBI316:
 255:/usr/avr/include/util/delay.h **** {
 574               		.loc 2 255 1 view .LVU171
 575               	.LBB317:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 576               		.loc 2 257 2 view .LVU172
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 577               		.loc 2 261 2 view .LVU173
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 578               		.loc 2 262 2 view .LVU174
 263:/usr/avr/include/util/delay.h **** 
 579               		.loc 2 263 2 view .LVU175
 273:/usr/avr/include/util/delay.h **** 	#endif
 580               		.loc 2 273 3 view .LVU176
 581               		.loc 2 276 2 view .LVU177
 582 001c 80E2      		ldi r24,lo8(32)
 583 001e 8A95      	1:	dec r24
 584 0020 01F4      		brne 1b
 585               	.LVL39:
 586               		.loc 2 276 2 is_stmt 0 view .LVU178
 587               	.LBE317:
 588               	.LBE316:
 589               	.LBE315:
 338:platforms/avr/drivers/serial.c **** }
 590               		.loc 1 338 5 is_stmt 1 view .LVU179
 591               	.LBB318:
 592               	.LBI318:
 250:platforms/avr/drivers/serial.c **** 
 593               		.loc 1 250 20 view .LVU180
 594               	.LBB319:
 250:platforms/avr/drivers/serial.c **** 
 595               		.loc 1 250 39 view .LVU181
 596 0022 5A98      		cbi 0xb,2
 597               	/* epilogue start */
 598               	.LBE319:
 599               	.LBE318:
 339:platforms/avr/drivers/serial.c **** 
 600               		.loc 1 339 1 is_stmt 0 view .LVU182
 601 0024 0895      		ret
 602               	.LVL40:
 603               	.L29:
 321:platforms/avr/drivers/serial.c ****             serial_high();
 604               		.loc 1 321 9 is_stmt 1 view .LVU183
 321:platforms/avr/drivers/serial.c ****             serial_high();
 605               		.loc 1 321 13 is_stmt 0 view .LVU184
 606 0026 492F      		mov r20,r25
 607 0028 4823      		and r20,r24
 321:platforms/avr/drivers/serial.c ****             serial_high();
 608               		.loc 1 321 12 view .LVU185
 609 002a 01F0      		breq .L27
 322:platforms/avr/drivers/serial.c ****             p ^= 1;
 610               		.loc 1 322 13 is_stmt 1 view .LVU186
 611               	.LBB320:
 612               	.LBI320:
 253:platforms/avr/drivers/serial.c **** 
 613               		.loc 1 253 20 view .LVU187
 614               	.LBB321:
 253:platforms/avr/drivers/serial.c **** 
 615               		.loc 1 253 40 view .LVU188
 616 002c 5A9A      		sbi 0xb,2
 617               	.LBE321:
 618               	.LBE320:
 323:platforms/avr/drivers/serial.c ****         } else {
 619               		.loc 1 323 13 view .LVU189
 323:platforms/avr/drivers/serial.c ****         } else {
 620               		.loc 1 323 15 is_stmt 0 view .LVU190
 621 002e 2327      		eor r18,r19
 622               	.LVL41:
 623               	.L28:
 328:platforms/avr/drivers/serial.c ****     }
 624               		.loc 1 328 9 is_stmt 1 discriminator 2 view .LVU191
 625               	.LBB322:
 626               	.LBI322:
 231:platforms/avr/drivers/serial.c **** 
 627               		.loc 1 231 20 discriminator 2 view .LVU192
 231:platforms/avr/drivers/serial.c **** 
 628               		.loc 1 231 41 discriminator 2 view .LVU193
 629               	.LBB323:
 630               	.LBI323:
 255:/usr/avr/include/util/delay.h **** {
 631               		.loc 2 255 1 discriminator 2 view .LVU194
 632               	.LBB324:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 633               		.loc 2 257 2 discriminator 2 view .LVU195
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 634               		.loc 2 261 2 discriminator 2 view .LVU196
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 635               		.loc 2 262 2 discriminator 2 view .LVU197
 263:/usr/avr/include/util/delay.h **** 
 636               		.loc 2 263 2 discriminator 2 view .LVU198
 273:/usr/avr/include/util/delay.h **** 	#endif
 637               		.loc 2 273 3 discriminator 2 view .LVU199
 638               		.loc 2 276 2 discriminator 2 view .LVU200
 639 0030 40E2      		ldi r20,lo8(32)
 640 0032 4A95      	1:	dec r20
 641 0034 01F4      		brne 1b
 642               	.LVL42:
 643               		.loc 2 276 2 is_stmt 0 discriminator 2 view .LVU201
 644               	.LBE324:
 645               	.LBE323:
 646               	.LBE322:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 647               		.loc 1 320 47 is_stmt 1 discriminator 2 view .LVU202
 648 0036 9695      		lsr r25
 649               	.LVL43:
 320:platforms/avr/drivers/serial.c ****         if (data & b) {
 650               		.loc 1 320 47 is_stmt 0 discriminator 2 view .LVU203
 651 0038 00C0      		rjmp .L26
 652               	.L27:
 325:platforms/avr/drivers/serial.c ****             p ^= 0;
 653               		.loc 1 325 13 is_stmt 1 view .LVU204
 654               	.LBB325:
 655               	.LBI325:
 250:platforms/avr/drivers/serial.c **** 
 656               		.loc 1 250 20 view .LVU205
 657               	.LBB326:
 250:platforms/avr/drivers/serial.c **** 
 658               		.loc 1 250 39 view .LVU206
 659 003a 5A98      		cbi 0xb,2
 660               	.LBE326:
 661               	.LBE325:
 326:platforms/avr/drivers/serial.c ****         }
 662               		.loc 1 326 13 view .LVU207
 326:platforms/avr/drivers/serial.c ****         }
 663               		.loc 1 326 13 is_stmt 0 view .LVU208
 664 003c 00C0      		rjmp .L28
 665               	.L30:
 334:platforms/avr/drivers/serial.c ****     }
 666               		.loc 1 334 9 is_stmt 1 view .LVU209
 667               	.LBB327:
 668               	.LBI327:
 250:platforms/avr/drivers/serial.c **** 
 669               		.loc 1 250 20 view .LVU210
 670               	.LBB328:
 250:platforms/avr/drivers/serial.c **** 
 671               		.loc 1 250 39 view .LVU211
 672 003e 5A98      		cbi 0xb,2
 250:platforms/avr/drivers/serial.c **** 
 673               		.loc 1 250 69 is_stmt 0 view .LVU212
 674 0040 00C0      		rjmp .L31
 675               	.LBE328:
 676               	.LBE327:
 677               		.cfi_endproc
 678               	.LFE43:
 680               		.section	.text.serial_send_packet,"ax",@progbits
 682               	serial_send_packet:
 683               	.LVL44:
 684               	.LFB44:
 342:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 685               		.loc 1 342 63 is_stmt 1 view -0
 686               		.cfi_startproc
 342:platforms/avr/drivers/serial.c ****     for (uint8_t i = 0; i < size; ++i) {
 687               		.loc 1 342 63 is_stmt 0 view .LVU214
 688 0000 FF92      		push r15
 689               	.LCFI8:
 690               		.cfi_def_cfa_offset 3
 691               		.cfi_offset 15, -2
 692 0002 0F93      		push r16
 693               	.LCFI9:
 694               		.cfi_def_cfa_offset 4
 695               		.cfi_offset 16, -3
 696 0004 1F93      		push r17
 697               	.LCFI10:
 698               		.cfi_def_cfa_offset 5
 699               		.cfi_offset 17, -4
 700 0006 CF93      		push r28
 701               	.LCFI11:
 702               		.cfi_def_cfa_offset 6
 703               		.cfi_offset 28, -5
 704 0008 DF93      		push r29
 705               	.LCFI12:
 706               		.cfi_def_cfa_offset 7
 707               		.cfi_offset 29, -6
 708               	/* prologue: function */
 709               	/* frame size = 0 */
 710               	/* stack size = 5 */
 711               	.L__stack_usage = 5
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 712               		.loc 1 343 5 is_stmt 1 view .LVU215
 713               	.LBB329:
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 714               		.loc 1 343 10 view .LVU216
 715               	.LVL45:
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 716               		.loc 1 343 10 is_stmt 0 view .LVU217
 717 000a EC01      		movw r28,r24
 718 000c 8C01      		movw r16,r24
 719 000e 060F      		add r16,r22
 720 0010 111D      		adc r17,__zero_reg__
 721               	.LVL46:
 722               	.L33:
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 723               		.loc 1 343 27 is_stmt 1 discriminator 1 view .LVU218
 724 0012 C017      		cp r28,r16
 725 0014 D107      		cpc r29,r17
 726 0016 01F4      		brne .L34
 727               	/* epilogue start */
 728               	.LBE329:
 349:platforms/avr/drivers/serial.c **** 
 729               		.loc 1 349 1 is_stmt 0 view .LVU219
 730 0018 DF91      		pop r29
 731 001a CF91      		pop r28
 732               	.LVL47:
 349:platforms/avr/drivers/serial.c **** 
 733               		.loc 1 349 1 view .LVU220
 734 001c 1F91      		pop r17
 735 001e 0F91      		pop r16
 736 0020 FF90      		pop r15
 737 0022 0895      		ret
 738               	.LVL48:
 739               	.L34:
 740               	.LBB331:
 741               	.LBB330:
 344:platforms/avr/drivers/serial.c ****         data = buffer[i];
 742               		.loc 1 344 9 is_stmt 1 discriminator 3 view .LVU221
 345:platforms/avr/drivers/serial.c ****         sync_send();
 743               		.loc 1 345 9 discriminator 3 view .LVU222
 345:platforms/avr/drivers/serial.c ****         sync_send();
 744               		.loc 1 345 14 is_stmt 0 discriminator 3 view .LVU223
 745 0024 F990      		ld r15,Y+
 746               	.LVL49:
 346:platforms/avr/drivers/serial.c ****         serial_write_chunk(data, 8);
 747               		.loc 1 346 9 is_stmt 1 discriminator 3 view .LVU224
 748 0026 0E94 0000 		call sync_send
 749               	.LVL50:
 347:platforms/avr/drivers/serial.c ****     }
 750               		.loc 1 347 9 discriminator 3 view .LVU225
 751 002a 68E0      		ldi r22,lo8(8)
 752 002c 8F2D      		mov r24,r15
 753 002e 0E94 0000 		call serial_write_chunk
 754               	.LVL51:
 755               	.LBE330:
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 756               		.loc 1 343 35 discriminator 3 view .LVU226
 343:platforms/avr/drivers/serial.c ****         uint8_t data;
 757               		.loc 1 343 35 is_stmt 0 discriminator 3 view .LVU227
 758 0032 00C0      		rjmp .L33
 759               	.LBE331:
 760               		.cfi_endproc
 761               	.LFE44:
 763               		.section	.text.__vector_3,"ax",@progbits
 764               	.global	__vector_3
 766               	__vector_3:
 767               	.LFB49:
 362:platforms/avr/drivers/serial.c **** 
 363:platforms/avr/drivers/serial.c **** inline static void change_sender2reciver(void) {
 364:platforms/avr/drivers/serial.c ****     sync_send();                 // 0
 365:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 1
 366:platforms/avr/drivers/serial.c ****     serial_low();                // 2
 367:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();  // 2
 368:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 3
 369:platforms/avr/drivers/serial.c **** }
 370:platforms/avr/drivers/serial.c **** 
 371:platforms/avr/drivers/serial.c **** inline static void change_reciver2sender(void) {
 372:platforms/avr/drivers/serial.c ****     sync_recv();           // 0
 373:platforms/avr/drivers/serial.c ****     serial_delay();        // 1
 374:platforms/avr/drivers/serial.c ****     serial_low();          // 3
 375:platforms/avr/drivers/serial.c ****     serial_output();       // 3
 376:platforms/avr/drivers/serial.c ****     serial_delay_half1();  // 4
 377:platforms/avr/drivers/serial.c **** }
 378:platforms/avr/drivers/serial.c **** 
 379:platforms/avr/drivers/serial.c **** static inline uint8_t nibble_bits_count(uint8_t bits) {
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x5) + (bits >> 1 & 0x5);
 381:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 382:platforms/avr/drivers/serial.c ****     return bits;
 383:platforms/avr/drivers/serial.c **** }
 384:platforms/avr/drivers/serial.c **** 
 385:platforms/avr/drivers/serial.c **** // interrupt handle to be used by the target device
 386:platforms/avr/drivers/serial.c **** ISR(SERIAL_PIN_INTERRUPT) {
 768               		.loc 1 386 27 is_stmt 1 view -0
 769               		.cfi_startproc
 770 0000 1F92      		push r1
 771               	.LCFI13:
 772               		.cfi_def_cfa_offset 3
 773               		.cfi_offset 1, -2
 774 0002 0F92      		push r0
 775               	.LCFI14:
 776               		.cfi_def_cfa_offset 4
 777               		.cfi_offset 0, -3
 778 0004 0FB6      		in r0,__SREG__
 779 0006 0F92      		push r0
 780 0008 1124      		clr __zero_reg__
 781 000a EF92      		push r14
 782               	.LCFI15:
 783               		.cfi_def_cfa_offset 5
 784               		.cfi_offset 14, -4
 785 000c FF92      		push r15
 786               	.LCFI16:
 787               		.cfi_def_cfa_offset 6
 788               		.cfi_offset 15, -5
 789 000e 0F93      		push r16
 790               	.LCFI17:
 791               		.cfi_def_cfa_offset 7
 792               		.cfi_offset 16, -6
 793 0010 1F93      		push r17
 794               	.LCFI18:
 795               		.cfi_def_cfa_offset 8
 796               		.cfi_offset 17, -7
 797 0012 2F93      		push r18
 798               	.LCFI19:
 799               		.cfi_def_cfa_offset 9
 800               		.cfi_offset 18, -8
 801 0014 3F93      		push r19
 802               	.LCFI20:
 803               		.cfi_def_cfa_offset 10
 804               		.cfi_offset 19, -9
 805 0016 4F93      		push r20
 806               	.LCFI21:
 807               		.cfi_def_cfa_offset 11
 808               		.cfi_offset 20, -10
 809 0018 5F93      		push r21
 810               	.LCFI22:
 811               		.cfi_def_cfa_offset 12
 812               		.cfi_offset 21, -11
 813 001a 6F93      		push r22
 814               	.LCFI23:
 815               		.cfi_def_cfa_offset 13
 816               		.cfi_offset 22, -12
 817 001c 7F93      		push r23
 818               	.LCFI24:
 819               		.cfi_def_cfa_offset 14
 820               		.cfi_offset 23, -13
 821 001e 8F93      		push r24
 822               	.LCFI25:
 823               		.cfi_def_cfa_offset 15
 824               		.cfi_offset 24, -14
 825 0020 9F93      		push r25
 826               	.LCFI26:
 827               		.cfi_def_cfa_offset 16
 828               		.cfi_offset 25, -15
 829 0022 AF93      		push r26
 830               	.LCFI27:
 831               		.cfi_def_cfa_offset 17
 832               		.cfi_offset 26, -16
 833 0024 BF93      		push r27
 834               	.LCFI28:
 835               		.cfi_def_cfa_offset 18
 836               		.cfi_offset 27, -17
 837 0026 EF93      		push r30
 838               	.LCFI29:
 839               		.cfi_def_cfa_offset 19
 840               		.cfi_offset 30, -18
 841 0028 FF93      		push r31
 842               	.LCFI30:
 843               		.cfi_def_cfa_offset 20
 844               		.cfi_offset 31, -19
 845 002a CF93      		push r28
 846               	.LCFI31:
 847               		.cfi_def_cfa_offset 21
 848               		.cfi_offset 28, -20
 849 002c DF93      		push r29
 850               	.LCFI32:
 851               		.cfi_def_cfa_offset 22
 852               		.cfi_offset 29, -21
 853 002e 0F92      		push __tmp_reg__
 854               	.LCFI33:
 855               		.cfi_def_cfa_offset 23
 856 0030 CDB7      		in r28,__SP_L__
 857 0032 DEB7      		in r29,__SP_H__
 858               	.LCFI34:
 859               		.cfi_def_cfa_register 28
 860               	/* prologue: Signal */
 861               	/* frame size = 1 */
 862               	/* stack size = 22 */
 863               	.L__stack_usage = 22
 387:platforms/avr/drivers/serial.c ****     // recive transaction table index
 388:platforms/avr/drivers/serial.c ****     uint8_t tid, bits;
 864               		.loc 1 388 5 view .LVU229
 389:platforms/avr/drivers/serial.c ****     uint8_t pecount = 0;
 865               		.loc 1 389 5 view .LVU230
 866               		.loc 1 389 13 is_stmt 0 view .LVU231
 867 0034 1982      		std Y+1,__zero_reg__
 390:platforms/avr/drivers/serial.c ****     sync_recv();
 868               		.loc 1 390 5 is_stmt 1 view .LVU232
 869 0036 0E94 0000 		call sync_recv
 870               	.LVL52:
 391:platforms/avr/drivers/serial.c ****     bits = serial_read_chunk(&pecount, 8);
 871               		.loc 1 391 5 view .LVU233
 872               		.loc 1 391 12 is_stmt 0 view .LVU234
 873 003a CE01      		movw r24,r28
 874 003c 0196      		adiw r24,1
 875 003e 0E94 0000 		call serial_read_chunk.constprop.0
 876               	.LVL53:
 877 0042 282F      		mov r18,r24
 878               	.LVL54:
 392:platforms/avr/drivers/serial.c ****     tid  = bits >> 3;
 879               		.loc 1 392 5 is_stmt 1 view .LVU235
 880               		.loc 1 392 10 is_stmt 0 view .LVU236
 881 0044 A82F      		mov r26,r24
 882 0046 A695      		lsr r26
 883 0048 A695      		lsr r26
 884 004a A695      		lsr r26
 885               	.LVL55:
 393:platforms/avr/drivers/serial.c ****     bits = (bits & 7) != (nibble_bits_count(tid) & 7);
 886               		.loc 1 393 5 is_stmt 1 view .LVU237
 887               	.LBB355:
 888               	.LBI355:
 379:platforms/avr/drivers/serial.c ****     bits = (bits & 0x5) + (bits >> 1 & 0x5);
 889               		.loc 1 379 23 view .LVU238
 890               	.LBB356:
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 891               		.loc 1 380 5 view .LVU239
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 892               		.loc 1 380 38 is_stmt 0 view .LVU240
 893 004c 982F      		mov r25,r24
 894 004e 9295      		swap r25
 895 0050 9570      		andi r25,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 896               		.loc 1 380 18 view .LVU241
 897 0052 8A2F      		mov r24,r26
 898 0054 8570      		andi r24,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 899               		.loc 1 380 10 view .LVU242
 900 0056 980F      		add r25,r24
 901               	.LVL56:
 381:platforms/avr/drivers/serial.c ****     return bits;
 902               		.loc 1 381 5 is_stmt 1 view .LVU243
 381:platforms/avr/drivers/serial.c ****     return bits;
 903               		.loc 1 381 18 is_stmt 0 view .LVU244
 904 0058 892F      		mov r24,r25
 905 005a 8370      		andi r24,lo8(3)
 381:platforms/avr/drivers/serial.c ****     return bits;
 906               		.loc 1 381 38 view .LVU245
 907 005c 9695      		lsr r25
 908 005e 9695      		lsr r25
 909               	.LVL57:
 382:platforms/avr/drivers/serial.c **** }
 910               		.loc 1 382 5 is_stmt 1 view .LVU246
 382:platforms/avr/drivers/serial.c **** }
 911               		.loc 1 382 5 is_stmt 0 view .LVU247
 912               	.LBE356:
 913               	.LBE355:
 394:platforms/avr/drivers/serial.c ****     if (bits || pecount > 0 || tid > NUM_TOTAL_TRANSACTIONS) {
 914               		.loc 1 394 5 is_stmt 1 view .LVU248
 915               	.LBB358:
 916               	.LBB357:
 381:platforms/avr/drivers/serial.c ****     return bits;
 917               		.loc 1 381 10 is_stmt 0 view .LVU249
 918 0060 890F      		add r24,r25
 919               	.LVL58:
 381:platforms/avr/drivers/serial.c ****     return bits;
 920               		.loc 1 381 10 view .LVU250
 921               	.LBE357:
 922               	.LBE358:
 393:platforms/avr/drivers/serial.c ****     if (bits || pecount > 0 || tid > NUM_TOTAL_TRANSACTIONS) {
 923               		.loc 1 393 23 view .LVU251
 924 0062 8227      		eor r24,r18
 925               		.loc 1 394 14 view .LVU252
 926 0064 8770      		andi r24,lo8(7)
 927 0066 9981      		ldd r25,Y+1
 928               	.LVL59:
 929               		.loc 1 394 14 view .LVU253
 930 0068 892B      		or r24,r25
 931 006a 01F0      		breq .+2
 932 006c 00C0      		rjmp .L35
 933               		.loc 1 394 29 discriminator 2 view .LVU254
 934 006e A630      		cpi r26,lo8(6)
 935 0070 00F0      		brlo .+2
 936 0072 00C0      		rjmp .L35
 395:platforms/avr/drivers/serial.c ****         return;
 396:platforms/avr/drivers/serial.c ****     }
 397:platforms/avr/drivers/serial.c ****     serial_delay_half1();
 937               		.loc 1 397 5 is_stmt 1 view .LVU255
 938               	.LBB359:
 939               	.LBI359:
 234:platforms/avr/drivers/serial.c **** 
 940               		.loc 1 234 20 view .LVU256
 234:platforms/avr/drivers/serial.c **** 
 941               		.loc 1 234 47 view .LVU257
 942               	.LVL60:
 943               	.LBB360:
 944               	.LBI360:
 255:/usr/avr/include/util/delay.h **** {
 945               		.loc 2 255 1 view .LVU258
 946               	.LBB361:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 947               		.loc 2 257 2 view .LVU259
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 948               		.loc 2 261 2 view .LVU260
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 949               		.loc 2 262 2 view .LVU261
 263:/usr/avr/include/util/delay.h **** 
 950               		.loc 2 263 2 view .LVU262
 273:/usr/avr/include/util/delay.h **** 	#endif
 951               		.loc 2 273 3 view .LVU263
 952               		.loc 2 276 2 view .LVU264
 953 0074 80E1      		ldi r24,lo8(16)
 954 0076 8A95      	1:	dec r24
 955 0078 01F4      		brne 1b
 956               	.LVL61:
 957               		.loc 2 276 2 is_stmt 0 view .LVU265
 958               	.LBE361:
 959               	.LBE360:
 960               	.LBE359:
 398:platforms/avr/drivers/serial.c **** 
 399:platforms/avr/drivers/serial.c ****     serial_high();  // response step1 low->high
 961               		.loc 1 399 5 is_stmt 1 view .LVU266
 962               	.LBB362:
 963               	.LBI362:
 253:platforms/avr/drivers/serial.c **** 
 964               		.loc 1 253 20 view .LVU267
 965               	.LBB363:
 253:platforms/avr/drivers/serial.c **** 
 966               		.loc 1 253 40 view .LVU268
 967 007a 5A9A      		sbi 0xb,2
 968               	.LBE363:
 969               	.LBE362:
 400:platforms/avr/drivers/serial.c ****     serial_output();
 970               		.loc 1 400 5 view .LVU269
 971               	.LBB364:
 972               	.LBI364:
 240:platforms/avr/drivers/serial.c **** 
 973               		.loc 1 240 20 view .LVU270
 974               	.LBB365:
 240:platforms/avr/drivers/serial.c **** 
 975               		.loc 1 240 42 view .LVU271
 976 007c 529A      		sbi 0xa,2
 977               	.LBE365:
 978               	.LBE364:
 401:platforms/avr/drivers/serial.c ****     _delay_sub_us(SLAVE_INT_ACK_WIDTH_UNIT * SLAVE_INT_ACK_WIDTH);
 979               		.loc 1 401 5 view .LVU272
 980 007e B2E0      		ldi r27,lo8(2)
 981 0080 BA95      	1:	dec r27
 982 0082 01F4      		brne 1b
 983 0084 00C0      		rjmp .
 402:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[tid];
 984               		.loc 1 402 5 view .LVU273
 985               		.loc 1 402 63 is_stmt 0 view .LVU274
 986 0086 EA2E      		mov r14,r26
 987 0088 F12C      		mov r15,__zero_reg__
 988               	.LVL62:
 403:platforms/avr/drivers/serial.c ****     serial_low();  // response step2 ack high->low
 989               		.loc 1 403 5 is_stmt 1 view .LVU275
 990               	.LBB366:
 991               	.LBI366:
 250:platforms/avr/drivers/serial.c **** 
 992               		.loc 1 250 20 view .LVU276
 993               	.LBB367:
 250:platforms/avr/drivers/serial.c **** 
 994               		.loc 1 250 39 view .LVU277
 995 008a 5A98      		cbi 0xb,2
 996               	.LBE367:
 997               	.LBE366:
 404:platforms/avr/drivers/serial.c **** 
 405:platforms/avr/drivers/serial.c ****     // If the transaction has a callback, we can execute it now
 406:platforms/avr/drivers/serial.c ****     if (trans->slave_callback) {
 998               		.loc 1 406 5 view .LVU278
 999               		.loc 1 406 14 is_stmt 0 view .LVU279
 1000 008c EAE0      		ldi r30,lo8(10)
 1001 008e AE9F      		mul r26,r30
 1002 0090 D001      		movw r26,r0
 1003 0092 1124      		clr __zero_reg__
 1004               	.LVL63:
 1005               		.loc 1 406 14 view .LVU280
 1006 0094 A050      		subi r26,lo8(-(split_transaction_table))
 1007 0096 B040      		sbci r27,hi8(-(split_transaction_table))
 1008 0098 1896      		adiw r26,8
 1009 009a ED91      		ld r30,X+
 1010 009c FC91      		ld r31,X
 1011 009e 1997      		sbiw r26,8+1
 1012               		.loc 1 406 8 view .LVU281
 1013 00a0 3097      		sbiw r30,0
 1014 00a2 01F0      		breq .L37
 407:platforms/avr/drivers/serial.c ****         trans->slave_callback(trans->initiator2target_buffer_size, split_trans_initiator2target_buf
 1015               		.loc 1 407 9 is_stmt 1 view .LVU282
 1016               		.loc 1 407 149 is_stmt 0 view .LVU283
 1017 00a4 6091 0000 		lds r22,split_shmem
 1018 00a8 7091 0000 		lds r23,split_shmem+1
 1019               		.loc 1 407 9 view .LVU284
 1020 00ac 1696      		adiw r26,6
 1021 00ae 2D91      		ld r18,X+
 1022 00b0 3C91      		ld r19,X
 1023 00b2 1797      		sbiw r26,6+1
 1024               	.LVL64:
 1025               		.loc 1 407 9 view .LVU285
 1026 00b4 260F      		add r18,r22
 1027 00b6 371F      		adc r19,r23
 1028 00b8 1396      		adiw r26,3
 1029 00ba 8D91      		ld r24,X+
 1030 00bc 9C91      		ld r25,X
 1031 00be 1497      		sbiw r26,3+1
 1032 00c0 680F      		add r22,r24
 1033 00c2 791F      		adc r23,r25
 1034 00c4 1596      		adiw r26,5
 1035 00c6 4C91      		ld r20,X
 1036 00c8 1597      		sbiw r26,5
 1037 00ca 1296      		adiw r26,2
 1038 00cc 8C91      		ld r24,X
 1039 00ce 0995      		icall
 1040               	.LVL65:
 1041               	.L37:
 408:platforms/avr/drivers/serial.c ****     }
 409:platforms/avr/drivers/serial.c **** 
 410:platforms/avr/drivers/serial.c ****     // target send phase
 411:platforms/avr/drivers/serial.c ****     if (trans->target2initiator_buffer_size > 0) serial_send_packet((uint8_t *)split_trans_target2i
 1042               		.loc 1 411 5 is_stmt 1 view .LVU286
 1043               		.loc 1 411 14 is_stmt 0 view .LVU287
 1044 00d0 8AE0      		ldi r24,lo8(10)
 1045 00d2 8E9D      		mul r24,r14
 1046 00d4 F001      		movw r30,r0
 1047 00d6 8F9D      		mul r24,r15
 1048 00d8 F00D      		add r31,r0
 1049 00da 1124      		clr __zero_reg__
 1050 00dc E050      		subi r30,lo8(-(split_transaction_table))
 1051 00de F040      		sbci r31,hi8(-(split_transaction_table))
 1052 00e0 6581      		ldd r22,Z+5
 1053               		.loc 1 411 8 view .LVU288
 1054 00e2 6623      		tst r22
 1055 00e4 01F0      		breq .L38
 1056               		.loc 1 411 50 is_stmt 1 discriminator 1 view .LVU289
 1057 00e6 2091 0000 		lds r18,split_shmem
 1058 00ea 3091 0000 		lds r19,split_shmem+1
 1059 00ee 8681      		ldd r24,Z+6
 1060 00f0 9781      		ldd r25,Z+7
 1061 00f2 820F      		add r24,r18
 1062 00f4 931F      		adc r25,r19
 1063 00f6 0E94 0000 		call serial_send_packet
 1064               	.LVL66:
 1065               	.L38:
 412:platforms/avr/drivers/serial.c ****     // target switch to input
 413:platforms/avr/drivers/serial.c ****     change_sender2reciver();
 1066               		.loc 1 413 5 view .LVU290
 1067               	.LBB368:
 1068               	.LBI368:
 363:platforms/avr/drivers/serial.c ****     sync_send();                 // 0
 1069               		.loc 1 363 20 view .LVU291
 1070               	.LBB369:
 364:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 1
 1071               		.loc 1 364 5 view .LVU292
 1072 00fa 0E94 0000 		call sync_send
 1073               	.LVL67:
 365:platforms/avr/drivers/serial.c ****     serial_low();                // 2
 1074               		.loc 1 365 5 view .LVU293
 1075               	.LBB370:
 1076               	.LBI370:
 234:platforms/avr/drivers/serial.c **** 
 1077               		.loc 1 234 20 view .LVU294
 234:platforms/avr/drivers/serial.c **** 
 1078               		.loc 1 234 47 view .LVU295
 1079               	.LBB371:
 1080               	.LBI371:
 255:/usr/avr/include/util/delay.h **** {
 1081               		.loc 2 255 1 view .LVU296
 1082               	.LBB372:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1083               		.loc 2 257 2 view .LVU297
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1084               		.loc 2 261 2 view .LVU298
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1085               		.loc 2 262 2 view .LVU299
 263:/usr/avr/include/util/delay.h **** 
 1086               		.loc 2 263 2 view .LVU300
 273:/usr/avr/include/util/delay.h **** 	#endif
 1087               		.loc 2 273 3 view .LVU301
 1088               		.loc 2 276 2 view .LVU302
 1089 00fe F0E1      		ldi r31,lo8(16)
 1090 0100 FA95      	1:	dec r31
 1091 0102 01F4      		brne 1b
 1092               	.LVL68:
 1093               		.loc 2 276 2 is_stmt 0 view .LVU303
 1094               	.LBE372:
 1095               	.LBE371:
 1096               	.LBE370:
 366:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();  // 2
 1097               		.loc 1 366 5 is_stmt 1 view .LVU304
 1098               	.LBB373:
 1099               	.LBI373:
 250:platforms/avr/drivers/serial.c **** 
 1100               		.loc 1 250 20 view .LVU305
 1101               	.LBB374:
 250:platforms/avr/drivers/serial.c **** 
 1102               		.loc 1 250 39 view .LVU306
 1103 0104 5A98      		cbi 0xb,2
 1104               	.LBE374:
 1105               	.LBE373:
 367:platforms/avr/drivers/serial.c ****     serial_delay_half1();        // 3
 1106               		.loc 1 367 5 view .LVU307
 1107               	.LBB375:
 1108               	.LBI375:
 244:platforms/avr/drivers/serial.c **** 
 1109               		.loc 1 244 20 view .LVU308
 1110               	.LBB376:
 244:platforms/avr/drivers/serial.c **** 
 1111               		.loc 1 244 53 view .LVU309
 1112 0106 5298      		cbi 0xa,2
 1113 0108 5A9A      		sbi 0xb,2
 1114               	.LBE376:
 1115               	.LBE375:
 368:platforms/avr/drivers/serial.c **** }
 1116               		.loc 1 368 5 view .LVU310
 1117               	.LBB377:
 1118               	.LBI377:
 234:platforms/avr/drivers/serial.c **** 
 1119               		.loc 1 234 20 view .LVU311
 234:platforms/avr/drivers/serial.c **** 
 1120               		.loc 1 234 47 view .LVU312
 1121               	.LVL69:
 1122               	.LBB378:
 1123               	.LBI378:
 255:/usr/avr/include/util/delay.h **** {
 1124               		.loc 2 255 1 view .LVU313
 1125               	.LBB379:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1126               		.loc 2 257 2 view .LVU314
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1127               		.loc 2 261 2 view .LVU315
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1128               		.loc 2 262 2 view .LVU316
 263:/usr/avr/include/util/delay.h **** 
 1129               		.loc 2 263 2 view .LVU317
 273:/usr/avr/include/util/delay.h **** 	#endif
 1130               		.loc 2 273 3 view .LVU318
 1131               		.loc 2 276 2 view .LVU319
 1132 010a 80E1      		ldi r24,lo8(16)
 1133 010c 8A95      	1:	dec r24
 1134 010e 01F4      		brne 1b
 1135               	.LVL70:
 1136               		.loc 2 276 2 is_stmt 0 view .LVU320
 1137               	.LBE379:
 1138               	.LBE378:
 1139               	.LBE377:
 1140               	.LBE369:
 1141               	.LBE368:
 414:platforms/avr/drivers/serial.c **** 
 415:platforms/avr/drivers/serial.c ****     // target recive phase
 416:platforms/avr/drivers/serial.c ****     if (trans->initiator2target_buffer_size > 0) {
 1142               		.loc 1 416 5 is_stmt 1 view .LVU321
 1143               		.loc 1 416 14 is_stmt 0 view .LVU322
 1144 0110 8AE0      		ldi r24,lo8(10)
 1145 0112 8E9D      		mul r24,r14
 1146 0114 8001      		movw r16,r0
 1147 0116 8F9D      		mul r24,r15
 1148 0118 100D      		add r17,r0
 1149 011a 1124      		clr __zero_reg__
 1150 011c 0050      		subi r16,lo8(-(split_transaction_table))
 1151 011e 1040      		sbci r17,hi8(-(split_transaction_table))
 1152 0120 D801      		movw r26,r16
 1153 0122 1296      		adiw r26,2
 1154 0124 6C91      		ld r22,X
 1155 0126 1297      		sbiw r26,2
 1156               		.loc 1 416 8 view .LVU323
 1157 0128 6623      		tst r22
 1158 012a 01F0      		breq .L39
 417:platforms/avr/drivers/serial.c ****         if (serial_recive_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->init
 1159               		.loc 1 417 9 is_stmt 1 view .LVU324
 1160               		.loc 1 417 13 is_stmt 0 view .LVU325
 1161 012c 2091 0000 		lds r18,split_shmem
 1162 0130 3091 0000 		lds r19,split_shmem+1
 1163 0134 1396      		adiw r26,3
 1164 0136 8D91      		ld r24,X+
 1165 0138 9C91      		ld r25,X
 1166 013a 820F      		add r24,r18
 1167 013c 931F      		adc r25,r19
 1168 013e 0E94 0000 		call serial_recive_packet
 1169               	.LVL71:
 1170 0142 D801      		movw r26,r16
 1171 0144 ED91      		ld r30,X+
 1172 0146 FC91      		ld r31,X
 1173               		.loc 1 417 12 view .LVU326
 1174 0148 8823      		tst r24
 1175 014a 01F0      		breq .L40
 1176               	.L48:
 418:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_ACCEPTED;
 419:platforms/avr/drivers/serial.c ****         } else {
 420:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_DATA_ERROR;
 421:platforms/avr/drivers/serial.c ****         }
 422:platforms/avr/drivers/serial.c ****     } else {
 423:platforms/avr/drivers/serial.c ****         *trans->status = TRANSACTION_ACCEPTED;
 1177               		.loc 1 423 24 view .LVU327
 1178 014c 88E0      		ldi r24,lo8(8)
 1179 014e 00C0      		rjmp .L49
 1180               	.L40:
 420:platforms/avr/drivers/serial.c ****         }
 1181               		.loc 1 420 13 is_stmt 1 view .LVU328
 420:platforms/avr/drivers/serial.c ****         }
 1182               		.loc 1 420 28 is_stmt 0 view .LVU329
 1183 0150 82E0      		ldi r24,lo8(2)
 1184               	.L49:
 1185               		.loc 1 423 24 view .LVU330
 1186 0152 8083      		st Z,r24
 424:platforms/avr/drivers/serial.c ****     }
 425:platforms/avr/drivers/serial.c **** 
 426:platforms/avr/drivers/serial.c ****     sync_recv();  // weit initiator output to high
 1187               		.loc 1 426 5 is_stmt 1 view .LVU331
 1188 0154 0E94 0000 		call sync_recv
 1189               	.LVL72:
 1190               	.L35:
 1191               	/* epilogue start */
 427:platforms/avr/drivers/serial.c **** }
 1192               		.loc 1 427 1 is_stmt 0 view .LVU332
 1193 0158 0F90      		pop __tmp_reg__
 1194 015a DF91      		pop r29
 1195 015c CF91      		pop r28
 1196 015e FF91      		pop r31
 1197 0160 EF91      		pop r30
 1198 0162 BF91      		pop r27
 1199 0164 AF91      		pop r26
 1200 0166 9F91      		pop r25
 1201 0168 8F91      		pop r24
 1202 016a 7F91      		pop r23
 1203 016c 6F91      		pop r22
 1204 016e 5F91      		pop r21
 1205 0170 4F91      		pop r20
 1206 0172 3F91      		pop r19
 1207 0174 2F91      		pop r18
 1208 0176 1F91      		pop r17
 1209 0178 0F91      		pop r16
 1210 017a FF90      		pop r15
 1211 017c EF90      		pop r14
 1212 017e 0F90      		pop r0
 1213 0180 0FBE      		out __SREG__,r0
 1214 0182 0F90      		pop r0
 1215 0184 1F90      		pop r1
 1216 0186 1895      		reti
 1217               	.LVL73:
 1218               	.L39:
 423:platforms/avr/drivers/serial.c ****     }
 1219               		.loc 1 423 9 is_stmt 1 view .LVU333
 423:platforms/avr/drivers/serial.c ****     }
 1220               		.loc 1 423 15 is_stmt 0 view .LVU334
 1221 0188 ED91      		ld r30,X+
 1222 018a FC91      		ld r31,X
 1223 018c 00C0      		rjmp .L48
 1224               		.cfi_endproc
 1225               	.LFE49:
 1227               		.section	.text.soft_serial_transaction,"ax",@progbits
 1228               	.global	soft_serial_transaction
 1230               	soft_serial_transaction:
 1231               	.LVL74:
 1232               	.LFB50:
 428:platforms/avr/drivers/serial.c **** 
 429:platforms/avr/drivers/serial.c **** /////////
 430:platforms/avr/drivers/serial.c **** //  start transaction by initiator
 431:platforms/avr/drivers/serial.c **** //
 432:platforms/avr/drivers/serial.c **** // int  soft_serial_transaction(int sstd_index)
 433:platforms/avr/drivers/serial.c **** //
 434:platforms/avr/drivers/serial.c **** // Returns:
 435:platforms/avr/drivers/serial.c **** //    TRANSACTION_END
 436:platforms/avr/drivers/serial.c **** //    TRANSACTION_NO_RESPONSE
 437:platforms/avr/drivers/serial.c **** //    TRANSACTION_DATA_ERROR
 438:platforms/avr/drivers/serial.c **** // this code is very time dependent, so we need to disable interrupts
 439:platforms/avr/drivers/serial.c **** int soft_serial_transaction(int sstd_index) {
 1233               		.loc 1 439 45 is_stmt 1 view -0
 1234               		.cfi_startproc
 1235               		.loc 1 439 45 is_stmt 0 view .LVU336
 1236 0000 0F93      		push r16
 1237               	.LCFI35:
 1238               		.cfi_def_cfa_offset 3
 1239               		.cfi_offset 16, -2
 1240 0002 1F93      		push r17
 1241               	.LCFI36:
 1242               		.cfi_def_cfa_offset 4
 1243               		.cfi_offset 17, -3
 1244 0004 CF93      		push r28
 1245               	.LCFI37:
 1246               		.cfi_def_cfa_offset 5
 1247               		.cfi_offset 28, -4
 1248 0006 DF93      		push r29
 1249               	.LCFI38:
 1250               		.cfi_def_cfa_offset 6
 1251               		.cfi_offset 29, -5
 1252               	/* prologue: function */
 1253               	/* frame size = 0 */
 1254               	/* stack size = 4 */
 1255               	.L__stack_usage = 4
 1256 0008 EC01      		movw r28,r24
 440:platforms/avr/drivers/serial.c ****     if (sstd_index > NUM_TOTAL_TRANSACTIONS) return TRANSACTION_TYPE_ERROR;
 1257               		.loc 1 440 5 is_stmt 1 view .LVU337
 1258               		.loc 1 440 8 is_stmt 0 view .LVU338
 1259 000a 0697      		sbiw r24,6
 1260 000c 04F0      		brlt .+2
 1261 000e 00C0      		rjmp .L60
 441:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[sstd_index];
 1262               		.loc 1 441 5 is_stmt 1 view .LVU339
 1263               	.LVL75:
 442:platforms/avr/drivers/serial.c **** 
 443:platforms/avr/drivers/serial.c ****     if (!trans->status) return TRANSACTION_TYPE_ERROR;  // not registered
 1264               		.loc 1 443 5 view .LVU340
 1265               		.loc 1 443 15 is_stmt 0 view .LVU341
 1266 0010 8AE0      		ldi r24,lo8(10)
 1267               	.LVL76:
 1268               		.loc 1 443 15 view .LVU342
 1269 0012 8C9F      		mul r24,r28
 1270 0014 F001      		movw r30,r0
 1271 0016 8D9F      		mul r24,r29
 1272 0018 F00D      		add r31,r0
 1273 001a 1124      		clr __zero_reg__
 1274 001c E050      		subi r30,lo8(-(split_transaction_table))
 1275 001e F040      		sbci r31,hi8(-(split_transaction_table))
 1276               		.loc 1 443 8 view .LVU343
 1277 0020 8081      		ld r24,Z
 1278 0022 9181      		ldd r25,Z+1
 1279 0024 892B      		or r24,r25
 1280 0026 01F4      		brne .+2
 1281 0028 00C0      		rjmp .L60
 444:platforms/avr/drivers/serial.c **** 
 445:platforms/avr/drivers/serial.c ****     cli();
 1282               		.loc 1 445 5 is_stmt 1 view .LVU344
 1283               	/* #APP */
 1284               	 ;  445 "platforms/avr/drivers/serial.c" 1
 1285 002a F894      		cli
 1286               	 ;  0 "" 2
 446:platforms/avr/drivers/serial.c **** 
 447:platforms/avr/drivers/serial.c ****     // signal to the target that we want to start a transaction
 448:platforms/avr/drivers/serial.c ****     serial_output();
 1287               		.loc 1 448 5 view .LVU345
 1288               	/* #NOAPP */
 1289               	.LBB418:
 1290               	.LBI418:
 240:platforms/avr/drivers/serial.c **** 
 1291               		.loc 1 240 20 view .LVU346
 1292               	.LBB419:
 240:platforms/avr/drivers/serial.c **** 
 1293               		.loc 1 240 42 view .LVU347
 1294 002c 529A      		sbi 0xa,2
 1295               	.LBE419:
 1296               	.LBE418:
 449:platforms/avr/drivers/serial.c ****     serial_low();
 1297               		.loc 1 449 5 view .LVU348
 1298               	.LBB420:
 1299               	.LBI420:
 250:platforms/avr/drivers/serial.c **** 
 1300               		.loc 1 250 20 view .LVU349
 1301               	.LBB421:
 250:platforms/avr/drivers/serial.c **** 
 1302               		.loc 1 250 39 view .LVU350
 1303 002e 5A98      		cbi 0xb,2
 1304               	.LBE421:
 1305               	.LBE420:
 450:platforms/avr/drivers/serial.c ****     _delay_us(SLAVE_INT_WIDTH_US);
 1306               		.loc 1 450 5 view .LVU351
 1307               	.LVL77:
 1308               	.LBB422:
 1309               	.LBI422:
 255:/usr/avr/include/util/delay.h **** {
 1310               		.loc 2 255 1 view .LVU352
 1311               	.LBB423:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1312               		.loc 2 257 2 view .LVU353
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1313               		.loc 2 261 2 view .LVU354
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1314               		.loc 2 262 2 view .LVU355
 263:/usr/avr/include/util/delay.h **** 
 1315               		.loc 2 263 2 view .LVU356
 273:/usr/avr/include/util/delay.h **** 	#endif
 1316               		.loc 2 273 3 view .LVU357
 1317               		.loc 2 276 2 view .LVU358
 1318 0030 85E0      		ldi r24,lo8(5)
 1319 0032 8A95      	1:	dec r24
 1320 0034 01F4      		brne 1b
 1321 0036 0000      		nop
 1322               	.LVL78:
 1323               		.loc 2 276 2 is_stmt 0 view .LVU359
 1324               	.LBE423:
 1325               	.LBE422:
 451:platforms/avr/drivers/serial.c **** 
 452:platforms/avr/drivers/serial.c ****     // send transaction table index
 453:platforms/avr/drivers/serial.c ****     int tid = (sstd_index << 3) | (7 & nibble_bits_count(sstd_index));
 1326               		.loc 1 453 5 is_stmt 1 view .LVU360
 1327               	.LBB424:
 1328               	.LBI424:
 379:platforms/avr/drivers/serial.c ****     bits = (bits & 0x5) + (bits >> 1 & 0x5);
 1329               		.loc 1 379 23 view .LVU361
 1330               	.LBB425:
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1331               		.loc 1 380 5 view .LVU362
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1332               		.loc 1 380 38 is_stmt 0 view .LVU363
 1333 0038 8C2F      		mov r24,r28
 1334 003a 8695      		lsr r24
 1335 003c 8570      		andi r24,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1336               		.loc 1 380 18 view .LVU364
 1337 003e 9C2F      		mov r25,r28
 1338 0040 9570      		andi r25,lo8(5)
 380:platforms/avr/drivers/serial.c ****     bits = (bits & 0x3) + (bits >> 2 & 0x3);
 1339               		.loc 1 380 10 view .LVU365
 1340 0042 890F      		add r24,r25
 1341               	.LVL79:
 381:platforms/avr/drivers/serial.c ****     return bits;
 1342               		.loc 1 381 5 is_stmt 1 view .LVU366
 381:platforms/avr/drivers/serial.c ****     return bits;
 1343               		.loc 1 381 18 is_stmt 0 view .LVU367
 1344 0044 982F      		mov r25,r24
 1345 0046 9370      		andi r25,lo8(3)
 381:platforms/avr/drivers/serial.c ****     return bits;
 1346               		.loc 1 381 38 view .LVU368
 1347 0048 8695      		lsr r24
 1348 004a 8695      		lsr r24
 1349               	.LVL80:
 382:platforms/avr/drivers/serial.c **** }
 1350               		.loc 1 382 5 is_stmt 1 view .LVU369
 381:platforms/avr/drivers/serial.c ****     return bits;
 1351               		.loc 1 381 10 is_stmt 0 view .LVU370
 1352 004c 890F      		add r24,r25
 1353               	.LBE425:
 1354               	.LBE424:
 1355               		.loc 1 453 9 view .LVU371
 1356 004e 8E01      		movw r16,r28
 1357 0050 93E0      		ldi r25,3
 1358               		1:
 1359 0052 000F      		lsl r16
 1360 0054 111F      		rol r17
 1361 0056 9A95      		dec r25
 1362 0058 01F4      		brne 1b
 1363 005a 082B      		or r16,r24
 454:platforms/avr/drivers/serial.c ****     sync_send();
 1364               		.loc 1 454 5 is_stmt 1 view .LVU372
 1365 005c 0E94 0000 		call sync_send
 1366               	.LVL81:
 455:platforms/avr/drivers/serial.c ****     _delay_sub_us(TID_SEND_ADJUST);
 1367               		.loc 1 455 5 view .LVU373
 1368 0060 00C0      		rjmp .
 456:platforms/avr/drivers/serial.c ****     serial_write_chunk(tid, 8);
 1369               		.loc 1 456 5 view .LVU374
 1370 0062 68E0      		ldi r22,lo8(8)
 1371 0064 802F      		mov r24,r16
 1372 0066 0E94 0000 		call serial_write_chunk
 1373               	.LVL82:
 457:platforms/avr/drivers/serial.c ****     serial_delay_half1();
 1374               		.loc 1 457 5 view .LVU375
 1375               	.LBB426:
 1376               	.LBI426:
 234:platforms/avr/drivers/serial.c **** 
 1377               		.loc 1 234 20 view .LVU376
 234:platforms/avr/drivers/serial.c **** 
 1378               		.loc 1 234 47 view .LVU377
 1379               	.LBB427:
 1380               	.LBI427:
 255:/usr/avr/include/util/delay.h **** {
 1381               		.loc 2 255 1 view .LVU378
 1382               	.LBB428:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1383               		.loc 2 257 2 view .LVU379
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1384               		.loc 2 261 2 view .LVU380
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1385               		.loc 2 262 2 view .LVU381
 263:/usr/avr/include/util/delay.h **** 
 1386               		.loc 2 263 2 view .LVU382
 273:/usr/avr/include/util/delay.h **** 	#endif
 1387               		.loc 2 273 3 view .LVU383
 1388               		.loc 2 276 2 view .LVU384
 1389 006a A0E1      		ldi r26,lo8(16)
 1390 006c AA95      	1:	dec r26
 1391 006e 01F4      		brne 1b
 1392               	.LVL83:
 1393               		.loc 2 276 2 is_stmt 0 view .LVU385
 1394               	.LBE428:
 1395               	.LBE427:
 1396               	.LBE426:
 458:platforms/avr/drivers/serial.c **** 
 459:platforms/avr/drivers/serial.c ****     // wait for the target response (step1 low->high)
 460:platforms/avr/drivers/serial.c ****     serial_input_with_pullup();
 1397               		.loc 1 460 5 is_stmt 1 view .LVU386
 1398               	.LBB429:
 1399               	.LBI429:
 244:platforms/avr/drivers/serial.c **** 
 1400               		.loc 1 244 20 view .LVU387
 1401               	.LBB430:
 244:platforms/avr/drivers/serial.c **** 
 1402               		.loc 1 244 53 view .LVU388
 1403 0070 5298      		cbi 0xa,2
 1404 0072 5A9A      		sbi 0xb,2
 1405               	.L52:
 1406               	.LBE430:
 1407               	.LBE429:
 461:platforms/avr/drivers/serial.c ****     while (!serial_read_pin()) {
 1408               		.loc 1 461 12 view .LVU389
 1409               	.LBB431:
 1410               	.LBI431:
 247:platforms/avr/drivers/serial.c **** 
 1411               		.loc 1 247 23 view .LVU390
 1412               	.LBB432:
 247:platforms/avr/drivers/serial.c **** 
 1413               		.loc 1 247 47 view .LVU391
 1414               	.LBE432:
 1415               	.LBE431:
 1416               		.loc 1 461 12 is_stmt 0 view .LVU392
 1417 0074 4A9B      		sbis 0x9,2
 1418 0076 00C0      		rjmp .L53
 1419 0078 87E0      		ldi r24,lo8(7)
 1420 007a 90E0      		ldi r25,0
 1421               	.L54:
 1422               	.LVL84:
 1423               	.LBB433:
 462:platforms/avr/drivers/serial.c ****         _delay_sub_us(2);
 463:platforms/avr/drivers/serial.c ****     }
 464:platforms/avr/drivers/serial.c **** 
 465:platforms/avr/drivers/serial.c ****     // check if the target is present (step2 high->low)
 466:platforms/avr/drivers/serial.c ****     for (int i = 0; serial_read_pin(); i++) {
 1424               		.loc 1 466 21 is_stmt 1 discriminator 1 view .LVU393
 1425               	.LBB434:
 1426               	.LBI434:
 247:platforms/avr/drivers/serial.c **** 
 1427               		.loc 1 247 23 discriminator 1 view .LVU394
 1428               	.LBB435:
 247:platforms/avr/drivers/serial.c **** 
 1429               		.loc 1 247 47 discriminator 1 view .LVU395
 1430               	.LBE435:
 1431               	.LBE434:
 1432               		.loc 1 466 21 is_stmt 0 discriminator 1 view .LVU396
 1433 007c 4A99      		sbic 0x9,2
 1434 007e 00C0      		rjmp .L56
 1435               	.LBE433:
 467:platforms/avr/drivers/serial.c ****         if (i > SLAVE_INT_ACK_WIDTH + 1) {
 468:platforms/avr/drivers/serial.c ****             // slave failed to pull the line low, assume not present
 469:platforms/avr/drivers/serial.c ****             serial_output();
 470:platforms/avr/drivers/serial.c ****             serial_high();
 471:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_NO_RESPONSE;
 472:platforms/avr/drivers/serial.c ****             sei();
 473:platforms/avr/drivers/serial.c ****             return TRANSACTION_NO_RESPONSE;
 474:platforms/avr/drivers/serial.c ****         }
 475:platforms/avr/drivers/serial.c ****         _delay_sub_us(SLAVE_INT_ACK_WIDTH_UNIT);
 476:platforms/avr/drivers/serial.c ****     }
 477:platforms/avr/drivers/serial.c **** 
 478:platforms/avr/drivers/serial.c ****     // initiator recive phase
 479:platforms/avr/drivers/serial.c ****     // if the target is present syncronize with it
 480:platforms/avr/drivers/serial.c ****     if (trans->target2initiator_buffer_size > 0) {
 1436               		.loc 1 480 5 is_stmt 1 view .LVU397
 1437               		.loc 1 480 14 is_stmt 0 view .LVU398
 1438 0080 8AE0      		ldi r24,lo8(10)
 1439               	.LVL85:
 1440               		.loc 1 480 14 view .LVU399
 1441 0082 8C9F      		mul r24,r28
 1442 0084 8001      		movw r16,r0
 1443 0086 8D9F      		mul r24,r29
 1444 0088 100D      		add r17,r0
 1445 008a 1124      		clr __zero_reg__
 1446 008c 0050      		subi r16,lo8(-(split_transaction_table))
 1447 008e 1040      		sbci r17,hi8(-(split_transaction_table))
 1448 0090 F801      		movw r30,r16
 1449 0092 6581      		ldd r22,Z+5
 1450               		.loc 1 480 8 view .LVU400
 1451 0094 6623      		tst r22
 1452 0096 01F0      		breq .L57
 481:platforms/avr/drivers/serial.c ****         if (!serial_recive_packet((uint8_t *)split_trans_target2initiator_buffer(trans), trans->tar
 1453               		.loc 1 481 9 is_stmt 1 view .LVU401
 1454               		.loc 1 481 14 is_stmt 0 view .LVU402
 1455 0098 2091 0000 		lds r18,split_shmem
 1456 009c 3091 0000 		lds r19,split_shmem+1
 1457 00a0 8681      		ldd r24,Z+6
 1458 00a2 9781      		ldd r25,Z+7
 1459 00a4 820F      		add r24,r18
 1460 00a6 931F      		adc r25,r19
 1461 00a8 0E94 0000 		call serial_recive_packet
 1462               	.LVL86:
 1463               		.loc 1 481 12 view .LVU403
 1464 00ac 8111      		cpse r24,__zero_reg__
 1465 00ae 00C0      		rjmp .L57
 482:platforms/avr/drivers/serial.c ****             serial_output();
 1466               		.loc 1 482 13 is_stmt 1 view .LVU404
 1467               	.LBB440:
 1468               	.LBI440:
 240:platforms/avr/drivers/serial.c **** 
 1469               		.loc 1 240 20 view .LVU405
 1470               	.LBB441:
 240:platforms/avr/drivers/serial.c **** 
 1471               		.loc 1 240 42 view .LVU406
 1472 00b0 529A      		sbi 0xa,2
 1473               	.LBE441:
 1474               	.LBE440:
 483:platforms/avr/drivers/serial.c ****             serial_high();
 1475               		.loc 1 483 13 view .LVU407
 1476               	.LBB442:
 1477               	.LBI442:
 253:platforms/avr/drivers/serial.c **** 
 1478               		.loc 1 253 20 view .LVU408
 1479               	.LBB443:
 253:platforms/avr/drivers/serial.c **** 
 1480               		.loc 1 253 40 view .LVU409
 1481 00b2 5A9A      		sbi 0xb,2
 1482               	.LBE443:
 1483               	.LBE442:
 484:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_DATA_ERROR;
 1484               		.loc 1 484 13 view .LVU410
 1485               		.loc 1 484 19 is_stmt 0 view .LVU411
 1486 00b4 D801      		movw r26,r16
 1487 00b6 ED91      		ld r30,X+
 1488 00b8 FC91      		ld r31,X
 1489               		.loc 1 484 28 view .LVU412
 1490 00ba 82E0      		ldi r24,lo8(2)
 1491 00bc 8083      		st Z,r24
 485:platforms/avr/drivers/serial.c ****             sei();
 1492               		.loc 1 485 13 is_stmt 1 view .LVU413
 1493               	/* #APP */
 1494               	 ;  485 "platforms/avr/drivers/serial.c" 1
 1495 00be 7894      		sei
 1496               	 ;  0 "" 2
 486:platforms/avr/drivers/serial.c ****             return TRANSACTION_DATA_ERROR;
 1497               		.loc 1 486 13 view .LVU414
 1498               		.loc 1 486 20 is_stmt 0 view .LVU415
 1499               	/* #NOAPP */
 1500 00c0 82E0      		ldi r24,lo8(2)
 1501 00c2 90E0      		ldi r25,0
 1502 00c4 00C0      		rjmp .L50
 1503               	.L53:
 462:platforms/avr/drivers/serial.c ****     }
 1504               		.loc 1 462 9 is_stmt 1 view .LVU416
 1505 00c6 00C0      		rjmp .
 1506 00c8 00C0      		rjmp .L52
 1507               	.LVL87:
 1508               	.L56:
 1509               	.LBB444:
 467:platforms/avr/drivers/serial.c ****             // slave failed to pull the line low, assume not present
 1510               		.loc 1 467 9 view .LVU417
 467:platforms/avr/drivers/serial.c ****             // slave failed to pull the line low, assume not present
 1511               		.loc 1 467 12 is_stmt 0 view .LVU418
 1512 00ca 0197      		sbiw r24,1
 1513               	.LVL88:
 467:platforms/avr/drivers/serial.c ****             // slave failed to pull the line low, assume not present
 1514               		.loc 1 467 12 view .LVU419
 1515 00cc 01F4      		brne .L55
 469:platforms/avr/drivers/serial.c ****             serial_high();
 1516               		.loc 1 469 13 is_stmt 1 view .LVU420
 1517               	.LBB436:
 1518               	.LBI436:
 240:platforms/avr/drivers/serial.c **** 
 1519               		.loc 1 240 20 view .LVU421
 1520               	.LBB437:
 240:platforms/avr/drivers/serial.c **** 
 1521               		.loc 1 240 42 view .LVU422
 1522 00ce 529A      		sbi 0xa,2
 1523               	.LBE437:
 1524               	.LBE436:
 470:platforms/avr/drivers/serial.c ****             *trans->status = TRANSACTION_NO_RESPONSE;
 1525               		.loc 1 470 13 view .LVU423
 1526               	.LBB438:
 1527               	.LBI438:
 253:platforms/avr/drivers/serial.c **** 
 1528               		.loc 1 253 20 view .LVU424
 1529               	.LBB439:
 253:platforms/avr/drivers/serial.c **** 
 1530               		.loc 1 253 40 view .LVU425
 1531 00d0 5A9A      		sbi 0xb,2
 1532               	.LBE439:
 1533               	.LBE438:
 471:platforms/avr/drivers/serial.c ****             sei();
 1534               		.loc 1 471 13 view .LVU426
 471:platforms/avr/drivers/serial.c ****             sei();
 1535               		.loc 1 471 19 is_stmt 0 view .LVU427
 1536 00d2 8AE0      		ldi r24,lo8(10)
 1537               	.LVL89:
 471:platforms/avr/drivers/serial.c ****             sei();
 1538               		.loc 1 471 19 view .LVU428
 1539 00d4 8C9F      		mul r24,r28
 1540 00d6 F001      		movw r30,r0
 1541 00d8 8D9F      		mul r24,r29
 1542 00da F00D      		add r31,r0
 1543 00dc 1124      		clr __zero_reg__
 1544 00de E050      		subi r30,lo8(-(split_transaction_table))
 1545 00e0 F040      		sbci r31,hi8(-(split_transaction_table))
 1546 00e2 0190      		ld __tmp_reg__,Z+
 1547 00e4 F081      		ld r31,Z
 1548 00e6 E02D      		mov r30,__tmp_reg__
 471:platforms/avr/drivers/serial.c ****             sei();
 1549               		.loc 1 471 28 view .LVU429
 1550 00e8 81E0      		ldi r24,lo8(1)
 1551 00ea 8083      		st Z,r24
 472:platforms/avr/drivers/serial.c ****             return TRANSACTION_NO_RESPONSE;
 1552               		.loc 1 472 13 is_stmt 1 view .LVU430
 1553               	/* #APP */
 1554               	 ;  472 "platforms/avr/drivers/serial.c" 1
 1555 00ec 7894      		sei
 1556               	 ;  0 "" 2
 473:platforms/avr/drivers/serial.c ****         }
 1557               		.loc 1 473 13 view .LVU431
 473:platforms/avr/drivers/serial.c ****         }
 1558               		.loc 1 473 20 is_stmt 0 view .LVU432
 1559               	/* #NOAPP */
 1560 00ee 81E0      		ldi r24,lo8(1)
 1561 00f0 90E0      		ldi r25,0
 1562               	.LVL90:
 1563               	.L50:
 1564               	/* epilogue start */
 473:platforms/avr/drivers/serial.c ****         }
 1565               		.loc 1 473 20 view .LVU433
 1566               	.LBE444:
 487:platforms/avr/drivers/serial.c ****         }
 488:platforms/avr/drivers/serial.c ****     }
 489:platforms/avr/drivers/serial.c **** 
 490:platforms/avr/drivers/serial.c ****     // initiator switch to output
 491:platforms/avr/drivers/serial.c ****     change_reciver2sender();
 492:platforms/avr/drivers/serial.c **** 
 493:platforms/avr/drivers/serial.c ****     // initiator send phase
 494:platforms/avr/drivers/serial.c ****     if (trans->initiator2target_buffer_size > 0) {
 495:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 496:platforms/avr/drivers/serial.c ****     }
 497:platforms/avr/drivers/serial.c **** 
 498:platforms/avr/drivers/serial.c ****     // always, release the line when not in use
 499:platforms/avr/drivers/serial.c ****     sync_send();
 500:platforms/avr/drivers/serial.c **** 
 501:platforms/avr/drivers/serial.c ****     *trans->status = TRANSACTION_END;
 502:platforms/avr/drivers/serial.c ****     sei();
 503:platforms/avr/drivers/serial.c ****     return TRANSACTION_END;
 504:platforms/avr/drivers/serial.c **** }
 1567               		.loc 1 504 1 view .LVU434
 1568 00f2 DF91      		pop r29
 1569 00f4 CF91      		pop r28
 1570               	.LVL91:
 1571               		.loc 1 504 1 view .LVU435
 1572 00f6 1F91      		pop r17
 1573 00f8 0F91      		pop r16
 1574 00fa 0895      		ret
 1575               	.LVL92:
 1576               	.L55:
 1577               	.LBB445:
 475:platforms/avr/drivers/serial.c ****     }
 1578               		.loc 1 475 9 is_stmt 1 discriminator 2 view .LVU436
 1579 00fc 00C0      		rjmp .
 466:platforms/avr/drivers/serial.c ****         if (i > SLAVE_INT_ACK_WIDTH + 1) {
 1580               		.loc 1 466 41 discriminator 2 view .LVU437
 1581               	.LVL93:
 466:platforms/avr/drivers/serial.c ****         if (i > SLAVE_INT_ACK_WIDTH + 1) {
 1582               		.loc 1 466 41 is_stmt 0 discriminator 2 view .LVU438
 1583 00fe 00C0      		rjmp .L54
 1584               	.LVL94:
 1585               	.L57:
 466:platforms/avr/drivers/serial.c ****         if (i > SLAVE_INT_ACK_WIDTH + 1) {
 1586               		.loc 1 466 41 discriminator 2 view .LVU439
 1587               	.LBE445:
 491:platforms/avr/drivers/serial.c **** 
 1588               		.loc 1 491 5 is_stmt 1 view .LVU440
 1589               	.LBB446:
 1590               	.LBI446:
 371:platforms/avr/drivers/serial.c ****     sync_recv();           // 0
 1591               		.loc 1 371 20 view .LVU441
 1592               	.LBB447:
 372:platforms/avr/drivers/serial.c ****     serial_delay();        // 1
 1593               		.loc 1 372 5 view .LVU442
 1594 0100 0E94 0000 		call sync_recv
 1595               	.LVL95:
 373:platforms/avr/drivers/serial.c ****     serial_low();          // 3
 1596               		.loc 1 373 5 view .LVU443
 1597               	.LBB448:
 1598               	.LBI448:
 231:platforms/avr/drivers/serial.c **** 
 1599               		.loc 1 231 20 view .LVU444
 231:platforms/avr/drivers/serial.c **** 
 1600               		.loc 1 231 41 view .LVU445
 1601               	.LBB449:
 1602               	.LBI449:
 255:/usr/avr/include/util/delay.h **** {
 1603               		.loc 2 255 1 view .LVU446
 1604               	.LBB450:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1605               		.loc 2 257 2 view .LVU447
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1606               		.loc 2 261 2 view .LVU448
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1607               		.loc 2 262 2 view .LVU449
 263:/usr/avr/include/util/delay.h **** 
 1608               		.loc 2 263 2 view .LVU450
 273:/usr/avr/include/util/delay.h **** 	#endif
 1609               		.loc 2 273 3 view .LVU451
 1610               		.loc 2 276 2 view .LVU452
 1611 0104 B0E2      		ldi r27,lo8(32)
 1612 0106 BA95      	1:	dec r27
 1613 0108 01F4      		brne 1b
 1614               	.LVL96:
 1615               		.loc 2 276 2 is_stmt 0 view .LVU453
 1616               	.LBE450:
 1617               	.LBE449:
 1618               	.LBE448:
 374:platforms/avr/drivers/serial.c ****     serial_output();       // 3
 1619               		.loc 1 374 5 is_stmt 1 view .LVU454
 1620               	.LBB451:
 1621               	.LBI451:
 250:platforms/avr/drivers/serial.c **** 
 1622               		.loc 1 250 20 view .LVU455
 1623               	.LBB452:
 250:platforms/avr/drivers/serial.c **** 
 1624               		.loc 1 250 39 view .LVU456
 1625 010a 5A98      		cbi 0xb,2
 1626               	.LBE452:
 1627               	.LBE451:
 375:platforms/avr/drivers/serial.c ****     serial_delay_half1();  // 4
 1628               		.loc 1 375 5 view .LVU457
 1629               	.LBB453:
 1630               	.LBI453:
 240:platforms/avr/drivers/serial.c **** 
 1631               		.loc 1 240 20 view .LVU458
 1632               	.LBB454:
 240:platforms/avr/drivers/serial.c **** 
 1633               		.loc 1 240 42 view .LVU459
 1634 010c 529A      		sbi 0xa,2
 1635               	.LBE454:
 1636               	.LBE453:
 376:platforms/avr/drivers/serial.c **** }
 1637               		.loc 1 376 5 view .LVU460
 1638               	.LBB455:
 1639               	.LBI455:
 234:platforms/avr/drivers/serial.c **** 
 1640               		.loc 1 234 20 view .LVU461
 234:platforms/avr/drivers/serial.c **** 
 1641               		.loc 1 234 47 view .LVU462
 1642               	.LVL97:
 1643               	.LBB456:
 1644               	.LBI456:
 255:/usr/avr/include/util/delay.h **** {
 1645               		.loc 2 255 1 view .LVU463
 1646               	.LBB457:
 257:/usr/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1647               		.loc 2 257 2 view .LVU464
 261:/usr/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1648               		.loc 2 261 2 view .LVU465
 262:/usr/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1649               		.loc 2 262 2 view .LVU466
 263:/usr/avr/include/util/delay.h **** 
 1650               		.loc 2 263 2 view .LVU467
 273:/usr/avr/include/util/delay.h **** 	#endif
 1651               		.loc 2 273 3 view .LVU468
 1652               		.loc 2 276 2 view .LVU469
 1653 010e E0E1      		ldi r30,lo8(16)
 1654 0110 EA95      	1:	dec r30
 1655 0112 01F4      		brne 1b
 1656               	.LVL98:
 1657               		.loc 2 276 2 is_stmt 0 view .LVU470
 1658               	.LBE457:
 1659               	.LBE456:
 1660               	.LBE455:
 1661               	.LBE447:
 1662               	.LBE446:
 494:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 1663               		.loc 1 494 5 is_stmt 1 view .LVU471
 494:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 1664               		.loc 1 494 14 is_stmt 0 view .LVU472
 1665 0114 8AE0      		ldi r24,lo8(10)
 1666 0116 8C9F      		mul r24,r28
 1667 0118 F001      		movw r30,r0
 1668 011a 8D9F      		mul r24,r29
 1669 011c F00D      		add r31,r0
 1670 011e 1124      		clr __zero_reg__
 1671 0120 E050      		subi r30,lo8(-(split_transaction_table))
 1672 0122 F040      		sbci r31,hi8(-(split_transaction_table))
 1673 0124 6281      		ldd r22,Z+2
 494:platforms/avr/drivers/serial.c ****         serial_send_packet((uint8_t *)split_trans_initiator2target_buffer(trans), trans->initiator2
 1674               		.loc 1 494 8 view .LVU473
 1675 0126 6623      		tst r22
 1676 0128 01F0      		breq .L58
 495:platforms/avr/drivers/serial.c ****     }
 1677               		.loc 1 495 9 is_stmt 1 view .LVU474
 1678 012a 2091 0000 		lds r18,split_shmem
 1679 012e 3091 0000 		lds r19,split_shmem+1
 1680 0132 8381      		ldd r24,Z+3
 1681 0134 9481      		ldd r25,Z+4
 1682 0136 820F      		add r24,r18
 1683 0138 931F      		adc r25,r19
 1684 013a 0E94 0000 		call serial_send_packet
 1685               	.LVL99:
 1686               	.L58:
 499:platforms/avr/drivers/serial.c **** 
 1687               		.loc 1 499 5 view .LVU475
 1688 013e 0E94 0000 		call sync_send
 1689               	.LVL100:
 501:platforms/avr/drivers/serial.c ****     sei();
 1690               		.loc 1 501 5 view .LVU476
 501:platforms/avr/drivers/serial.c ****     sei();
 1691               		.loc 1 501 11 is_stmt 0 view .LVU477
 1692 0142 8AE0      		ldi r24,lo8(10)
 1693 0144 8C9F      		mul r24,r28
 1694 0146 F001      		movw r30,r0
 1695 0148 8D9F      		mul r24,r29
 1696 014a F00D      		add r31,r0
 1697 014c 1124      		clr __zero_reg__
 1698 014e E050      		subi r30,lo8(-(split_transaction_table))
 1699 0150 F040      		sbci r31,hi8(-(split_transaction_table))
 1700 0152 0190      		ld __tmp_reg__,Z+
 1701 0154 F081      		ld r31,Z
 1702 0156 E02D      		mov r30,__tmp_reg__
 501:platforms/avr/drivers/serial.c ****     sei();
 1703               		.loc 1 501 20 view .LVU478
 1704 0158 1082      		st Z,__zero_reg__
 502:platforms/avr/drivers/serial.c ****     return TRANSACTION_END;
 1705               		.loc 1 502 5 is_stmt 1 view .LVU479
 1706               	/* #APP */
 1707               	 ;  502 "platforms/avr/drivers/serial.c" 1
 1708 015a 7894      		sei
 1709               	 ;  0 "" 2
 503:platforms/avr/drivers/serial.c **** }
 1710               		.loc 1 503 5 view .LVU480
 503:platforms/avr/drivers/serial.c **** }
 1711               		.loc 1 503 12 is_stmt 0 view .LVU481
 1712               	/* #NOAPP */
 1713 015c 90E0      		ldi r25,0
 1714 015e 80E0      		ldi r24,0
 1715 0160 00C0      		rjmp .L50
 1716               	.LVL101:
 1717               	.L60:
 440:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[sstd_index];
 1718               		.loc 1 440 53 view .LVU482
 1719 0162 84E0      		ldi r24,lo8(4)
 1720 0164 90E0      		ldi r25,0
 1721 0166 00C0      		rjmp .L50
 1722               		.cfi_endproc
 1723               	.LFE50:
 1725               		.section	.text.soft_serial_get_and_clean_status,"ax",@progbits
 1726               	.global	soft_serial_get_and_clean_status
 1728               	soft_serial_get_and_clean_status:
 1729               	.LVL102:
 1730               	.LFB51:
 505:platforms/avr/drivers/serial.c **** 
 506:platforms/avr/drivers/serial.c **** int soft_serial_get_and_clean_status(int sstd_index) {
 1731               		.loc 1 506 54 is_stmt 1 view -0
 1732               		.cfi_startproc
 1733               	/* prologue: function */
 1734               	/* frame size = 0 */
 1735               	/* stack size = 0 */
 1736               	.L__stack_usage = 0
 1737               		.loc 1 506 54 is_stmt 0 view .LVU484
 1738 0000 9C01      		movw r18,r24
 507:platforms/avr/drivers/serial.c ****     split_transaction_desc_t *trans = &split_transaction_table[sstd_index];
 1739               		.loc 1 507 5 is_stmt 1 view .LVU485
 1740               	.LVL103:
 508:platforms/avr/drivers/serial.c ****     cli();
 1741               		.loc 1 508 5 view .LVU486
 1742               	/* #APP */
 1743               	 ;  508 "platforms/avr/drivers/serial.c" 1
 1744 0002 F894      		cli
 1745               	 ;  0 "" 2
 509:platforms/avr/drivers/serial.c ****     int retval     = *trans->status;
 1746               		.loc 1 509 5 view .LVU487
 1747               		.loc 1 509 28 is_stmt 0 view .LVU488
 1748               	/* #NOAPP */
 1749 0004 8AE0      		ldi r24,lo8(10)
 1750               	.LVL104:
 1751               		.loc 1 509 28 view .LVU489
 1752 0006 829F      		mul r24,r18
 1753 0008 F001      		movw r30,r0
 1754 000a 839F      		mul r24,r19
 1755 000c F00D      		add r31,r0
 1756 000e 1124      		clr __zero_reg__
 1757 0010 E050      		subi r30,lo8(-(split_transaction_table))
 1758 0012 F040      		sbci r31,hi8(-(split_transaction_table))
 1759 0014 0190      		ld __tmp_reg__,Z+
 1760 0016 F081      		ld r31,Z
 1761 0018 E02D      		mov r30,__tmp_reg__
 1762               		.loc 1 509 9 view .LVU490
 1763 001a 8081      		ld r24,Z
 1764 001c 90E0      		ldi r25,0
 1765               	.LVL105:
 510:platforms/avr/drivers/serial.c ****     *trans->status = 0;
 1766               		.loc 1 510 5 is_stmt 1 view .LVU491
 1767               		.loc 1 510 20 is_stmt 0 view .LVU492
 1768 001e 1082      		st Z,__zero_reg__
 511:platforms/avr/drivers/serial.c ****     ;
 1769               		.loc 1 511 5 is_stmt 1 view .LVU493
 512:platforms/avr/drivers/serial.c ****     sei();
 1770               		.loc 1 512 5 view .LVU494
 1771               	/* #APP */
 1772               	 ;  512 "platforms/avr/drivers/serial.c" 1
 1773 0020 7894      		sei
 1774               	 ;  0 "" 2
 513:platforms/avr/drivers/serial.c ****     return retval;
 1775               		.loc 1 513 5 view .LVU495
 1776               	/* #NOAPP */
 1777               	/* epilogue start */
 514:platforms/avr/drivers/serial.c **** }
 1778               		.loc 1 514 1 is_stmt 0 view .LVU496
 1779 0022 0895      		ret
 1780               		.cfi_endproc
 1781               	.LFE51:
 1783               		.text
 1784               	.Letext0:
 1785               		.file 3 "/usr/avr/include/stdint.h"
 1786               		.file 4 "quantum/matrix.h"
 1787               		.file 5 "quantum/split_common/transport.h"
 1788               		.file 6 "quantum/split_common/transactions.h"
 1789               		.file 7 "/usr/avr/include/math.h"
 1790               		.file 8 "quantum/split_common/transaction_id_define.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 serial.c
     /tmp/ccdN7bp3.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccdN7bp3.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccdN7bp3.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccdN7bp3.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccdN7bp3.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccdN7bp3.s:12     .text.sync_recv:0000000000000000 sync_recv
     /tmp/ccdN7bp3.s:73     .text.sync_send:0000000000000000 sync_send
     /tmp/ccdN7bp3.s:132    .text.serial_read_chunk.constprop.0:0000000000000000 serial_read_chunk.constprop.0
     /tmp/ccdN7bp3.s:336    .text.serial_recive_packet:0000000000000000 serial_recive_packet
     /tmp/ccdN7bp3.s:447    .text.soft_serial_initiator_init:0000000000000000 soft_serial_initiator_init
     /tmp/ccdN7bp3.s:482    .text.soft_serial_target_init:0000000000000000 soft_serial_target_init
     /tmp/ccdN7bp3.s:519    .text.serial_write_chunk:0000000000000000 serial_write_chunk
     /tmp/ccdN7bp3.s:682    .text.serial_send_packet:0000000000000000 serial_send_packet
     /tmp/ccdN7bp3.s:766    .text.__vector_3:0000000000000000 __vector_3
     /tmp/ccdN7bp3.s:1230   .text.soft_serial_transaction:0000000000000000 soft_serial_transaction
     /tmp/ccdN7bp3.s:1728   .text.soft_serial_get_and_clean_status:0000000000000000 soft_serial_get_and_clean_status

UNDEFINED SYMBOLS
split_transaction_table
split_shmem
